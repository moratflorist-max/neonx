<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NeonX Casino</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Rajdhani:wght@400;500;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<style>
:root{--bg:#05050f;--bg2:#0a0a1f;--purple:#7c3aed;--pink:#ec4899;--gold:#f59e0b;--neon:#a855f7;--cyan:#06b6d4;--green:#10b981;--red:#ef4444;--text:#f1f5f9;--muted:#94a3b8;}
*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}
body{background:var(--bg);color:var(--text);font-family:'Rajdhani',sans-serif;overflow-x:hidden;}
::-webkit-scrollbar{width:5px;}
::-webkit-scrollbar-track{background:#0a0a1f;}
::-webkit-scrollbar-thumb{background:var(--purple);border-radius:3px;}

/* PARTICLES */
#particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;overflow:hidden;}
.particle{position:absolute;border-radius:50%;animation:float linear infinite;opacity:0;}
@keyframes float{0%{transform:translateY(100vh) rotate(0deg);opacity:0;}10%{opacity:.7;}90%{opacity:.7;}100%{transform:translateY(-100px) rotate(720deg);opacity:0;}}

/* TICKER */
.ticker-wrap{background:linear-gradient(90deg,#12012e,#0f0f2a,#12012e);border-bottom:1px solid rgba(168,85,247,.3);padding:7px 0;overflow:hidden;position:relative;z-index:200;}
.ticker-inner{display:flex;animation:tick 40s linear infinite;white-space:nowrap;width:max-content;}
@keyframes tick{0%{transform:translateX(0);}100%{transform:translateX(-50%);}}
.ticker-item{font-size:12px;color:var(--gold);display:inline-flex;align-items:center;gap:8px;padding:0 40px;}
.ticker-item b{color:#fff;}
.t-dot{width:6px;height:6px;border-radius:50%;background:var(--green);display:inline-block;animation:blink 1.2s infinite;}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:.3;}}

/* HEADER */
header{position:fixed;top:0;left:0;width:100%;z-index:999;background:rgba(5,5,15,.95);backdrop-filter:blur(20px);border-bottom:1px solid rgba(168,85,247,.25);}
.header-inner{display:flex;align-items:center;justify-content:space-between;padding:0 24px;height:64px;max-width:1400px;margin:0 auto;}
.logo{display:flex;align-items:center;gap:10px;cursor:pointer;}
.logo-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--purple),var(--pink));border-radius:8px;display:flex;align-items:center;justify-content:center;font-family:'Orbitron',sans-serif;font-weight:900;font-size:16px;color:#fff;box-shadow:0 0 20px rgba(168,85,247,.6);}
.logo-text{font-family:'Orbitron',sans-serif;font-weight:900;font-size:20px;background:linear-gradient(90deg,#a855f7,#ec4899,#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:1px;}
.logo-sub{font-size:10px;color:var(--muted);letter-spacing:3px;text-transform:uppercase;display:block;margin-top:-4px;}
.nav-links{display:flex;align-items:center;gap:4px;}
.nav-links a{color:var(--muted);font-size:14px;font-weight:600;padding:8px 14px;border-radius:6px;transition:.2s;text-transform:uppercase;letter-spacing:.5px;cursor:pointer;}
.nav-links a:hover,.nav-links a.active{color:#fff;background:rgba(168,85,247,.15);}
.header-right{display:flex;align-items:center;gap:10px;}
.balance-chip{background:rgba(168,85,247,.15);border:1px solid rgba(168,85,247,.3);border-radius:20px;padding:6px 16px;font-size:14px;font-weight:700;color:var(--gold);cursor:pointer;transition:.2s;}
.balance-chip:hover{background:rgba(168,85,247,.25);}
.balance-chip span{color:var(--muted);font-size:10px;display:block;line-height:1;}
.btn-hdr{padding:8px 18px;border-radius:8px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;cursor:pointer;transition:.2s;text-transform:uppercase;}
.btn-login{background:transparent;border:1px solid rgba(255,255,255,.2);color:#fff;}
.btn-login:hover{border-color:var(--neon);color:var(--neon);}
.btn-reg{background:linear-gradient(135deg,var(--purple),var(--pink));border:none;color:#fff;box-shadow:0 0 20px rgba(168,85,247,.4);}
.btn-reg:hover{transform:translateY(-1px);box-shadow:0 0 30px rgba(168,85,247,.7);}
.burger{display:none;flex-direction:column;gap:5px;cursor:pointer;padding:8px;}
.burger span{display:block;width:22px;height:2px;background:#fff;border-radius:2px;}
.mobile-menu{display:none;position:fixed;top:64px;left:0;width:100%;background:rgba(5,5,15,.98);z-index:998;padding:20px;border-bottom:1px solid rgba(168,85,247,.3);}
.mobile-menu.open{display:block;}
.mobile-menu a{display:block;color:#fff;padding:12px 16px;font-size:16px;font-weight:600;border-bottom:1px solid rgba(255,255,255,.05);cursor:pointer;}

/* PAGES */
.page{display:none;}
.page.active{display:block;}

/* HERO */
.hero{margin-top:64px;position:relative;height:calc(100vh - 64px);min-height:500px;max-height:800px;overflow:hidden;}
.slide{position:absolute;inset:0;opacity:0;transition:opacity .8s ease;display:flex;align-items:center;}
.slide.active{opacity:1;}
.slide-bg{position:absolute;inset:0;}
.slide-overlay{position:absolute;inset:0;}
.slide-content{position:relative;z-index:10;max-width:700px;padding:0 60px;}
.slide-badge{display:inline-block;background:rgba(245,158,11,.2);border:1px solid var(--gold);color:var(--gold);padding:5px 14px;border-radius:20px;font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:2px;margin-bottom:20px;}
.slide-title{font-family:'Bebas Neue',sans-serif;font-size:clamp(40px,6vw,86px);line-height:.95;margin-bottom:18px;}
.slide-sub{font-size:clamp(14px,2vw,18px);color:rgba(255,255,255,.8);margin-bottom:30px;line-height:1.4;}
.slide-btns{display:flex;gap:12px;flex-wrap:wrap;}
.btn-primary{background:linear-gradient(135deg,var(--gold),#d97706);border:none;color:#000;padding:14px 32px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:17px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:.2s;box-shadow:0 0 30px rgba(245,158,11,.5);}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 0 50px rgba(245,158,11,.8);}
.btn-secondary{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.3);color:#fff;padding:14px 32px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:17px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:.2s;backdrop-filter:blur(10px);}
.btn-secondary:hover{background:rgba(255,255,255,.2);}
.slide-dots{position:absolute;bottom:28px;left:60px;display:flex;gap:8px;z-index:10;}
.dot{width:30px;height:3px;background:rgba(255,255,255,.3);border-radius:2px;cursor:pointer;transition:.3s;}
.dot.active{background:var(--gold);width:60px;}
.slide-arrows{position:absolute;right:40px;top:50%;transform:translateY(-50%);z-index:10;display:flex;flex-direction:column;gap:10px;}
.arrow-btn{width:44px;height:44px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:50%;color:#fff;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s;}
.arrow-btn:hover{background:rgba(168,85,247,.4);border-color:var(--neon);}
.hero-floats{position:absolute;right:5%;top:50%;transform:translateY(-50%);z-index:5;display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.float-card{background:rgba(255,255,255,.05);border:1px solid rgba(168,85,247,.3);border-radius:12px;padding:14px 18px;backdrop-filter:blur(20px);text-align:center;animation:floatY 3s ease-in-out infinite;}
.float-card:nth-child(2){animation-delay:.5s;}
.float-card:nth-child(3){animation-delay:1s;}
.float-card:nth-child(4){animation-delay:1.5s;}
@keyframes floatY{0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);}}
.fc-val{font-family:'Orbitron',sans-serif;font-size:18px;font-weight:700;color:var(--gold);}
.fc-lbl{font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;}
.fc-icon{font-size:24px;margin-bottom:4px;}

/* SLIDES */
.s1 .slide-bg{background:linear-gradient(135deg,#1a003a,#0d0021,#001a3a);}
.s1 .slide-overlay{background:linear-gradient(to right,rgba(5,5,15,.95) 50%,transparent);}
.s1 .slide-title{background:linear-gradient(90deg,#fff,#a855f7,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.s2 .slide-bg{background:linear-gradient(135deg,#002a00,#001a1a,#002a1a);}
.s2 .slide-overlay{background:linear-gradient(to right,rgba(5,5,15,.95) 50%,transparent);}
.s2 .slide-title{background:linear-gradient(90deg,#fff,#10b981,#06b6d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.s3 .slide-bg{background:linear-gradient(135deg,#2a0000,#1a0010,#0a001a);}
.s3 .slide-overlay{background:linear-gradient(to right,rgba(5,5,15,.95) 50%,transparent);}
.s3 .slide-title{background:linear-gradient(90deg,#fff,#f59e0b,#ef4444);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.s4 .slide-bg{background:linear-gradient(135deg,#001a2a,#00102a,#001a3a);}
.s4 .slide-overlay{background:linear-gradient(to right,rgba(5,5,15,.95) 50%,transparent);}
.s4 .slide-title{background:linear-gradient(90deg,#fff,#06b6d4,#a855f7);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}

/* SECTION */
.section{position:relative;z-index:10;padding:60px 24px;}
.section-inner{max-width:1400px;margin:0 auto;}
.section-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:28px;}
.section-title{font-family:'Bebas Neue',sans-serif;font-size:clamp(26px,4vw,44px);letter-spacing:2px;}
.accent{background:linear-gradient(90deg,var(--neon),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.section-line{width:60px;height:3px;background:linear-gradient(90deg,var(--purple),var(--pink));border-radius:2px;margin-top:6px;}
.see-all-btn{background:rgba(168,85,247,.15);border:1px solid rgba(168,85,247,.3);color:var(--neon);padding:8px 18px;border-radius:8px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;cursor:pointer;transition:.2s;text-transform:uppercase;}
.see-all-btn:hover{background:rgba(168,85,247,.3);}

/* STATS BAR */
.stats-bar{background:linear-gradient(90deg,rgba(124,58,237,.1),rgba(236,72,153,.1),rgba(124,58,237,.1));border:1px solid rgba(168,85,247,.2);border-radius:16px;padding:28px 40px;display:grid;grid-template-columns:repeat(4,1fr);gap:20px;}
.stat-item{text-align:center;}
.stat-val{font-family:'Orbitron',sans-serif;font-size:26px;font-weight:700;background:linear-gradient(90deg,var(--gold),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.stat-lbl{font-size:12px;color:var(--muted);margin-top:4px;text-transform:uppercase;letter-spacing:1px;}

/* GAMES GRID */
.games-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(175px,1fr));gap:14px;}
.game-card{border-radius:12px;overflow:hidden;cursor:pointer;position:relative;transition:.3s;}
.game-card:hover{transform:translateY(-5px);}
.game-thumb{width:100%;aspect-ratio:3/4;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;}
.game-thumb-inner{width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px;}
.game-thumb-name{font-family:'Bebas Neue',sans-serif;font-size:16px;color:#fff;text-align:center;padding:0 8px;text-shadow:0 2px 10px rgba(0,0,0,.8);}
.game-overlay{position:absolute;inset:0;background:rgba(0,0,0,.65);display:flex;align-items:center;justify-content:center;opacity:0;transition:.3s;backdrop-filter:blur(4px);}
.game-card:hover .game-overlay{opacity:1;}
.btn-play{background:linear-gradient(135deg,var(--gold),#d97706);border:none;color:#000;padding:10px 24px;border-radius:8px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:15px;cursor:pointer;text-transform:uppercase;}
.game-info{padding:10px 12px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-top:none;border-radius:0 0 12px 12px;}
.game-name{font-weight:700;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.game-meta{display:flex;align-items:center;justify-content:space-between;margin-top:3px;}
.game-rtp{font-size:11px;color:var(--green);font-weight:600;}
.game-provider{font-size:11px;color:var(--muted);}
.tag{position:absolute;top:8px;left:8px;font-size:10px;font-weight:700;padding:3px 8px;border-radius:4px;text-transform:uppercase;letter-spacing:.5px;}
.tag-hot{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;}
.tag-new{background:linear-gradient(135deg,var(--cyan),#0891b2);color:#fff;}
.tag-live{background:var(--red);color:#fff;animation:livePulse 1.5s infinite;}
@keyframes livePulse{0%,100%{opacity:1;}50%{opacity:.6;}}

/* GAME COLORS */
.gc1{background:linear-gradient(135deg,#4c0099,#7c3aed,#c026d3);}
.gc2{background:linear-gradient(135deg,#065f46,#059669,#34d399);}
.gc3{background:linear-gradient(135deg,#7c2d12,#ea580c,#fb923c);}
.gc4{background:linear-gradient(135deg,#1e3a5f,#2563eb,#60a5fa);}
.gc5{background:linear-gradient(135deg,#4a044e,#a21caf,#e879f9);}
.gc6{background:linear-gradient(135deg,#7f1d1d,#dc2626,#f87171);}
.gc7{background:linear-gradient(135deg,#1e1b4b,#4338ca,#818cf8);}
.gc8{background:linear-gradient(135deg,#064e3b,#047857,#6ee7b7);}
.gc9{background:linear-gradient(135deg,#2d1b69,#6d28d9,#c4b5fd);}
.gc10{background:linear-gradient(135deg,#78350f,#b45309,#fbbf24);}
.gc11{background:linear-gradient(135deg,#0c4a6e,#0284c7,#38bdf8);}
.gc12{background:linear-gradient(135deg,#14532d,#16a34a,#86efac);}
.gc13{background:linear-gradient(135deg,#3b0764,#7e22ce,#d8b4fe);}
.gc14{background:linear-gradient(135deg,#7f1d1d,#b91c1c,#fca5a5);}
.gc15{background:linear-gradient(135deg,#0f172a,#1e40af,#93c5fd);}

/* LIVE GRID */
.live-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:14px;}
.live-card{border-radius:14px;overflow:hidden;cursor:pointer;position:relative;transition:.3s;border:1px solid rgba(255,255,255,.07);}
.live-card:hover{transform:translateY(-4px);border-color:rgba(168,85,247,.4);}
.live-thumb{height:150px;display:flex;align-items:center;justify-content:center;position:relative;font-size:52px;}
.live-players{position:absolute;top:10px;right:10px;background:rgba(0,0,0,.6);color:var(--gold);font-size:11px;font-weight:700;padding:3px 8px;border-radius:4px;}
.live-info{padding:12px;background:rgba(10,10,31,.95);}
.live-name{font-weight:700;font-size:15px;margin-bottom:3px;}
.live-sub{font-size:12px;color:var(--muted);}
.live-min{font-size:12px;color:var(--gold);margin-top:5px;font-weight:600;}
.lc1{background:linear-gradient(135deg,#1a0030,#4c0099,#7c3aed);}
.lc2{background:linear-gradient(135deg,#001a00,#065f46,#059669);}
.lc3{background:linear-gradient(135deg,#1a0010,#7c0030,#be185d);}
.lc4{background:linear-gradient(135deg,#001030,#1e3a5f,#2563eb);}
.lc5{background:linear-gradient(135deg,#1a0a00,#7c2d12,#ea580c);}
.lc6{background:linear-gradient(135deg,#0a001a,#2d1b69,#6d28d9);}

/* PROVIDERS */
.providers-scroll{overflow-x:auto;padding:10px 0;scrollbar-width:none;}
.providers-scroll::-webkit-scrollbar{display:none;}
.providers-inner{display:flex;gap:12px;width:max-content;}
.provider-chip{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:12px 20px;cursor:pointer;transition:.3s;display:flex;align-items:center;gap:10px;white-space:nowrap;}
.provider-chip:hover{background:rgba(168,85,247,.12);border-color:rgba(168,85,247,.3);transform:translateY(-2px);}
.p-icon{width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;}
.p-name{font-weight:700;font-size:14px;}
.p-games{font-size:11px;color:var(--muted);}

/* BONUSES */
.bonus-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;}
.bonus-card{border-radius:16px;padding:24px;cursor:pointer;position:relative;overflow:hidden;transition:.3s;border:1px solid rgba(255,255,255,.08);}
.bonus-card:hover{transform:translateY(-4px);}
.bonus-card::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.05),transparent);pointer-events:none;}
.bc1{background:linear-gradient(135deg,#1a003a,#2d0060);}
.bc2{background:linear-gradient(135deg,#001a2a,#002a40);}
.bc3{background:linear-gradient(135deg,#1a0a00,#2a1000);}
.bc4{background:linear-gradient(135deg,#001a00,#002a10);}
.bc5{background:linear-gradient(135deg,#1a1a00,#2a2a00);}
.bc6{background:linear-gradient(135deg,#001a1a,#002a2a);}
.bonus-icon{font-size:36px;margin-bottom:12px;}
.bonus-title{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:1px;margin-bottom:8px;}
.bonus-desc{font-size:13px;color:var(--muted);line-height:1.5;margin-bottom:14px;}
.bonus-value{font-family:'Orbitron',sans-serif;font-size:18px;font-weight:700;margin-bottom:14px;}
.bonus-btn{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#fff;padding:9px 20px;border-radius:8px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;cursor:pointer;transition:.2s;text-transform:uppercase;}
.bonus-btn:hover{background:rgba(255,255,255,.25);}
.bonus-badge{position:absolute;top:14px;right:14px;font-size:10px;font-weight:700;padding:3px 9px;border-radius:20px;text-transform:uppercase;}
.bb-hot{background:rgba(239,68,68,.2);border:1px solid var(--red);color:var(--red);}
.bb-new{background:rgba(6,182,212,.2);border:1px solid var(--cyan);color:var(--cyan);}
.bb-vip{background:rgba(245,158,11,.2);border:1px solid var(--gold);color:var(--gold);}

/* FILTERS */
.game-filters{display:flex;gap:8px;margin-bottom:24px;flex-wrap:wrap;}
.filter-btn{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);color:var(--muted);padding:6px 14px;border-radius:20px;font-family:'Rajdhani',sans-serif;font-weight:600;font-size:13px;cursor:pointer;transition:.2s;text-transform:uppercase;}
.filter-btn:hover,.filter-btn.active{background:rgba(168,85,247,.2);border-color:var(--neon);color:#fff;}

/* FOOTER */
footer{background:rgba(0,0,0,.6);border-top:1px solid rgba(168,85,247,.2);padding:50px 24px 24px;position:relative;z-index:10;}
.footer-inner{max-width:1400px;margin:0 auto;}
.footer-top{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:40px;margin-bottom:40px;}
.footer-desc{font-size:13px;color:var(--muted);margin-top:12px;line-height:1.6;max-width:280px;}
.footer-disclaimer{margin-top:14px;font-size:11px;color:rgba(148,163,184,.5);line-height:1.5;padding:10px;background:rgba(255,255,255,.02);border-radius:8px;border:1px solid rgba(255,255,255,.05);}
.footer-col h4{font-family:'Bebas Neue',sans-serif;font-size:16px;letter-spacing:2px;color:var(--muted);margin-bottom:14px;}
.footer-col a{display:block;color:rgba(255,255,255,.6);font-size:14px;padding:4px 0;transition:.2s;cursor:pointer;}
.footer-col a:hover{color:#fff;}
.footer-bottom{border-top:1px solid rgba(255,255,255,.07);padding-top:20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;}
.payment-icons{display:flex;gap:8px;flex-wrap:wrap;}
.pay-chip{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.1);border-radius:6px;padding:5px 12px;font-size:11px;font-weight:700;color:var(--muted);}
.footer-copy{font-size:12px;color:rgba(148,163,184,.4);margin-top:12px;}
.age-badge{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;border:2px solid var(--muted);color:var(--muted);font-weight:900;font-size:11px;margin-right:8px;}
.neon-border{border:1px solid rgba(168,85,247,.4);box-shadow:0 0 20px rgba(168,85,247,.15),inset 0 0 20px rgba(168,85,247,.04);}

/* SUPPORT BTN */
.support-btn{position:fixed;bottom:24px;right:24px;z-index:999;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,var(--purple),var(--pink));border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:22px;box-shadow:0 0 30px rgba(168,85,247,.6);transition:.3s;animation:supportPulse 2s infinite;}
@keyframes supportPulse{0%,100%{box-shadow:0 0 30px rgba(168,85,247,.6);}50%{box-shadow:0 0 50px rgba(168,85,247,.9),0 0 80px rgba(168,85,247,.3);}}
.support-btn:hover{transform:scale(1.1);}
.support-badge{position:absolute;top:0;right:0;width:18px;height:18px;background:var(--green);border-radius:50%;border:2px solid var(--bg);font-size:10px;font-weight:700;display:flex;align-items:center;justify-content:center;}

/* WIN NOTIF */
.win-notif{position:fixed;bottom:90px;right:24px;z-index:998;max-width:290px;animation:slideIn .4s ease;}
@keyframes slideIn{from{transform:translateX(320px);opacity:0;}to{transform:translateX(0);opacity:1;}}
.win-card{background:rgba(10,10,31,.96);border:1px solid rgba(168,85,247,.4);border-radius:12px;padding:14px 16px;display:flex;align-items:center;gap:12px;backdrop-filter:blur(20px);box-shadow:0 10px 40px rgba(0,0,0,.5);}
.win-icon{font-size:28px;flex-shrink:0;}
.win-text{font-size:13px;line-height:1.4;}
.win-text strong{color:var(--gold);}
.win-text span{color:var(--muted);}

/* GAME PAGE */
.game-page-header{padding:90px 24px 24px;text-align:center;background:linear-gradient(180deg,rgba(124,58,237,.08),transparent);}
.game-page-title{font-family:'Bebas Neue',sans-serif;font-size:48px;letter-spacing:2px;margin-bottom:8px;}
.game-page-sub{color:var(--muted);font-size:15px;margin-bottom:20px;}
.game-select-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(190px,1fr));gap:14px;max-width:1300px;margin:0 auto;padding:0 24px 60px;}
.game-select-card{background:rgba(255,255,255,.04);border:2px solid rgba(168,85,247,.2);border-radius:16px;padding:22px 18px;text-align:center;cursor:pointer;transition:.3s;position:relative;}
.game-select-card:hover{transform:translateY(-5px);border-color:var(--neon);background:rgba(168,85,247,.1);}
.gsc-icon{font-size:52px;margin-bottom:10px;}
.gsc-name{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:1px;margin-bottom:5px;}
.gsc-desc{font-size:12px;color:var(--muted);line-height:1.4;}
.gsc-rtp{font-size:12px;color:var(--green);font-weight:700;margin-top:8px;}
.gsc-badge{position:absolute;top:10px;right:10px;font-size:10px;font-weight:700;padding:2px 7px;border-radius:10px;}
.gsc-hot{background:rgba(239,68,68,.25);border:1px solid var(--red);color:var(--red);}
.gsc-new{background:rgba(6,182,212,.25);border:1px solid var(--cyan);color:var(--cyan);}

/* GAME MODAL */
.game-modal{position:fixed;inset:0;z-index:2000;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.88);backdrop-filter:blur(12px);}
.game-modal.open{display:flex;}
.game-modal-inner{background:linear-gradient(135deg,#0d0020,#080820);border:1px solid rgba(168,85,247,.45);border-radius:20px;width:min(920px,96vw);max-height:92vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 0 80px rgba(168,85,247,.25);}
.gm-head{padding:14px 20px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(255,255,255,.08);flex-shrink:0;gap:10px;}
.gm-title{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:1px;}
.gm-balance{font-family:'Orbitron',sans-serif;font-size:14px;color:var(--gold);font-weight:700;white-space:nowrap;}
.gm-close{background:rgba(255,255,255,.1);border:none;color:#fff;width:34px;height:34px;border-radius:50%;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s;flex-shrink:0;}
.gm-close:hover{background:var(--red);}
.gm-body{padding:18px;overflow-y:auto;flex:1;}

/* GAME UI COMMONS */
.bet-row{display:flex;align-items:center;gap:10px;justify-content:center;margin-bottom:14px;flex-wrap:wrap;}
.bet-wrap{display:flex;align-items:center;gap:6px;background:rgba(0,0,0,.4);border:1px solid rgba(168,85,247,.3);border-radius:8px;padding:6px 12px;}
.bet-wrap label{font-size:11px;color:var(--muted);text-transform:uppercase;}
.bet-inp{background:transparent;border:none;color:var(--gold);font-family:'Orbitron',sans-serif;font-size:15px;font-weight:700;width:80px;text-align:right;outline:none;}
.qbets{display:flex;gap:5px;flex-wrap:wrap;}
.qb{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.1);color:var(--muted);padding:5px 10px;border-radius:6px;font-size:11px;cursor:pointer;font-family:'Rajdhani',sans-serif;font-weight:700;transition:.2s;}
.qb:hover{border-color:var(--neon);color:#fff;}
.game-result{min-height:44px;font-family:'Orbitron',sans-serif;font-size:17px;font-weight:700;text-align:center;margin:12px 0;padding:8px;border-radius:8px;transition:.3s;}
.game-result.win{color:var(--gold);background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.3);}
.game-result.lose{color:var(--red);background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);}
.game-result.info{color:var(--cyan);background:rgba(6,182,212,.1);border:1px solid rgba(6,182,212,.2);}
.action-btn{padding:11px 28px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:15px;cursor:pointer;text-transform:uppercase;border:none;transition:.2s;letter-spacing:.5px;}
.action-btn:hover:not(:disabled){transform:translateY(-2px);filter:brightness(1.1);}
.action-btn:disabled{opacity:.5;cursor:not-allowed;}
.btn-gold{background:linear-gradient(135deg,var(--gold),#d97706);color:#000;box-shadow:0 0 20px rgba(245,158,11,.4);}
.btn-green{background:linear-gradient(135deg,var(--green),#059669);color:#fff;box-shadow:0 0 20px rgba(16,185,129,.3);}
.btn-red{background:linear-gradient(135deg,var(--red),#dc2626);color:#fff;}
.btn-purple{background:linear-gradient(135deg,var(--purple),var(--pink));color:#fff;box-shadow:0 0 20px rgba(168,85,247,.4);}
.btn-blue{background:linear-gradient(135deg,#2563eb,#1d4ed8);color:#fff;}
.btn-cyan{background:linear-gradient(135deg,var(--cyan),#0891b2);color:#000;}
.btns-row{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:10px 0;}
.game-subtitle{color:var(--muted);font-size:13px;text-align:center;margin-bottom:14px;}

/* SLOT PREMIUM */
.slot-machine-wrap{background:linear-gradient(180deg,#0a0020 0%,#050015 100%);border-radius:20px;padding:20px;border:2px solid rgba(168,85,247,.5);box-shadow:0 0 60px rgba(168,85,247,.2),inset 0 0 40px rgba(0,0,0,.5);position:relative;overflow:hidden;}
.slot-machine-wrap::before{content:'';position:absolute;top:-2px;left:10%;right:10%;height:2px;background:linear-gradient(90deg,transparent,#a855f7,#ec4899,#a855f7,transparent);border-radius:2px;animation:topGlow 2s linear infinite;}
@keyframes topGlow{0%,100%{opacity:.5;}50%{opacity:1;}}
.slot-top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding:8px 16px;background:rgba(0,0,0,.4);border-radius:10px;border:1px solid rgba(168,85,247,.2);}
.slot-label{font-family:'Orbitron',sans-serif;font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:2px;}
.slot-val{font-family:'Orbitron',sans-serif;font-size:18px;color:var(--gold);font-weight:700;}
.slot-reels-container{position:relative;background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(10,0,30,.9));border-radius:14px;padding:12px;border:2px solid rgba(168,85,247,.3);overflow:hidden;margin-bottom:14px;}
.slot-reels-container::after{content:'';position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);height:92px;pointer-events:none;border-top:2px solid rgba(245,158,11,.6);border-bottom:2px solid rgba(245,158,11,.6);box-shadow:0 0 20px rgba(245,158,11,.3),inset 0 0 20px rgba(245,158,11,.05);}
.slot-reels-glow{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.7) 0%,transparent 30%,transparent 70%,rgba(0,0,0,.7) 100%);pointer-events:none;z-index:5;}
.slot-reels{display:flex;justify-content:center;gap:6px;position:relative;z-index:2;}
.reel-window{width:90px;height:88px;overflow:hidden;border-radius:8px;position:relative;background:rgba(0,0,0,.3);}
.reel{display:flex;flex-direction:column;transition:transform .1s linear;will-change:transform;}
.reel-symbol{width:90px;height:88px;display:flex;align-items:center;justify-content:center;font-size:48px;flex-shrink:0;position:relative;}
.reel-symbol.winning{animation:symbolWin .5s ease infinite alternate;}
@keyframes symbolWin{0%{filter:drop-shadow(0 0 10px gold) brightness(1.2);}100%{filter:drop-shadow(0 0 25px gold) brightness(1.5);}}
.slot-win-lines{position:absolute;inset:0;pointer-events:none;z-index:10;}
.slot-info{display:flex;gap:10px;justify-content:center;margin-bottom:12px;flex-wrap:wrap;}
.slot-info-item{background:rgba(0,0,0,.5);border:1px solid rgba(168,85,247,.25);border-radius:10px;padding:8px 18px;font-size:12px;text-align:center;flex:1;min-width:80px;}
.slot-info-val{font-family:'Orbitron',sans-serif;font-size:16px;color:var(--gold);font-weight:700;}
.jackpot-ticker{font-family:'Orbitron',sans-serif;font-size:13px;color:var(--gold);text-align:center;padding:6px;background:rgba(245,158,11,.08);border:1px solid rgba(245,158,11,.2);border-radius:8px;margin-bottom:10px;animation:jackpotPulse 2s infinite;}
@keyframes jackpotPulse{0%,100%{text-shadow:0 0 10px rgba(245,158,11,.5);}50%{text-shadow:0 0 20px rgba(245,158,11,.9),0 0 40px rgba(245,158,11,.4);}}
.paytable{background:rgba(0,0,0,.4);border:1px solid rgba(168,85,247,.2);border-radius:12px;padding:14px;margin-top:12px;}
.paytable h4{color:var(--muted);font-size:11px;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;}
.pay-row{display:flex;align-items:center;justify-content:space-between;padding:4px 6px;font-size:13px;border-bottom:1px solid rgba(255,255,255,.04);border-radius:4px;transition:.2s;}
.pay-row:hover{background:rgba(168,85,247,.05);}
.slot-win-anim{position:absolute;inset:0;pointer-events:none;z-index:20;display:none;}
.slot-win-anim.active{display:block;animation:bigWinFlash .3s ease 3;}
@keyframes bigWinFlash{0%,100%{background:transparent;}50%{background:rgba(245,158,11,.15);}}
/* coin particles */
.coin-particle{position:fixed;pointer-events:none;z-index:9999;font-size:20px;animation:coinFall 1.5s ease-in forwards;}
@keyframes coinFall{0%{opacity:1;transform:translateY(0) rotate(0);}100%{opacity:0;transform:translateY(200px) rotate(720deg);}}

/* ROULETTE PREMIUM */
.roulette-wrap{display:flex;flex-direction:column;align-items:center;}
.roulette-outer{position:relative;display:inline-block;margin-bottom:12px;}
.roulette-canvas-wrap{position:relative;border-radius:50%;overflow:hidden;}
#roulCanvas{display:block;filter:drop-shadow(0 0 30px rgba(245,158,11,.5));cursor:default;}
.wheel-pin{position:absolute;top:-10px;left:50%;transform:translateX(-50%);font-size:20px;z-index:10;filter:drop-shadow(0 0 6px rgba(245,158,11,.8));}
.roul-num{font-family:'Orbitron',sans-serif;font-size:40px;font-weight:700;margin:8px 0;text-align:center;transition:.5s;}
.roulette-table{background:linear-gradient(135deg,#0a3020,#062018);border:2px solid rgba(245,158,11,.3);border-radius:14px;padding:14px;max-width:440px;width:100%;margin:0 auto 12px;}
.roul-bets{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin:0;}
.rb{background:rgba(255,255,255,.05);border:2px solid rgba(255,255,255,.1);border-radius:9px;padding:9px 6px;cursor:pointer;transition:.2s;font-weight:700;font-size:13px;text-align:center;position:relative;overflow:hidden;}
.rb::after{content:'';position:absolute;inset:0;background:radial-gradient(circle at center,rgba(255,255,255,.1),transparent);opacity:0;transition:.2s;}
.rb:hover::after{opacity:1;}
.rb:hover{border-color:var(--neon);background:rgba(168,85,247,.15);transform:translateY(-1px);}
.rb.sel{border-color:var(--gold);background:rgba(245,158,11,.2);color:var(--gold);box-shadow:0 0 15px rgba(245,158,11,.3);}
.rb.red-bet{border-color:rgba(239,68,68,.3);}
.rb.red-bet.sel{border-color:var(--red);background:rgba(239,68,68,.15);color:var(--red);box-shadow:0 0 15px rgba(239,68,68,.3);}
.rb.green-bet.sel{border-color:var(--green);background:rgba(16,185,129,.15);color:var(--green);box-shadow:0 0 15px rgba(16,185,129,.3);}
.roul-ball-pos{position:absolute;width:12px;height:12px;border-radius:50%;background:radial-gradient(circle at 35% 35%,#fff,#ddd);box-shadow:0 2px 6px rgba(0,0,0,.8),0 0 8px rgba(255,255,255,.3);pointer-events:none;transition:all .05s linear;z-index:20;}
.rb:hover{border-color:var(--neon);background:rgba(168,85,247,.15);}
.rb.sel{border-color:var(--gold);background:rgba(245,158,11,.2);color:var(--gold);}
.rb.red-bet{border-color:rgba(239,68,68,.3);}
.rb.red-bet.sel{border-color:var(--red);background:rgba(239,68,68,.15);color:var(--red);}
.rb.green-bet.sel{border-color:var(--green);background:rgba(16,185,129,.15);color:var(--green);}

/* BLACKJACK */
.bj-table{text-align:center;}
.bj-zone{min-height:90px;margin:10px 0;}
.bj-label{font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;}
.bj-cards{display:flex;justify-content:center;gap:7px;flex-wrap:wrap;}
.card{width:54px;height:76px;background:#fff;border-radius:8px;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;padding:5px;color:#000;font-weight:700;font-size:13px;box-shadow:0 4px 14px rgba(0,0,0,.6);flex-shrink:0;position:relative;}
.card.red-c{color:#cc0000;}
.card.back{background:linear-gradient(135deg,#1e1b4b,#4338ca);color:transparent;display:flex;align-items:center;justify-content:center;font-size:22px;}
.card-rank{line-height:1;}
.card-suit{position:absolute;bottom:4px;right:5px;font-size:16px;}
.bj-score{font-family:'Orbitron',sans-serif;font-size:12px;color:var(--gold);margin-top:5px;}
.bj-result{font-family:'Orbitron',sans-serif;font-size:17px;font-weight:700;min-height:36px;margin:8px 0;}

/* AVIATOR PREMIUM */
.avi-screen{background:linear-gradient(180deg,#010118 0%,#040428 60%,#060830 100%);border:1px solid rgba(168,85,247,.3);border-radius:16px;margin-bottom:14px;position:relative;overflow:hidden;height:240px;}
.avi-grid-bg{position:absolute;inset:0;background-image:linear-gradient(rgba(168,85,247,.06) 1px,transparent 1px),linear-gradient(90deg,rgba(168,85,247,.06) 1px,transparent 1px);background-size:40px 40px;animation:gridMove 4s linear infinite;}
@keyframes gridMove{0%{background-position:0 0;}100%{background-position:40px 40px;}}
.avi-stars{position:absolute;inset:0;pointer-events:none;}
.avi-curve-canvas{position:absolute;inset:0;z-index:2;}
.avi-mult{position:absolute;top:50%;left:50%;transform:translate(-50%,-60%);font-family:'Orbitron',sans-serif;font-size:56px;font-weight:900;color:var(--gold);text-shadow:0 0 40px rgba(245,158,11,.9),0 0 80px rgba(245,158,11,.4);z-index:5;transition:.2s;letter-spacing:-1px;}
.avi-mult.crashed{color:var(--red);text-shadow:0 0 40px rgba(239,68,68,.9),0 0 80px rgba(239,68,68,.4);animation:crashShake .3s ease 3;}
@keyframes crashShake{0%,100%{transform:translate(-50%,-60%) rotate(0);}25%{transform:translate(-48%,-60%) rotate(-3deg);}75%{transform:translate(-52%,-60%) rotate(3deg);}}
.avi-plane{position:absolute;z-index:6;transition:all .12s linear;font-size:0;}
.avi-plane-svg{width:52px;height:52px;filter:drop-shadow(0 0 12px rgba(100,200,255,.8));}
.avi-exhaust{position:absolute;right:-8px;top:50%;transform:translateY(-50%);width:30px;height:8px;background:linear-gradient(to left,transparent,rgba(255,150,50,.8),rgba(255,100,50,.4));border-radius:4px;animation:exhaustFlicker .1s infinite;}
@keyframes exhaustFlicker{0%,100%{opacity:.8;width:30px;}50%{opacity:1;width:40px;}}
.avi-trail-canvas{position:absolute;inset:0;z-index:3;pointer-events:none;}
.avi-history{display:flex;gap:5px;flex-wrap:wrap;justify-content:center;margin-bottom:10px;}
.avi-chip{background:rgba(0,0,0,.5);border:1px solid rgba(255,255,255,.12);border-radius:8px;padding:4px 11px;font-size:11px;font-weight:700;font-family:'Orbitron',sans-serif;}
.avi-chip.high{color:var(--gold);border-color:rgba(245,158,11,.3);}
.avi-chip.low{color:var(--red);border-color:rgba(239,68,68,.3);}
.avi-players{position:absolute;top:12px;left:12px;z-index:8;display:flex;flex-direction:column;gap:4px;}
.avi-player-bet{background:rgba(0,0,0,.5);border:1px solid rgba(255,255,255,.1);border-radius:6px;padding:3px 8px;font-size:10px;color:rgba(255,255,255,.7);font-family:'Rajdhani',sans-serif;}
.avi-countdown{position:absolute;top:12px;right:12px;z-index:8;font-family:'Orbitron',sans-serif;font-size:12px;color:var(--cyan);background:rgba(0,0,0,.5);border:1px solid rgba(6,182,212,.3);border-radius:8px;padding:4px 10px;}
/* explosion particles */
.crash-explosion{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;pointer-events:none;}

/* MINES PREMIUM */
.mines-field{background:linear-gradient(135deg,#050518,#0a0525);border:1px solid rgba(168,85,247,.3);border-radius:16px;padding:16px;margin-bottom:10px;position:relative;overflow:hidden;}
.mines-field::before{content:'';position:absolute;inset:0;background:radial-gradient(circle at 50% 0%,rgba(168,85,247,.08),transparent 70%);pointer-events:none;}
.mines-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin:0 auto;max-width:360px;position:relative;z-index:2;}
.mcell{aspect-ratio:1;border-radius:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:22px;transition:all .15s ease;position:relative;overflow:hidden;
  background:linear-gradient(135deg,rgba(50,20,100,.8),rgba(30,10,80,.9));
  border:1px solid rgba(168,85,247,.35);
  box-shadow:0 4px 12px rgba(0,0,0,.5),inset 0 1px 0 rgba(255,255,255,.07);}
.mcell::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.08),transparent 50%);border-radius:9px;}
.mcell::after{content:'';position:absolute;bottom:0;left:0;right:0;height:30%;background:linear-gradient(0deg,rgba(0,0,0,.3),transparent);}
.mcell:hover:not(.revealed){transform:translateY(-3px) scale(1.02);border-color:rgba(168,85,247,.7);box-shadow:0 8px 20px rgba(0,0,0,.6),0 0 15px rgba(168,85,247,.3),inset 0 1px 0 rgba(255,255,255,.1);background:linear-gradient(135deg,rgba(80,30,160,.8),rgba(50,15,120,.9));}
.mcell.gem{background:linear-gradient(135deg,rgba(6,182,212,.25),rgba(16,185,129,.2));border-color:var(--green);box-shadow:0 0 20px rgba(16,185,129,.4),inset 0 1px 0 rgba(255,255,255,.15);animation:gemReveal .4s ease;}
@keyframes gemReveal{0%{transform:scale(.5) rotateY(90deg);opacity:0;}60%{transform:scale(1.1) rotateY(-10deg);}100%{transform:scale(1) rotateY(0);opacity:1;}}
.mcell.bomb{background:linear-gradient(135deg,rgba(239,68,68,.3),rgba(180,30,30,.4));border-color:var(--red);box-shadow:0 0 20px rgba(239,68,68,.5),inset 0 0 20px rgba(239,68,68,.1);animation:bombReveal .3s ease;}
@keyframes bombReveal{0%{transform:scale(1.3);opacity:0;}100%{transform:scale(1);opacity:1;}}
.mcell.revealed{cursor:default;}
.mines-mult{font-family:'Orbitron',sans-serif;font-size:14px;color:var(--gold);text-align:center;margin:8px 0;padding:8px;background:rgba(245,158,11,.08);border:1px solid rgba(245,158,11,.2);border-radius:8px;}
.mines-info-bar{display:flex;gap:8px;justify-content:center;margin-bottom:10px;flex-wrap:wrap;}
.mines-stat{background:rgba(0,0,0,.4);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:6px 14px;text-align:center;font-size:11px;}
.mines-stat-val{font-family:'Orbitron',sans-serif;font-size:16px;color:var(--cyan);font-weight:700;}
.mines-count-sel{display:flex;gap:6px;justify-content:center;margin-bottom:12px;flex-wrap:wrap;}
.mines-count-btn{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:6px 14px;cursor:pointer;font-family:'Orbitron',sans-serif;font-size:12px;color:var(--muted);transition:.2s;}
.mines-count-btn:hover,.mines-count-btn.active{border-color:var(--red);color:var(--red);background:rgba(239,68,68,.1);}
/* gem sparkle */
.gem-sparkle{position:fixed;pointer-events:none;z-index:9999;font-size:16px;animation:sparkleFloat 1s ease-out forwards;}
@keyframes sparkleFloat{0%{opacity:1;transform:translateY(0) scale(1);}100%{opacity:0;transform:translateY(-60px) scale(.5);}}

/* PLINKO PREMIUM */
.plinko-wrap{text-align:center;}
.plinko-container{background:linear-gradient(180deg,#020215,#050520);border:1px solid rgba(168,85,247,.3);border-radius:16px;padding:12px;display:inline-block;position:relative;overflow:hidden;}
.plinko-container::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(168,85,247,.6),transparent);}
#plinkoCanvas{border-radius:10px;display:block;max-width:100%;}
.plinko-buckets{display:flex;gap:3px;justify-content:center;margin-top:6px;padding:0 4px;}
.pbucket{flex:1;padding:5px 2px;font-size:10px;font-weight:700;border-radius:6px;text-align:center;font-family:'Orbitron',sans-serif;transition:.3s;}
.pbucket.hit{transform:scaleY(1.2);filter:brightness(1.5);}

/* HI-LO */
.hilo-wrap{text-align:center;}
.hilo-card-area{display:flex;align-items:center;justify-content:center;gap:30px;margin:16px 0;}
.hilo-big-card{width:90px;height:126px;background:#fff;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#000;font-weight:900;font-size:28px;box-shadow:0 8px 30px rgba(0,0,0,.6);position:relative;}
.hilo-big-card.red-c{color:#cc0000;}
.hilo-mult{font-family:'Orbitron',sans-serif;font-size:28px;color:var(--gold);font-weight:700;}
.hilo-history{display:flex;gap:5px;justify-content:center;flex-wrap:wrap;margin:8px 0;}
.hilo-chip{width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;}

/* WHEEL OF FORTUNE */
.wof-wrap{text-align:center;}
.wof-wheel{width:220px;height:220px;border-radius:50%;position:relative;margin:0 auto 12px;border:4px solid var(--gold);box-shadow:0 0 30px rgba(245,158,11,.4);transition:transform 4s cubic-bezier(.17,.67,.12,1);}
.wof-pin{position:absolute;top:-14px;left:50%;transform:translateX(-50%);font-size:24px;z-index:10;}
.wof-result{font-family:'Orbitron',sans-serif;font-size:36px;font-weight:700;color:var(--gold);}

/* DICE */
.dice-wrap{text-align:center;}
.dice-face{width:80px;height:80px;background:rgba(255,255,255,.95);border-radius:12px;display:inline-flex;align-items:center;justify-content:center;font-size:48px;box-shadow:0 8px 30px rgba(0,0,0,.5);margin:14px 6px;animation:diceLand .3s ease;}
@keyframes diceLand{0%{transform:rotate(360deg) scale(0.5);opacity:0;}100%{transform:rotate(0) scale(1);opacity:1;}}
.dice-total{font-family:'Orbitron',sans-serif;font-size:32px;font-weight:700;color:var(--gold);}
.dice-targets{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin:10px 0;}
.dtarget{background:rgba(255,255,255,.06);border:2px solid rgba(255,255,255,.15);border-radius:9px;padding:8px 14px;cursor:pointer;transition:.2s;font-weight:700;font-size:14px;text-align:center;}
.dtarget:hover{border-color:var(--neon);}
.dtarget.sel{border-color:var(--gold);background:rgba(245,158,11,.15);color:var(--gold);}

/* KENO */
.keno-grid{display:grid;grid-template-columns:repeat(8,1fr);gap:5px;margin:12px 0;}
.keno-num{aspect-ratio:1;border-radius:8px;background:rgba(255,255,255,.06);border:2px solid rgba(255,255,255,.1);cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:13px;transition:.2s;}
.keno-num:hover:not(.drawn){background:rgba(168,85,247,.2);border-color:var(--neon);}
.keno-num.picked{background:rgba(168,85,247,.3);border-color:var(--neon);color:var(--neon);}
.keno-num.drawn{background:rgba(245,158,11,.3);border-color:var(--gold);color:var(--gold);}
.keno-num.hit{background:rgba(16,185,129,.3);border-color:var(--green);color:var(--green);}
.keno-info{display:flex;gap:12px;justify-content:center;margin:8px 0;flex-wrap:wrap;}
.keno-stat{background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:5px 14px;font-size:12px;text-align:center;}
.keno-stat-val{font-family:'Orbitron',sans-serif;font-size:16px;color:var(--gold);font-weight:700;}

/* BACCARAT */
.bacc-table{text-align:center;}
.bacc-zones{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin:12px 0;}
.bacc-zone{background:rgba(0,0,0,.3);border-radius:12px;padding:14px;}
.bacc-zone-lbl{font-size:11px;color:var(--muted);text-transform:uppercase;margin-bottom:8px;}
.bacc-bets{display:flex;gap:10px;justify-content:center;margin:12px 0;}
.bacc-bet-btn{padding:10px 20px;border-radius:9px;border:2px solid;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;cursor:pointer;transition:.2s;background:transparent;}
.bacc-bet-btn:hover,.bacc-bet-btn.sel{background:rgba(255,255,255,.1);}

/* VIDEO POKER */
.vp-wrap{text-align:center;}
.vp-cards{display:flex;gap:8px;justify-content:center;margin:12px 0;flex-wrap:wrap;}
.vp-card-wrap{text-align:center;}
.vp-card{width:60px;height:84px;background:#fff;border-radius:8px;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;padding:5px;color:#000;font-weight:700;font-size:14px;box-shadow:0 4px 14px rgba(0,0,0,.6);position:relative;cursor:pointer;transition:.2s;border:2px solid transparent;}
.vp-card:hover{transform:translateY(-4px);}
.vp-card.held{border-color:var(--gold);background:#fffde7;transform:translateY(-8px);}
.vp-card.red-c{color:#cc0000;}
.vp-card.back{background:linear-gradient(135deg,#1e1b4b,#4338ca);}
.vp-hold-lbl{font-size:11px;color:var(--gold);font-weight:700;margin-top:4px;height:16px;}
.vp-hand{font-family:'Bebas Neue',sans-serif;font-size:24px;color:var(--gold);letter-spacing:1px;margin:8px 0;}

/* SCRATCH CARD */
.scratch-wrap{text-align:center;}
.scratch-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;max-width:300px;margin:14px auto;}
.scratch-cell{aspect-ratio:1.3;background:linear-gradient(135deg,rgba(168,85,247,.3),rgba(236,72,153,.3));border:2px solid rgba(168,85,247,.4);border-radius:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:28px;transition:.3s;position:relative;}
.scratch-cell.scratched{background:rgba(0,0,0,.4);cursor:default;}
.scratch-cell::before{content:'?';position:absolute;inset:0;background:linear-gradient(135deg,rgba(124,58,237,.6),rgba(236,72,153,.5));border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:24px;color:rgba(255,255,255,.6);font-family:'Orbitron',sans-serif;font-weight:700;transition:.3s;}
.scratch-cell.scratched::before{opacity:0;}

/* TOWER */
.tower-wrap{text-align:center;}
.tower-grid{display:flex;flex-direction:column;gap:6px;max-width:300px;margin:0 auto 12px;}
.tower-row{display:flex;gap:6px;justify-content:center;}
.tower-cell{width:60px;height:40px;border-radius:8px;background:rgba(255,255,255,.06);border:2px solid rgba(255,255,255,.1);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;transition:.2s;}
.tower-cell:hover:not(.done){background:rgba(168,85,247,.2);border-color:var(--neon);}
.tower-cell.safe{background:rgba(16,185,129,.2);border-color:var(--green);}
.tower-cell.bomb{background:rgba(239,68,68,.2);border-color:var(--red);}
.tower-cell.done{cursor:default;opacity:.6;}
.tower-mult{font-family:'Orbitron',sans-serif;font-size:12px;color:var(--muted);text-align:right;padding-right:4px;}
.tower-level-row{display:flex;align-items:center;gap:6px;}

/* COIN FLIP */
.coin-wrap{text-align:center;}
.coin{width:120px;height:120px;border-radius:50%;margin:14px auto;display:flex;align-items:center;justify-content:center;font-size:60px;box-shadow:0 8px 40px rgba(245,158,11,.5);transition:.3s;border:4px solid var(--gold);}
.coin.heads{background:linear-gradient(135deg,var(--gold),#d97706);}
.coin.tails{background:linear-gradient(135deg,var(--purple),var(--pink));}
.coin.flipping{animation:coinFlip .6s linear infinite;}
@keyframes coinFlip{0%{transform:scaleX(1);}50%{transform:scaleX(0);}100%{transform:scaleX(1);}}
.coin-btns{display:flex;gap:14px;justify-content:center;}
.coin-choice{padding:11px 28px;border-radius:10px;border:2px solid;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:15px;cursor:pointer;transition:.2s;background:transparent;}
.coin-choice.gold-c{border-color:var(--gold);color:var(--gold);}
.coin-choice.purple-c{border-color:var(--purple);color:var(--neon);}
.coin-choice.gold-c.active,.coin-choice.gold-c:hover{background:rgba(245,158,11,.2);}
.coin-choice.purple-c.active,.coin-choice.purple-c:hover{background:rgba(168,85,247,.2);}

/* LIMBO */
.limbo-wrap{text-align:center;}
.limbo-target{display:flex;flex-direction:column;align-items:center;margin:16px 0;}
.limbo-num{font-family:'Orbitron',sans-serif;font-size:72px;font-weight:900;text-shadow:0 0 40px currentColor;transition:.5s;}
.limbo-target-row{display:flex;align-items:center;gap:12px;justify-content:center;margin:10px 0;}
.limbo-target-inp{background:rgba(0,0,0,.5);border:1px solid rgba(168,85,247,.4);color:var(--gold);font-family:'Orbitron',sans-serif;font-size:20px;font-weight:700;width:100px;text-align:center;padding:8px;border-radius:8px;outline:none;}

/* CRASH PLINKO */
.cplinko-drop{display:flex;flex-direction:column;align-items:center;gap:8px;margin:14px 0;}
.cplinko-row{display:flex;gap:10px;justify-content:center;}
.cplinko-peg{width:10px;height:10px;border-radius:50%;background:rgba(168,85,247,.5);}
.cplinko-bucket{flex:1;padding:4px;font-size:11px;font-weight:700;border-radius:6px;text-align:center;max-width:50px;}

/* RESPONSIVE */
@media(max-width:1100px){.hero-floats{display:none;}.footer-top{grid-template-columns:1fr 1fr;}.stats-bar{grid-template-columns:repeat(2,1fr);}}
@media(max-width:768px){.nav-links{display:none;}.burger{display:flex;}.header-inner{padding:0 16px;}.slide-content{padding:0 20px;}.section{padding:40px 16px;}.footer-top{grid-template-columns:1fr;}.stats-bar{grid-template-columns:repeat(2,1fr);padding:20px;}.stat-val{font-size:20px;}.slide-arrows{display:none;}.slot-reels{gap:4px;}.reel{width:68px;height:90px;font-size:38px;}.avi-mult{font-size:38px;}}
@media(max-width:480px){.games-grid{grid-template-columns:1fr 1fr;}.live-grid{grid-template-columns:1fr 1fr;}.bonus-grid{grid-template-columns:1fr;}.stats-bar{grid-template-columns:1fr 1fr;}.roul-bets{grid-template-columns:1fr 1fr;}.bacc-zones{grid-template-columns:1fr;}.vp-card{width:50px;height:70px;}}
</style>
</head>
<body>
<div id="particles"></div>

<!-- TICKER -->
<div class="ticker-wrap">
  <div class="ticker-inner" id="tickerInner"></div>
</div>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <div class="logo" onclick="showPage('home')">
      <div class="logo-icon">NX</div>
      <div><div class="logo-text">NEONX</div><span class="logo-sub">Casino</span></div>
    </div>
    <nav class="nav-links">
      <a id="nav-slots" onclick="showPage('slots')"> </a>
      <a id="nav-live" onclick="showPage('live')"> Live</a>
      <a id="nav-crash" onclick="showPage('crash')"> </a>
      <a id="nav-table" onclick="showPage('table')"> </a>
      <a id="nav-bonuses" onclick="showPage('bonuses')"> </a>
    </nav>
    <div class="header-right">
      <div class="balance-chip" onclick="showAddFunds()">
        <span></span>
         <span id="headerBalance">1 000</span> 
      </div>
      <div id="debtChip" style="background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.4);border-radius:20px;padding:6px 14px;font-size:13px;font-weight:700;color:var(--red);display:none;cursor:pointer;" onclick="showAddFunds()"></div>
      <div id="authButtons">
        <button class="btn-hdr btn-login" onclick="openAuthModal('login')"></button>
        <button class="btn-hdr btn-reg" onclick="openAuthModal('reg')"></button>
      </div>
      <div id="profileChip" style="display:none;align-items:center;gap:8px;cursor:pointer;background:rgba(168,85,247,.12);border:1px solid rgba(168,85,247,.3);border-radius:20px;padding:6px 14px;transition:.2s;" onclick="openProfileModal()" onmouseover="this.style.background='rgba(168,85,247,.25)'" onmouseout="this.style.background='rgba(168,85,247,.12)'">
        <div id="profileAvatar" style="width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,var(--purple),var(--pink));display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;color:#fff;flex-shrink:0;"></div>
        <div style="text-align:left;">
          <div id="profileName" style="font-size:13px;font-weight:700;color:#fff;line-height:1.1;"></div>
          <div id="profileLevelBadge" style="font-size:10px;color:var(--gold);font-weight:600;"></div>
        </div>
      </div>
      <div class="burger" onclick="toggleMenu()"><span></span><span></span><span></span></div>
    </div>
  </div>
</header>

<!-- MOBILE MENU -->
<div class="mobile-menu" id="mobileMenu">
  <a onclick="showPage('slots');toggleMenu()"> </a>
  <a onclick="showPage('live');toggleMenu()"> Live Casino</a>
  <a onclick="showPage('crash');toggleMenu()"> -</a>
  <a onclick="showPage('table');toggleMenu()">  </a>
  <a onclick="showPage('bonuses');toggleMenu()"> </a>
  <div id="mobileAuthBtns" style="display:flex;gap:10px;margin-top:16px;">
    <button class="btn-hdr btn-login" style="flex:1;padding:12px;" onclick="openAuthModal('login');toggleMenu()"></button>
    <button class="btn-hdr btn-reg" style="flex:1;padding:12px;" onclick="openAuthModal('reg');toggleMenu()"></button>
  </div>
  <div id="mobileProfileBtn" style="display:none;margin-top:16px;">
    <button class="action-btn btn-purple" style="width:100%;" onclick="openProfileModal();toggleMenu()">  </button>
  </div>
</div>

<!-- ============================
     HOME PAGE
============================= -->
<div class="page active" id="page-home">
<section class="hero">
  <div class="slide s1 active">
    <div class="slide-bg"></div><div class="slide-overlay"></div>
    <div class="slide-content">
      <div class="slide-badge">   </div>
      <h1 class="slide-title"> <br>1 000 000 !</h1>
      <p class="slide-sub">   ! 20+    .    .</p>
      <div class="slide-btns">
        <button class="btn-primary" onclick="showPage('slots')"> </button>
        <button class="btn-secondary" onclick="showPage('crash')"> -</button>
      </div>
    </div>
  </div>
  <div class="slide s2">
    <div class="slide-bg"></div><div class="slide-overlay"></div>
    <div class="slide-content">
      <div class="slide-badge" style="border-color:var(--cyan);color:var(--cyan);"> </div>
      <h1 class="slide-title"> 1 000 000 <br> !</h1>
      <p class="slide-sub">Sweet Bonanza, Gates of Olympus   10+    .</p>
      <div class="slide-btns">
        <button class="btn-primary" onclick="openGame('slots','Sweet Bonanza','gc1')"> Sweet Bonanza</button>
        <button class="btn-secondary" onclick="openGame('slots','Gates of Olympus','gc2')"> Gates of Olympus</button>
      </div>
    </div>
  </div>
  <div class="slide s3">
    <div class="slide-bg"></div><div class="slide-overlay"></div>
    <div class="slide-content">
      <div class="slide-badge" style="border-color:var(--red);color:var(--red);"> </div>
      <h1 class="slide-title">Aviator &<br>Mines!</h1>
      <p class="slide-sub">   !      -.</p>
      <div class="slide-btns">
        <button class="btn-primary" onclick="openGame('aviator','Aviator','gc5')"> Aviator</button>
        <button class="btn-secondary" onclick="openGame('mines','Mines','gc9')"> Mines</button>
      </div>
    </div>
  </div>
  <div class="slide s4">
    <div class="slide-bg"></div><div class="slide-overlay"></div>
    <div class="slide-content">
      <div class="slide-badge" style="border-color:var(--green);color:var(--green);"> Live </div>
      <h1 class="slide-title">Live <br> !</h1>
      <p class="slide-sub"> , , ,      .</p>
      <div class="slide-btns">
        <button class="btn-primary" onclick="openGame('roulette','Lightning Roulette','lc2')"> </button>
        <button class="btn-secondary" onclick="openGame('blackjack','','lc3')"> </button>
      </div>
    </div>
  </div>
  <div class="hero-floats">
    <div class="float-card neon-border"><div class="fc-icon"></div><div class="fc-val">20+</div><div class="fc-lbl"></div></div>
    <div class="float-card neon-border"><div class="fc-icon"></div><div class="fc-val">1 000</div><div class="fc-lbl">.</div></div>
    <div class="float-card neon-border"><div class="fc-icon"></div><div class="fc-val">24/7</div><div class="fc-lbl"></div></div>
    <div class="float-card neon-border"><div class="fc-icon"></div><div class="fc-val">97%+</div><div class="fc-lbl">RTP</div></div>
  </div>
  <div class="slide-dots" id="dots"></div>
  <div class="slide-arrows">
    <button class="arrow-btn" onclick="prevSlide()"></button>
    <button class="arrow-btn" onclick="nextSlide()"></button>
  </div>
</section>

<div class="section" style="padding-top:28px;padding-bottom:0;">
  <div class="section-inner">
    <div class="stats-bar neon-border">
      <div class="stat-item"><div class="stat-val">521 438</div><div class="stat-lbl"> </div></div>
      <div class="stat-item"><div class="stat-val"> 2.4 </div><div class="stat-lbl"></div></div>
      <div class="stat-item"><div class="stat-val">20+</div><div class="stat-lbl"> </div></div>
      <div class="stat-item"><div class="stat-val">4.9 </div><div class="stat-lbl"></div></div>
    </div>
  </div>
</div>

<section class="section">
  <div class="section-inner">
    <div class="section-header">
      <div><h2 class="section-title">  <span class="accent"></span></h2><div class="section-line"></div></div>
      <button class="see-all-btn" onclick="showPage('slots')">  </button>
    </div>
    <div class="game-filters" id="homeFilters">
      <button class="filter-btn active" onclick="filterHomeGames(this,'all')"></button>
      <button class="filter-btn" onclick="filterHomeGames(this,'hot')"> </button>
      <button class="filter-btn" onclick="filterHomeGames(this,'new')"> </button>
      <button class="filter-btn" onclick="filterHomeGames(this,'crash')"> </button>
      <button class="filter-btn" onclick="filterHomeGames(this,'table')"> </button>
    </div>
    <div class="games-grid" id="homeGameGrid">
      <!-- filled by JS -->
    </div>
  </div>
</section>

<section class="section" style="background:linear-gradient(180deg,transparent,rgba(124,58,237,.05),transparent);">
  <div class="section-inner">
    <div class="section-header">
      <div><h2 class="section-title"> Live <span class="accent"></span></h2><div class="section-line"></div></div>
      <button class="see-all-btn" onclick="showPage('live')"> Live </button>
    </div>
    <div class="live-grid">
      <div class="live-card" onclick="openGame('roulette','Lightning Roulette','lc2')"><div class="live-thumb lc1"><div class="fc-icon" style="font-size:52px"></div><div class="tag tag-live" style="top:10px;left:10px;"> LIVE</div><div class="live-players"> 12 847</div></div><div class="live-info"><div class="live-name">Lightning Roulette</div><div class="live-sub">Evolution Gaming</div><div class="live-min">. : 10 </div></div></div>
      <div class="live-card" onclick="openGame('blackjack','','lc3')"><div class="live-thumb lc2"><div style="font-size:52px"></div><div class="tag tag-live" style="top:10px;left:10px;"> LIVE</div><div class="live-players"> 5 621</div></div><div class="live-info"><div class="live-name">Infinite Blackjack</div><div class="live-sub">Evolution Gaming</div><div class="live-min">. : 10 </div></div></div>
      <div class="live-card" onclick="openGame('baccarat','','lc4')"><div class="live-thumb lc3"><div style="font-size:52px"></div><div class="tag tag-live" style="top:10px;left:10px;"> LIVE</div><div class="live-players"> 3 890</div></div><div class="live-info"><div class="live-name">Speed Baccarat</div><div class="live-sub">Evolution Gaming</div><div class="live-min">. : 10 </div></div></div>
      <div class="live-card" onclick="openGame('wof',' ','lc5')"><div class="live-thumb lc4"><div style="font-size:52px"></div><div class="tag tag-live" style="top:10px;left:10px;"> LIVE</div><div class="live-players"> 7 145</div></div><div class="live-info"><div class="live-name">Crazy Time</div><div class="live-sub">Evolution Gaming</div><div class="live-min">. : 10 </div></div></div>
      <div class="live-card" onclick="openGame('roulette',' ','lc1')"><div class="live-thumb lc5"><div style="font-size:52px"></div><div class="tag tag-live" style="top:10px;left:10px;"> LIVE</div><div class="live-players"> 4 302</div></div><div class="live-info"><div class="live-name">European Roulette</div><div class="live-sub">Pragmatic Play</div><div class="live-min">. : 10 </div></div></div>
      <div class="live-card" onclick="openGame('videopoker',' ','lc6')"><div class="live-thumb lc6"><div style="font-size:52px"></div><div class="tag tag-live" style="top:10px;left:10px;"> LIVE</div><div class="live-players"> 2 100</div></div><div class="live-info"><div class="live-name">Casino Hold'em</div><div class="live-sub">Evolution Gaming</div><div class="live-min">. : 10 </div></div></div>
    </div>
  </div>
</section>

<section class="section" style="background:linear-gradient(180deg,transparent,rgba(124,58,237,.04),transparent);">
  <div class="section-inner">
    <div class="section-header">
      <div><h2 class="section-title"> <span class="accent"></span></h2><div class="section-line"></div></div>
    </div>
    <div class="providers-scroll">
      <div class="providers-inner">
        <div class="provider-chip" onclick="showPage('slots')"><div class="p-icon" style="background:linear-gradient(135deg,#7c3aed,#ec4899)">P</div><div><div class="p-name">Pragmatic Play</div><div class="p-games">280+ </div></div></div>
        <div class="provider-chip" onclick="showPage('live')"><div class="p-icon" style="background:linear-gradient(135deg,#059669,#06b6d4)">E</div><div><div class="p-name">Evolution Gaming</div><div class="p-games">120+ live</div></div></div>
        <div class="provider-chip" onclick="showPage('slots')"><div class="p-icon" style="background:linear-gradient(135deg,#dc2626,#ea580c)">N</div><div><div class="p-name">NetEnt</div><div class="p-games">200+ </div></div></div>
        <div class="provider-chip" onclick="showPage('slots')"><div class="p-icon" style="background:linear-gradient(135deg,#2563eb,#4338ca)">P</div><div><div class="p-name">Play'n GO</div><div class="p-games">250+ </div></div></div>
        <div class="provider-chip" onclick="showPage('crash')"><div class="p-icon" style="background:linear-gradient(135deg,#1e1b4b,#6366f1)">S</div><div><div class="p-name">Spribe</div><div class="p-games">20+ </div></div></div>
        <div class="provider-chip" onclick="showPage('slots')"><div class="p-icon" style="background:linear-gradient(135deg,#6d28d9,#a855f7)">N</div><div><div class="p-name">Nolimit City</div><div class="p-games">60+ </div></div></div>
        <div class="provider-chip" onclick="showPage('slots')"><div class="p-icon" style="background:linear-gradient(135deg,#0f766e,#10b981)">H</div><div><div class="p-name">Hacksaw Gaming</div><div class="p-games">80+ </div></div></div>
        <div class="provider-chip" onclick="showPage('table')"><div class="p-icon" style="background:linear-gradient(135deg,#1d4ed8,#3b82f6)">M</div><div><div class="p-name">Microgaming</div><div class="p-games">500+ </div></div></div>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="section-inner">
    <div class="section-header">
      <div><h2 class="section-title">   <span class="accent"></span></h2><div class="section-line"></div></div>
      <button class="see-all-btn" onclick="showPage('bonuses')">  </button>
    </div>
    <div class="bonus-grid">
      <div class="bonus-card bc1 neon-border"><div class="bonus-badge bb-hot"> </div><div class="bonus-icon"></div><div class="bonus-title">  </div><div class="bonus-desc">200%    + 150   Gates of Olympus.</div><div class="bonus-value" style="color:var(--neon)">200% + 150 FS</div><button class="bonus-btn" onclick="bonusAction('welcome')"> </button></div>
      <div class="bonus-card bc2 neon-border"><div class="bonus-badge bb-new">  </div><div class="bonus-icon"></div><div class="bonus-title"></div><div class="bonus-desc">      .</div><div class="bonus-value" style="color:var(--cyan)"> 200 FS</div><button class="bonus-btn" onclick="bonusAction('freespin')"> </button></div>
      <div class="bonus-card bc3 neon-border"><div class="bonus-badge bb-vip"> VIP</div><div class="bonus-icon"></div><div class="bonus-title">VIP-</div><div class="bonus-desc"> ,   20%,  .</div><div class="bonus-value" style="color:var(--gold)"> 20%</div><button class="bonus-btn" onclick="bonusAction('vip')"> </button></div>
      <div class="bonus-card bc4 neon-border"><div class="bonus-icon"></div><div class="bonus-title"></div><div class="bonus-desc">     .</div><div class="bonus-value" style="color:var(--green)">$500 000 </div><button class="bonus-btn" onclick="bonusAction('tournament')"> </button></div>
    </div>
  </div>
</section>

<footer>
  <div class="footer-inner">
    <div class="footer-top">
      <div><div class="logo-text" style="font-family:'Orbitron',sans-serif;font-size:22px;font-weight:900;background:linear-gradient(90deg,#a855f7,#ec4899,#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">NEONX Casino</div>
      <p class="footer-desc"> -. 20+    .</p>
      <div class="footer-disclaimer">  Curaao eGaming.  . 18+</div></div>
      <div class="footer-col"><h4></h4><a onclick="showPage('slots')"> </a><a onclick="showPage('live')">Live Casino</a><a onclick="showPage('crash')">-</a><a onclick="showPage('table')"> </a><a onclick="showPage('bonuses')"></a></div>
      <div class="footer-col"><h4></h4><a onclick="showInfoModal('about')"> </a><a onclick="showInfoModal('license')"> (Curaao)</a><a onclick="showInfoModal('rules')"></a><a onclick="showInfoModal('privacy')"></a><a onclick="showInfoModal('contacts')"></a></div>
      <div class="footer-col"><h4></h4><a onclick="showInfoModal('responsible')"> </a><a onclick="showInfoModal('faq')">FAQ</a><a onclick="openSupportChat()">Live-</a><a onclick="showInfoModal('partners')"></a></div>
    </div>
    <div class="footer-bottom">
      <div>
        <div class="payment-icons"><span class="pay-chip">VISA</span><span class="pay-chip">Mastercard</span><span class="pay-chip"></span><span class="pay-chip">Bitcoin</span><span class="pay-chip">USDT</span><span class="pay-chip">Ethereum</span><span class="pay-chip">QIWI</span><span class="pay-chip">SBP</span></div>
        <p class="footer-copy"><span class="age-badge">18+</span> 2026 NeonX Casino.   .</p>
      </div>
    </div>
  </div>
</footer>
</div><!-- /home -->

<!-- ============================
     SLOTS PAGE
============================= -->
<div class="page" id="page-slots">
  <div class="game-page-header">
    <h1 class="game-page-title"> <span class="accent"></span></h1>
    <p class="game-page-sub">     </p>
    <div class="game-filters" style="justify-content:center;">
      <button class="filter-btn active"></button>
      <button class="filter-btn"> </button>
      <button class="filter-btn"> </button>
      <button class="filter-btn"> </button>
    </div>
  </div>
  <div class="game-select-grid" id="slotsGrid"></div>
</div>

<!-- ============================
     LIVE PAGE
============================= -->
<div class="page" id="page-live">
  <div class="game-page-header">
    <h1 class="game-page-title"> <span style="background:linear-gradient(90deg,var(--green),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent;">Live </span></h1>
    <p class="game-page-sub">      </p>
  </div>
  <div class="game-select-grid" id="liveGrid"></div>
</div>

<!-- ============================
     CRASH PAGE
============================= -->
<div class="page" id="page-crash">
  <div class="game-page-header">
    <h1 class="game-page-title"> <span style="background:linear-gradient(90deg,var(--gold),var(--red));-webkit-background-clip:text;-webkit-text-fill-color:transparent;">-</span></h1>
    <p class="game-page-sub">    !</p>
  </div>
  <div class="game-select-grid" id="crashGrid"></div>
</div>

<!-- ============================
     TABLE GAMES PAGE
============================= -->
<div class="page" id="page-table">
  <div class="game-page-header">
    <h1 class="game-page-title"> <span style="background:linear-gradient(90deg,var(--purple),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent;"> </span></h1>
    <p class="game-page-sub"> -</p>
  </div>
  <div class="game-select-grid" id="tableGrid"></div>
</div>

<!-- ============================
     BONUSES PAGE
============================= -->
<div class="page" id="page-bonuses">
  <div class="game-page-header">
    <h1 class="game-page-title"> <span style="background:linear-gradient(90deg,var(--gold),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent;">  </span></h1>
    <p class="game-page-sub"> ,  ,  </p>
  </div>

  <section class="section" style="padding-top:0;">
    <div class="section-inner">

      <!-- PROMO CODE BLOCK -->
      <div style="background:linear-gradient(135deg,rgba(124,58,237,.18),rgba(236,72,153,.12));border:1px solid rgba(168,85,247,.4);border-radius:20px;padding:24px 28px;margin-bottom:32px;position:relative;overflow:hidden;">
        <div style="position:absolute;right:-30px;top:-30px;font-size:120px;opacity:.07;pointer-events:none;"></div>
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:6px;">
          <span style="font-size:24px;"></span>
          <span style="font-family:'Bebas Neue',sans-serif;font-size:24px;letter-spacing:1px;"></span>
          <span style="background:rgba(245,158,11,.2);border:1px solid var(--gold);color:var(--gold);font-size:10px;font-weight:700;padding:2px 8px;border-radius:10px;text-transform:uppercase;letter-spacing:1px;">NEW</span>
        </div>
        <p style="color:var(--muted);font-size:13px;margin-bottom:16px;">          </p>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
          <input id="promoInput" type="text" placeholder=" ..." style="flex:1;min-width:200px;background:rgba(0,0,0,.4);border:1px solid rgba(168,85,247,.4);border-radius:10px;padding:12px 16px;color:#fff;font-family:'Orbitron',sans-serif;font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;outline:none;" onfocus="this.style.borderColor='var(--neon)'" onblur="this.style.borderColor='rgba(168,85,247,.4)'" onkeydown="if(event.key==='Enter')activatePromo()">
          <button onclick="activatePromo()" style="background:linear-gradient(135deg,var(--gold),#d97706);border:none;color:#000;padding:12px 24px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:15px;cursor:pointer;white-space:nowrap;transition:.2s;" onmouseover="this.style.opacity='.85'" onmouseout="this.style.opacity='1'"> </button>
        </div>
        <div id="promoResult" style="margin-top:10px;font-size:13px;min-height:20px;"></div>
        <div style="margin-top:14px;padding-top:14px;border-top:1px solid rgba(255,255,255,.07);">
          <div style="font-size:11px;color:rgba(148,163,184,.5);margin-bottom:6px;text-transform:uppercase;letter-spacing:1px;">  :</div>
          <div style="display:flex;gap:6px;flex-wrap:wrap;" id="promoHints"></div>
        </div>
      </div>

      <!-- REFERRAL BLOCK -->
      <div style="background:linear-gradient(135deg,rgba(6,182,212,.1),rgba(16,185,129,.08));border:1px solid rgba(6,182,212,.3);border-radius:20px;padding:24px 28px;margin-bottom:32px;position:relative;overflow:hidden;">
        <div style="position:absolute;right:-20px;top:-20px;font-size:100px;opacity:.07;pointer-events:none;"></div>
        <div style="display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:16px;">
          <div>
            <div style="display:flex;align-items:center;gap:10px;margin-bottom:6px;">
              <span style="font-size:24px;"></span>
              <span style="font-family:'Bebas Neue',sans-serif;font-size:24px;letter-spacing:1px;"> </span>
            </div>
            <p style="color:var(--muted);font-size:13px;max-width:440px;line-height:1.5;">     <strong style="color:var(--cyan);">500 </strong>   ,     .  <strong style="color:var(--green);">10%</strong>    .</p>
          </div>
          <div style="text-align:center;flex-shrink:0;">
            <div style="font-family:'Orbitron',sans-serif;font-size:28px;font-weight:900;color:var(--cyan);" id="refCount">0</div>
            <div style="font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;"></div>
          </div>
        </div>
        <div style="margin-top:16px;">
          <div style="font-size:12px;color:var(--muted);margin-bottom:6px;">  :</div>
          <div style="display:flex;gap:8px;align-items:center;">
            <div id="refLinkBox" style="flex:1;background:rgba(0,0,0,.4);border:1px solid rgba(6,182,212,.3);border-radius:8px;padding:10px 14px;font-family:'Orbitron',sans-serif;font-size:12px;color:var(--cyan);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">neonx.casino/ref/...</div>
            <button onclick="copyRefLink()" id="copyRefBtn" style="background:rgba(6,182,212,.15);border:1px solid rgba(6,182,212,.4);color:var(--cyan);padding:10px 16px;border-radius:8px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:13px;cursor:pointer;white-space:nowrap;transition:.2s;"> </button>
          </div>
        </div>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:16px;">
          <div style="background:rgba(255,255,255,.04);border-radius:10px;padding:12px;text-align:center;">
            <div style="font-size:18px;font-weight:700;color:var(--cyan);" id="refEarned">0 </div>
            <div style="font-size:11px;color:var(--muted);"></div>
          </div>
          <div style="background:rgba(255,255,255,.04);border-radius:10px;padding:12px;text-align:center;">
            <div style="font-size:18px;font-weight:700;color:var(--gold);">500 </div>
            <div style="font-size:11px;color:var(--muted);"> </div>
          </div>
          <div style="background:rgba(255,255,255,.04);border-radius:10px;padding:12px;text-align:center;">
            <div style="font-size:18px;font-weight:700;color:var(--green);">10%</div>
            <div style="font-size:11px;color:var(--muted);"> </div>
          </div>
        </div>
        <button onclick="simulateReferal()" style="margin-top:14px;background:linear-gradient(135deg,var(--cyan),#0891b2);border:none;color:#000;padding:11px 24px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;cursor:pointer;transition:.2s;" onmouseover="this.style.opacity='.85'" onmouseout="this.style.opacity='1'">   </button>
      </div>

      <!-- ACTIVE BONUSES -->
      <div style="margin-bottom:20px;">
        <h2 style="font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:2px;margin-bottom:4px;">  <span style="background:linear-gradient(90deg,var(--neon),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent;"></span></h2>
        <div id="activeBonusBar" style="min-height:20px;"></div>
      </div>

      <!-- BONUS CARDS -->
      <div class="bonus-grid" id="bonusCardsGrid">
        <!-- filled by JS -->
      </div>

    </div>
  </section>
</div>

<!-- SUPPORT -->
<button class="support-btn" onclick="openSupportChat()" title=" 24/7"><span class="support-badge">1</span></button>

<!-- WIN NOTIF -->
<div class="win-notif" id="winNotif" style="display:none;">
  <div class="win-card">
    <div class="win-icon" id="winIcon"></div>
    <div class="win-text" id="winText"></div>
  </div>
</div>

<!-- GAME MODAL -->
<div class="game-modal" id="gameModal" onclick="handleModalBg(event)">
  <div class="game-modal-inner">
    <div class="gm-head">
      <div class="gm-title" id="modalTitle"></div>
      <div class="gm-balance"> <span id="modalBalance">1 000</span> </div>
      <button class="gm-close" onclick="closeGame()"></button>
    </div>
    <div class="gm-body" id="modalBody"></div>
  </div>
</div>

<!-- INFO MODAL -->
<div class="game-modal" id="infoModal" onclick="handleInfoBg(event)">
  <div class="game-modal-inner" style="max-width:500px;">
    <div class="gm-head">
      <div class="gm-title" id="infoTitle"></div>
      <button class="gm-close" onclick="closeInfo()"></button>
    </div>
    <div class="gm-body" id="infoBody" style="padding:24px;"></div>
  </div>
</div>

<!-- AUTH MODAL -->
<div id="authModal" style="display:none;position:fixed;inset:0;z-index:3000;align-items:center;justify-content:center;background:rgba(0,0,0,.85);backdrop-filter:blur(16px);" onclick="if(event.target===this)closeAuthModal()">
  <div style="background:linear-gradient(135deg,#0d0020,#080820);border:1px solid rgba(168,85,247,.45);border-radius:24px;width:min(440px,95vw);overflow:hidden;box-shadow:0 0 80px rgba(168,85,247,.3);position:relative;">
    <!-- Tabs -->
    <div style="display:flex;border-bottom:1px solid rgba(255,255,255,.07);">
      <button id="tabLogin" onclick="switchAuthTab('login')" style="flex:1;padding:18px;background:rgba(168,85,247,.15);border:none;color:#fff;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:16px;cursor:pointer;border-bottom:2px solid var(--purple);transition:.2s;"> </button>
      <button id="tabReg" onclick="switchAuthTab('reg')" style="flex:1;padding:18px;background:transparent;border:none;color:var(--muted);font-family:'Rajdhani',sans-serif;font-weight:700;font-size:16px;cursor:pointer;border-bottom:2px solid transparent;transition:.2s;"> </button>
    </div>
    <div style="padding:28px;">
      <!-- LOGIN FORM -->
      <div id="formLogin">
        <div style="text-align:center;margin-bottom:20px;">
          <div style="font-size:48px;margin-bottom:8px;"></div>
          <div style="font-family:'Orbitron',sans-serif;font-size:20px;font-weight:700;background:linear-gradient(90deg,#a855f7,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">NeonX Casino</div>
          <div style="color:var(--muted);font-size:13px;margin-top:4px;">   !</div>
        </div>
        <div style="display:flex;flex-direction:column;gap:12px;">
          <input id="loginEmail" type="email" style="background:rgba(255,255,255,.06);border:1px solid rgba(168,85,247,.3);border-radius:10px;padding:13px 16px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;transition:.2s;" placeholder=" Email" onfocus="this.style.borderColor='var(--neon)'" onblur="this.style.borderColor='rgba(168,85,247,.3)'">
          <input id="loginPass" type="password" style="background:rgba(255,255,255,.06);border:1px solid rgba(168,85,247,.3);border-radius:10px;padding:13px 16px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;transition:.2s;" placeholder=" " onfocus="this.style.borderColor='var(--neon)'" onblur="this.style.borderColor='rgba(168,85,247,.3)'" onkeydown="if(event.key==='Enter')doLogin()">
          <div id="loginErr" style="color:var(--red);font-size:13px;display:none;text-align:center;"></div>
          <button onclick="doLogin()" style="background:linear-gradient(135deg,var(--purple),var(--pink));border:none;color:#fff;padding:14px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:16px;cursor:pointer;letter-spacing:.5px;transition:.2s;margin-top:4px;" onmouseover="this.style.opacity='.85'" onmouseout="this.style.opacity='1'"></button>
          <div style="text-align:center;color:var(--muted);font-size:13px;"> ? <span onclick="switchAuthTab('reg')" style="color:var(--neon);cursor:pointer;font-weight:700;"></span></div>
        </div>
      </div>
      <!-- REGISTER FORM -->
      <div id="formReg" style="display:none;">
        <div style="text-align:center;margin-bottom:20px;">
          <div style="font-size:48px;margin-bottom:8px;"></div>
          <div style="font-family:'Orbitron',sans-serif;font-size:18px;font-weight:700;color:#fff;"> </div>
          <div style="color:var(--gold);font-size:13px;margin-top:4px;">+200%     150 </div>
        </div>
        <div style="display:flex;flex-direction:column;gap:12px;">
          <input id="regName" type="text" style="background:rgba(255,255,255,.06);border:1px solid rgba(168,85,247,.3);border-radius:10px;padding:13px 16px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;transition:.2s;" placeholder="  " onfocus="this.style.borderColor='var(--neon)'" onblur="this.style.borderColor='rgba(168,85,247,.3)'">
          <input id="regEmail" type="email" style="background:rgba(255,255,255,.06);border:1px solid rgba(168,85,247,.3);border-radius:10px;padding:13px 16px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;transition:.2s;" placeholder=" Email" onfocus="this.style.borderColor='var(--neon)'" onblur="this.style.borderColor='rgba(168,85,247,.3)'">
          <input id="regPass" type="password" style="background:rgba(255,255,255,.06);border:1px solid rgba(168,85,247,.3);border-radius:10px;padding:13px 16px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;transition:.2s;" placeholder=" " onfocus="this.style.borderColor='var(--neon)'" onblur="this.style.borderColor='rgba(168,85,247,.3)'" onkeydown="if(event.key==='Enter')doRegister()">
          <div style="display:flex;align-items:flex-start;gap:8px;">
            <input id="regAgree" type="checkbox" style="margin-top:3px;accent-color:var(--purple);cursor:pointer;">
            <label for="regAgree" style="font-size:12px;color:var(--muted);cursor:pointer;"> 18+ .   <span style="color:var(--neon);"> </span>     </label>
          </div>
          <div id="regErr" style="color:var(--red);font-size:13px;display:none;text-align:center;"></div>
          <button onclick="doRegister()" style="background:linear-gradient(135deg,var(--gold),#d97706);border:none;color:#000;padding:14px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:16px;cursor:pointer;letter-spacing:.5px;transition:.2s;margin-top:4px;" onmouseover="this.style.opacity='.85'" onmouseout="this.style.opacity='1'"></button>
          <div style="text-align:center;color:var(--muted);font-size:13px;">  ? <span onclick="switchAuthTab('login')" style="color:var(--neon);cursor:pointer;font-weight:700;"></span></div>
        </div>
      </div>
    </div>
    <button onclick="closeAuthModal()" style="position:absolute;top:14px;right:14px;background:rgba(255,255,255,.1);border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;"></button>
  </div>
</div>

<!-- PROFILE MODAL -->
<div id="profileModal" style="display:none;position:fixed;inset:0;z-index:3000;align-items:center;justify-content:center;background:rgba(0,0,0,.85);backdrop-filter:blur(16px);" onclick="if(event.target===this)closeProfileModal()">
  <div style="background:linear-gradient(135deg,#0d0020,#080820);border:1px solid rgba(168,85,247,.45);border-radius:24px;width:min(500px,96vw);max-height:90vh;overflow-y:auto;box-shadow:0 0 80px rgba(168,85,247,.3);position:relative;">
    <button onclick="closeProfileModal()" style="position:absolute;top:14px;right:14px;background:rgba(255,255,255,.1);border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:16px;z-index:10;"></button>
    <div id="profileModalContent" style="padding:28px;"></div>
  </div>
</div>

<!-- SUPPORT CHAT BOT -->
<div id="supportChatModal" style="display:none;position:fixed;bottom:90px;right:24px;z-index:2000;width:340px;max-width:calc(100vw - 32px);">
  <div style="background:linear-gradient(135deg,#0d0020,#080820);border:1px solid rgba(168,85,247,.45);border-radius:20px;overflow:hidden;box-shadow:0 0 60px rgba(168,85,247,.3);display:flex;flex-direction:column;max-height:500px;">
    <!-- Chat header -->
    <div style="background:linear-gradient(90deg,rgba(124,58,237,.4),rgba(236,72,153,.3));padding:14px 18px;display:flex;align-items:center;gap:10px;">
      <div style="width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,var(--purple),var(--pink));display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0;"></div>
      <div style="flex:1;">
        <div style="font-weight:700;font-size:15px;">NeonX </div>
        <div style="font-size:11px;color:var(--green);display:flex;align-items:center;gap:5px;"><span style="width:7px;height:7px;background:var(--green);border-radius:50%;display:inline-block;animation:blink 1.5s infinite;"></span>   </div>
      </div>
      <button onclick="closeSupportChat()" style="background:rgba(255,255,255,.1);border:none;color:#fff;width:30px;height:30px;border-radius:50%;cursor:pointer;font-size:14px;"></button>
    </div>
    <!-- Chat messages -->
    <div id="chatMessages" style="flex:1;overflow-y:auto;padding:14px;display:flex;flex-direction:column;gap:10px;min-height:200px;max-height:300px;scrollbar-width:thin;scrollbar-color:rgba(168,85,247,.4) transparent;">
      <!-- Messages injected by JS -->
    </div>
    <!-- Quick replies -->
    <div id="quickReplies" style="padding:8px 14px;display:flex;gap:6px;flex-wrap:wrap;border-top:1px solid rgba(255,255,255,.06);"></div>
    <!-- Input -->
    <div style="padding:12px 14px;display:flex;gap:8px;border-top:1px solid rgba(255,255,255,.06);">
      <input id="chatInput" style="flex:1;background:rgba(255,255,255,.07);border:1px solid rgba(168,85,247,.3);border-radius:8px;padding:9px 12px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:14px;outline:none;" placeholder=" ..." onkeydown="if(event.key==='Enter')sendChatMsg()">
      <button onclick="sendChatMsg()" style="background:linear-gradient(135deg,var(--purple),var(--pink));border:none;color:#fff;width:38px;height:38px;border-radius:8px;cursor:pointer;font-size:16px;"></button>
    </div>
  </div>
</div>

<script>
// ===================== BALANCE =====================
let balance = 1000;
let debt = 0;
const MAX_DEBT = 50000;
function fmt(v){return v.toLocaleString('ru',{minimumFractionDigits:0,maximumFractionDigits:0});}
function updBal(){
  document.getElementById('headerBalance').textContent = fmt(balance);
  const mb = document.getElementById('modalBalance');
  if(mb) mb.textContent = fmt(balance);
  updDebtDisplay();
}
function updDebtDisplay(){
  const dc = document.getElementById('debtChip');
  if(dc){
    if(debt > 0){
      dc.textContent = ` : ${fmt(debt)} `;
      dc.style.display = 'block';
    } else {
      dc.style.display = 'none';
    }
  }
}
function checkBankrupt(){
  if(balance <= 0 && debt < MAX_DEBT){
    // Show debt offer after short delay
    setTimeout(showDebtOffer, 400);
  }
}
function showDebtOffer(){
  if(balance > 0) return;
  const avail = MAX_DEBT - debt;
  if(avail <= 0){
    document.getElementById('infoTitle').textContent='   ';
    document.getElementById('infoBody').innerHTML=`
      <div style="text-align:center;padding:20px 0;">
        <div style="font-size:48px;margin-bottom:16px;"></div>
        <p style="color:var(--red);font-size:18px;font-weight:700;margin-bottom:12px;"> 0 .  !</p>
        <p style="color:var(--muted);margin-bottom:16px;"> : <strong style="color:var(--red)">${fmt(debt)} </strong></p>
        <p style="color:var(--muted);font-size:13px;"> ,     .</p>
        <button class="action-btn btn-gold" style="margin-top:16px;width:100%;" onclick="closeInfo();showAddFunds()">  </button>
      </div>`;
    document.getElementById('infoModal').classList.add('open');
    return;
  }
  const amounts = [1000,5000,10000,25000].filter(a=>a<=avail);
  document.getElementById('infoTitle').textContent='  ';
  document.getElementById('infoBody').innerHTML=`
    <div style="text-align:center;padding:10px 0;">
      <div style="font-size:36px;margin-bottom:12px;"></div>
      <p style="color:#fff;font-size:17px;font-weight:700;margin-bottom:8px;"> !</p>
      <p style="color:var(--muted);margin-bottom:6px;font-size:14px;">       !</p>
      ${debt>0?`<p style="color:var(--red);font-size:13px;margin-bottom:14px;"> : <strong>${fmt(debt)} </strong></p>`:''}
      <p style="color:var(--muted);font-size:12px;margin-bottom:16px;"> : <strong style="color:var(--gold)">${fmt(avail)} </strong>  : 5%  </p>
      <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:16px;">
        ${amounts.map(a=>`<button class="action-btn btn-gold" onclick="takeCredit(${a})">+${fmt(a)} </button>`).join('')}
      </div>
      <button class="action-btn" style="background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);color:var(--muted);padding:9px 20px;border-radius:8px;cursor:pointer;" onclick="closeInfo()">, </button>
    </div>`;
  document.getElementById('infoModal').classList.add('open');
}
function takeCredit(amount){
  debt += amount;
  chgBal(amount);
  closeInfo();
  // Show debt in header
  updDebtDisplay();
  // Notification
  const notif = document.createElement('div');
  notif.style.cssText='position:fixed;top:80px;right:20px;z-index:9999;background:rgba(239,68,68,.15);border:1px solid var(--red);border-radius:12px;padding:14px 18px;color:#fff;font-size:14px;font-weight:700;backdrop-filter:blur(10px);animation:slideIn .4s ease;max-width:280px;';
  notif.innerHTML=`  <strong style="color:var(--gold)">${fmt(amount)} </strong> <br><span style="color:var(--red);font-size:12px;">: ${fmt(debt)}   5%/</span>`;
  document.body.appendChild(notif);
  setTimeout(()=>notif.remove(), 4000);
}
function spendBet(bet){
  if(bet > balance) return false;
  chgBal(-bet); return true;
}

// ===================== GAME REGISTRY =====================
const GAMES = [
  // SLOTS
  {id:'sweetbonanza', name:'Sweet Bonanza', icon:'', type:'slots', color:'gc1', rtp:'96.5%', desc:'   -', tag:'hot'},
  {id:'gatesofol', name:'Gates of Olympus', icon:'', type:'slots', color:'gc2', rtp:'96.5%', desc:'     x500', tag:'hot'},
  {id:'bigbass', name:'Big Bass Bonanza', icon:'', type:'slots', color:'gc3', rtp:'96.7%', desc:'   '},
  {id:'bookdead', name:'Book of Dead', icon:'', type:'slots', color:'gc4', rtp:'96.2%', desc:'  Play\'n GO'},
  {id:'sugarrush', name:'Sugar Rush', icon:'', type:'slots', color:'gc7', rtp:'96.5%', desc:'  '},
  {id:'starburst', name:'Starburst XXXtreme', icon:'', type:'slots', color:'gc8', rtp:'96.3%', desc:'   ', tag:'hot'},
  {id:'dragonking', name:'Dragon Kingdom', icon:'', type:'slots', color:'gc10', rtp:'96.5%', desc:'  '},
  {id:'wolfgold', name:'Wolf Gold', icon:'', type:'slots', color:'gc3', rtp:'96.0%', desc:'  '},
  {id:'spartacus', name:'Spartacus', icon:'', type:'slots', color:'gc6', rtp:'96.0%', desc:'   ', tag:'new'},
  {id:'deadortall', name:'Dead or Alive 2', icon:'', type:'slots', color:'gc9', rtp:'96.8%', desc:'    ', tag:'new'},
  // CRASH
  {id:'aviator', name:'Aviator', icon:'', type:'crash', color:'gc5', rtp:'97.0%', desc:'     !', tag:'hot'},
  {id:'jetx', name:'JetX', icon:'', type:'crash', color:'gc6', rtp:'97.0%', desc:'   ', tag:'new'},
  {id:'mines', name:'Mines', icon:'', type:'crash', color:'gc9', rtp:'97.0%', desc:'5   25   !', tag:'hot'},
  {id:'plinko', name:'Plinko', icon:'', type:'crash', color:'gc4', rtp:'99.0%', desc:'    ?', tag:'new'},
  {id:'limbo', name:'Limbo', icon:'', type:'crash', color:'gc7', rtp:'99.0%', desc:'   !'},
  {id:'tower', name:'Tower', icon:'', type:'crash', color:'gc11', rtp:'97.0%', desc:'  ,  '},
  {id:'coinflip', name:'Coin Flip', icon:'', type:'crash', color:'gc10', rtp:'99.0%', desc:'    50/50'},
  // LIVE / TABLE
  {id:'roulette', name:'Lightning Roulette', icon:'', type:'live', color:'lc1', rtp:'97.3%', desc:'    x500', tag:'hot'},
  {id:'blackjack', name:'', icon:'', type:'live', color:'lc2', rtp:'99.5%', desc:' 21   !', tag:'hot'},
  {id:'baccarat', name:'', icon:'', type:'live', color:'lc3', rtp:'98.9%', desc:' vs    ?'},
  {id:'wof', name:' ', icon:'', type:'live', color:'lc4', rtp:'96.5%', desc:'    '},
  {id:'videopoker', name:' ', icon:'', type:'table', color:'lc5', rtp:'99.5%', desc:'Jacks or Better   !', tag:'new'},
  {id:'keno', name:'', icon:'', type:'table', color:'lc6', rtp:'95.0%', desc:'   !'},
  {id:'hilo', name:'Hi-Lo', icon:'', type:'table', color:'gc12', rtp:'98.0%', desc:'    ?'},
  {id:'scratch', name:'-', icon:'', type:'table', color:'gc13', rtp:'95.0%', desc:'    !', tag:'new'},
  {id:'dice', name:'', icon:'', type:'table', color:'gc14', rtp:'98.6%', desc:'   '},
];

const GAME_TYPE_FN = {
  slots: buildSlots, crash: buildAviator, mines: buildMines, plinko: buildPlinko,
  limbo: buildLimbo, tower: buildTower, coinflip: buildCoinFlip,
  roulette: buildRoulette, blackjack: buildBlackjack, baccarat: buildBaccarat,
  wof: buildWOF, videopoker: buildVideoPoker, keno: buildKeno,
  hilo: buildHiLo, scratch: buildScratch, dice: buildDice, live: buildRoulette,
  table: buildRoulette,
};

// ===================== PARTICLES =====================
(function(){
  const c=document.getElementById('particles');
  const cols=['rgba(168,85,247,0.4)','rgba(236,72,153,0.3)','rgba(245,158,11,0.3)','rgba(6,182,212,0.2)'];
  for(let i=0;i<25;i++){
    const p=document.createElement('div'); p.className='particle';
    const s=Math.random()*4+2;
    p.style.cssText=`width:${s}px;height:${s}px;background:${cols[Math.floor(Math.random()*cols.length)]};left:${Math.random()*100}%;animation-duration:${Math.random()*15+10}s;animation-delay:${Math.random()*10}s;`;
    c.appendChild(p);
  }
})();

// ===================== TICKER =====================
const tWins=[
  {i:'',m:'<strong> .</strong> <span></span> <strong>45 678 </strong> <span> Sweet Bonanza</span>'},
  {i:'',m:'<strong> .</strong> <span></span> <strong>250 000 </strong> <span>Gates of Olympus</span>'},
  {i:'',m:'<strong> .</strong> <span>x247  Aviator </span> <strong>89 400 </strong>'},
  {i:'',m:'<strong> !</strong> <span>x1 200  Mines </span> <strong>600 000 </strong>'},
  {i:'',m:'<strong> !</strong> <span> </span> <strong>$500 000</strong>'},
  {i:'',m:'<strong> .</strong> <span></span> <strong>32 100 </strong> <span> Lightning Roulette</span>'},
  {i:'',m:'<strong> !</strong> <span> </span> <strong>10%</strong> <span></span>'},
  {i:'',m:'<strong> .</strong> <span>!</span> <strong>18 900 </strong>'},
  {i:'',m:'<strong>Dima_pro</strong> <span> 22   Mines </span> <strong>125 000 </strong>'},
];
const tEl=document.getElementById('tickerInner');
const allT=[...tWins,...tWins];
tEl.innerHTML=allT.map(w=>`<span class="ticker-item"><span class="t-dot"></span>${w.i} ${w.m}</span>`).join('');

// ===================== SLIDER =====================
let curSlide=0;
const slides=document.querySelectorAll('.slide');
const dotsEl=document.getElementById('dots');
slides.forEach((_,i)=>{
  const d=document.createElement('div'); d.className='dot'+(i===0?' active':'');
  d.onclick=()=>goSlide(i); dotsEl.appendChild(d);
});
function goSlide(n){
  slides[curSlide].classList.remove('active'); document.querySelectorAll('.dot')[curSlide].classList.remove('active');
  curSlide=n; slides[curSlide].classList.add('active'); document.querySelectorAll('.dot')[curSlide].classList.add('active');
}
function nextSlide(){goSlide((curSlide+1)%slides.length);}
function prevSlide(){goSlide((curSlide-1+slides.length)%slides.length);}
setInterval(nextSlide,5500);

// ===================== NAVIGATION =====================
function toggleMenu(){document.getElementById('mobileMenu').classList.toggle('open');}
function showPage(name){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('page-'+name).classList.add('active');
  document.querySelectorAll('.nav-links a').forEach(a=>a.classList.remove('active'));
  const nav=document.getElementById('nav-'+name); if(nav) nav.classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
  document.getElementById('mobileMenu').classList.remove('open');
  // Build grids lazily
  if(name==='slots') buildGrid('slotsGrid','slots');
  if(name==='live') buildGrid('liveGrid','live');
  if(name==='crash') buildGrid('crashGrid','crash');
  if(name==='table') buildGrid('tableGrid','table');
  if(name==='bonuses') setTimeout(initBonusPage,50);
}

// Filter buttons
document.querySelectorAll('.filter-btn').forEach(btn=>{
  btn.addEventListener('click',function(){
    this.closest('.game-filters').querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
    this.classList.add('active');
  });
});

// ===================== GAME GRIDS =====================
function buildGrid(elId, typeFilter){
  const el = document.getElementById(elId);
  if(!el) return;
  const typeMap = {live:['live'], slots:['slots'], crash:['crash'], table:['table','keno','videopoker','scratch','hilo','dice']};
  const types = typeMap[typeFilter] || [typeFilter];
  const list = GAMES.filter(g=>types.includes(g.type)||(typeFilter==='table'&&['table','videopoker','keno','hilo','scratch','dice'].includes(g.id)));
  el.innerHTML = list.map(g=>`
    <div class="game-select-card" onclick="openGame('${g.id}','${g.name}','${g.color}')">
      ${g.tag?`<div class="gsc-badge ${g.tag==='hot'?'gsc-hot':'gsc-new'}">${g.tag==='hot'?' ':' New'}</div>`:''}
      <div class="gsc-icon">${g.icon}</div>
      <div class="gsc-name">${g.name}</div>
      <div class="gsc-desc">${g.desc}</div>
      <div class="gsc-rtp">RTP ${g.rtp}</div>
    </div>`).join('');
}

// Home grid
function buildHomeGrid(filter='all'){
  const el = document.getElementById('homeGameGrid');
  const cats = {all:null,hot:'hot',new:'new',crash:'crash',table:['table','live']};
  let list = GAMES;
  if(filter==='hot') list = GAMES.filter(g=>g.tag==='hot');
  else if(filter==='new') list = GAMES.filter(g=>g.tag==='new');
  else if(filter==='crash') list = GAMES.filter(g=>g.type==='crash');
  else if(filter==='table') list = GAMES.filter(g=>g.type==='live'||g.type==='table');
  else list = GAMES.slice(0,10);
  el.innerHTML = list.slice(0,10).map((g,i)=>{
    const cols=['gc1','gc2','gc3','gc4','gc5','gc6','gc7','gc8','gc9','gc10'];
    const c = g.color || cols[i%10];
    return `<div class="game-card" onclick="openGame('${g.id}','${g.name}','${c}')">
      <div class="game-thumb ${c}"><div class="game-thumb-inner"><div style="font-size:38px">${g.icon}</div><div class="game-thumb-name">${g.name}</div></div>
      <div class="game-overlay"><button class="btn-play"></button></div></div>
      <div class="game-info"><div class="game-name">${g.name}</div><div class="game-meta"><span class="game-rtp">RTP ${g.rtp}</span><span class="game-provider">${g.type==='slots'?'Slots':g.type==='crash'?'Crash':'Live'}</span></div></div>
      ${g.tag==='hot'?'<div class="tag tag-hot"> </div>':''}${g.tag==='new'?'<div class="tag tag-new"> New</div>':''}
    </div>`;
  }).join('');
}
buildHomeGrid();

function filterHomeGames(btn, filter){
  document.querySelectorAll('#homeFilters .filter-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  buildHomeGrid(filter);
}

// ===================== WIN NOTIFICATIONS =====================
const notifMsgs=[
  {i:'',t:'<strong> .</strong><br><span> 45 678   Sweet Bonanza</span>'},
  {i:'',t:'<strong> .</strong><br><span> 180 000  Gates of Olympus</span>'},
  {i:'',t:'<strong> .</strong><br><span>x247  Aviator  89 400 </span>'},
  {i:'',t:'<strong>Sergey_M</strong><br><span>x60  Mines  30 000 </span>'},
  {i:'',t:'<strong> .</strong><br><span>x10  Coin Flip  5 000 </span>'},
  {i:'',t:'<strong>Crazy Time!</strong><br><span>  62 000 </span>'},
];
let nIdx=0;
function showNotif(){
  const n=document.getElementById('winNotif');
  const msg=notifMsgs[nIdx%notifMsgs.length];
  document.getElementById('winIcon').textContent=msg.i;
  document.getElementById('winText').innerHTML=msg.t;
  n.style.display='block'; n.style.animation='none';
  setTimeout(()=>n.style.animation='slideIn .4s ease',10);
  setTimeout(()=>n.style.display='none',5000);
  nIdx++;
}
setTimeout(()=>{showNotif();setInterval(showNotif,7000);},4000);

// ===================== ADD FUNDS (multi-step realistic flow) =====================
const DEPOSIT_METHODS = [
  { id:'card',   icon:'', name:' ',   hint:'Visa / Mastercard / ',    field:' ',       mask:'   ####', ph:'0000 0000 0000 0000', maxlen:19 },
  { id:'sbp',    icon:'', name:'',                hint:'   ',       field:' ',    mask:'+7 (###) ###-##-##',  ph:'+7 (900) 000-00-00',  maxlen:18 },
  { id:'bank',   icon:'', name:' ', hint:' /  / ',  field:' ',       mask:'#### #### #### #### ####', ph:'0000 0000 0000 0000 0000', maxlen:24 },
  { id:'crypto', icon:'',  name:'',       hint:'BTC / ETH / USDT',            field:' ',    mask:null,                  ph:'0x... / bc1...',      maxlen:60 },
  { id:'qiwi',   icon:'', name:'QIWI',               hint:'',                   field:' ',    mask:'+7 (###) ###-##-##',  ph:'+7 (900) 000-00-00',  maxlen:18 },
  { id:'ymoney', icon:'', name:'Money',             hint:' ',               field:' ',    mask:'#### #### #### ###',   ph:'4100 0000 0000 000',  maxlen:18 },
];

let _depState = { step:0, method:null, amount:0, account:'', code:'', codeTimer:null, codeExpiry:0 };

function showAddFunds(){
  _depState = { step:0, method:null, amount:0, account:'', code:'', codeTimer:null, codeExpiry:0 };
  document.getElementById('infoTitle').textContent = '  ';
  _renderDepStep1();
  document.getElementById('infoModal').classList.add('open');
}

function _renderDepStep1(){
  _depState.step = 1;
  document.getElementById('infoTitle').textContent = '    1  3';
  document.getElementById('infoBody').innerHTML = `
    <div style="margin-bottom:16px;">
      <div style="font-size:12px;color:var(--muted);margin-bottom:4px;"> </div>
      <div style="font-family:'Orbitron',sans-serif;font-size:22px;font-weight:700;color:var(--gold);">${fmt(balance)} ${debt>0?` <span style="font-size:13px;color:var(--red);font-family:'Rajdhani',sans-serif;"> : ${fmt(debt)} </span>`:''}</div>
    </div>

    <div style="font-size:13px;color:var(--muted);margin-bottom:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;">  </div>
    <div style="display:flex;flex-direction:column;gap:8px;margin-bottom:20px;">
      ${DEPOSIT_METHODS.map(m=>`
        <div onclick="depSelectMethod('${m.id}')" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:13px 16px;cursor:pointer;display:flex;align-items:center;gap:12px;transition:.2s;" onmouseover="this.style.background='rgba(168,85,247,.12)';this.style.borderColor='rgba(168,85,247,.4)'" onmouseout="this.style.background='rgba(255,255,255,.04)';this.style.borderColor='rgba(255,255,255,.08)'">
          <span style="font-size:26px;width:36px;text-align:center;">${m.icon}</span>
          <div style="flex:1;">
            <div style="font-weight:700;font-size:15px;">${m.name}</div>
            <div style="font-size:12px;color:var(--muted);">${m.hint}</div>
          </div>
          <span style="color:var(--muted);font-size:18px;"></span>
        </div>`).join('')}
    </div>`;
}

function depSelectMethod(id){
  _depState.method = DEPOSIT_METHODS.find(m=>m.id===id);
  _renderDepStep2();
}

function _renderDepStep2(){
  _depState.step = 2;
  const m = _depState.method;
  document.getElementById('infoTitle').textContent = `${m.icon} ${m.name}   2  3`;
  document.getElementById('infoBody').innerHTML = `
    <button onclick="_renderDepStep1()" style="background:none;border:none;color:var(--muted);cursor:pointer;font-size:13px;margin-bottom:16px;display:flex;align-items:center;gap:4px;padding:0;">   </button>

    <div style="font-size:13px;color:var(--muted);margin-bottom:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;"> </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:14px;">
      ${[500,1000,2000,5000,10000,25000].map(a=>`
        <button onclick="depSetAmount(${a},this)" style="background:rgba(255,255,255,.05);border:2px solid rgba(255,255,255,.1);border-radius:10px;padding:11px;color:#fff;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:16px;cursor:pointer;transition:.2s;" onmouseover="this.style.borderColor='var(--neon)'" onmouseout="if(!this.classList.contains('dep-sel'))this.style.borderColor='rgba(255,255,255,.1)'">${fmt(a)} </button>`).join('')}
    </div>
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:20px;">
      <span style="color:var(--muted);font-size:13px;">:</span>
      <div style="flex:1;background:rgba(0,0,0,.4);border:1px solid rgba(168,85,247,.3);border-radius:8px;display:flex;align-items:center;padding:0 12px;">
        <input id="depCustomAmt" type="number" min="100" max="500000" style="flex:1;background:none;border:none;color:var(--gold);font-family:'Orbitron',sans-serif;font-size:14px;padding:10px 0;outline:none;" placeholder=" " oninput="depSetAmount(+this.value,null)">
        <span style="color:var(--muted);font-size:13px;"></span>
      </div>
    </div>

    <div style="font-size:13px;color:var(--muted);margin-bottom:8px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;">${m.field}</div>
    <div style="background:rgba(0,0,0,.4);border:1px solid rgba(168,85,247,.3);border-radius:10px;display:flex;align-items:center;padding:0 14px;margin-bottom:6px;">
      <span style="font-size:18px;margin-right:8px;">${m.icon}</span>
      <input id="depAccountInput" type="text" maxlength="${m.maxlen}" style="flex:1;background:none;border:none;color:#fff;font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:600;padding:13px 0;outline:none;letter-spacing:1px;" placeholder="${m.ph}" oninput="depFormatInput(this,'${m.id}')">
    </div>
    <div style="font-size:11px;color:var(--muted);margin-bottom:20px;">     </div>

    <div id="depStep2Err" style="color:var(--red);font-size:13px;text-align:center;margin-bottom:10px;display:none;"></div>
    <button onclick="depProceedToCode()" style="width:100%;background:linear-gradient(135deg,var(--gold),#d97706);border:none;color:#000;padding:14px;border-radius:12px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:17px;cursor:pointer;letter-spacing:.5px;transition:.2s;" onmouseover="this.style.opacity='.85'" onmouseout="this.style.opacity='1'">   </button>`;
}

function depSetAmount(val, btn){
  _depState.amount = val;
  document.querySelectorAll('[onclick^="depSetAmount"]').forEach(b=>{ b.style.background='rgba(255,255,255,.05)'; b.style.borderColor='rgba(255,255,255,.1)'; b.classList.remove('dep-sel'); });
  if(btn){ btn.style.background='rgba(168,85,247,.2)'; btn.style.borderColor='var(--neon)'; btn.classList.add('dep-sel'); }
}

function depFormatInput(el, methodId){
  // Basic formatting for card/phone
  let v = el.value.replace(/\D/g,'');
  if(methodId==='card'){
    v = v.slice(0,16).replace(/(.{4})/g,'$1 ').trim();
  } else if(methodId==='sbp'||methodId==='qiwi'){
    if(v.startsWith('7')) v = v.slice(1);
    v = v.slice(0,10);
    if(v.length>6) v = '+7 ('+v.slice(0,3)+') '+v.slice(3,6)+'-'+v.slice(6,8)+(v.length>8?'-'+v.slice(8):'');
    else if(v.length>3) v = '+7 ('+v.slice(0,3)+') '+v.slice(3);
    else if(v.length>0) v = '+7 ('+v;
  } else if(methodId==='bank'){
    v = v.slice(0,20).replace(/(.{4})/g,'$1 ').trim();
  } else if(methodId==='ymoney'){
    v = v.slice(0,15).replace(/(.{4})/g,'$1 ').trim();
  }
  el.value = v;
  _depState.account = el.value;
}

function depProceedToCode(){
  const amt = _depState.amount;
  const acc = (document.getElementById('depAccountInput')||{}).value||'';
  _depState.account = acc;
  const err = document.getElementById('depStep2Err');
  if(!amt || amt < 100){ err.textContent=' : 100 '; err.style.display='block'; return; }
  if(!acc || acc.replace(/\D/g,'').length < 6){ err.textContent=`  ${_depState.method.field.toLowerCase()}`; err.style.display='block'; return; }
  err.style.display='none';
  _startCodeStep();
}

function _startCodeStep(){
  _depState.step = 3;
  // Generate 6-digit code
  _depState.code = String(Math.floor(100000 + Math.random()*900000));
  _depState.codeExpiry = Date.now() + 60000; // 60 seconds
  const m = _depState.method;
  document.getElementById('infoTitle').textContent = '    3  3';
  document.getElementById('infoBody').innerHTML = `
    <div style="text-align:center;margin-bottom:20px;">
      <div style="font-size:14px;color:var(--muted);margin-bottom:6px;">  :</div>
      <div style="font-size:16px;font-weight:700;">${m.icon} ${_depState.account}</div>
    </div>

    <!-- SMS-code display box -->
    <div style="background:linear-gradient(135deg,rgba(124,58,237,.15),rgba(236,72,153,.1));border:1px solid rgba(168,85,247,.4);border-radius:16px;padding:20px;text-align:center;margin-bottom:16px;position:relative;">
      <div style="font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:10px;">  </div>
      <div style="font-family:'Orbitron',sans-serif;font-size:38px;font-weight:900;letter-spacing:10px;color:var(--gold);text-shadow:0 0 20px rgba(245,158,11,.5);margin-bottom:10px;" id="depCodeDisplay">${_depState.code}</div>
      <div style="display:flex;align-items:center;justify-content:center;gap:6px;font-size:13px;color:var(--muted);">
        <span>  :</span>
        <span id="depCodeTimer" style="color:var(--cyan);font-weight:700;font-family:'Orbitron',sans-serif;font-size:13px;">60</span>
        <span></span>
      </div>
      <!-- Timer bar -->
      <div style="background:rgba(255,255,255,.1);border-radius:20px;height:4px;margin-top:12px;overflow:hidden;">
        <div id="depTimerBar" style="height:100%;width:100%;background:linear-gradient(90deg,var(--cyan),var(--purple));border-radius:20px;transition:width 1s linear;"></div>
      </div>
    </div>

    <div style="font-size:13px;color:var(--muted);margin-bottom:8px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;">   </div>
    <div style="background:rgba(0,0,0,.4);border:1px solid rgba(168,85,247,.3);border-radius:10px;display:flex;align-items:center;justify-content:center;padding:0 16px;margin-bottom:6px;">
      <input id="depCodeInput" type="text" maxlength="6" style="flex:1;background:none;border:none;color:#fff;font-family:'Orbitron',sans-serif;font-size:24px;font-weight:700;padding:14px 0;outline:none;letter-spacing:8px;text-align:center;" placeholder="______" oninput="this.value=this.value.replace(/\D/g,'').slice(0,6)" onkeydown="if(event.key==='Enter')depConfirmCode()">
    </div>
    <div id="depCodeErr" style="color:var(--red);font-size:13px;text-align:center;margin-bottom:12px;min-height:20px;"></div>

    <button onclick="depConfirmCode()" style="width:100%;background:linear-gradient(135deg,var(--green),#059669);border:none;color:#fff;padding:14px;border-radius:12px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:17px;cursor:pointer;letter-spacing:.5px;margin-bottom:10px;transition:.2s;" onmouseover="this.style.opacity='.85'" onmouseout="this.style.opacity='1'">   </button>
    <button onclick="closeInfo()" style="width:100%;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);color:var(--muted);padding:11px;border-radius:12px;font-family:'Rajdhani',sans-serif;font-weight:600;font-size:14px;cursor:pointer;transition:.2s;"></button>

    <div style="text-align:center;margin-top:14px;font-size:12px;color:rgba(148,163,184,.4);">  ? <span onclick="depResendCode()" style="color:var(--neon);cursor:pointer;">  </span></div>`;

  // Start countdown
  _depState.codeTimer = setInterval(_depTickTimer, 1000);
  _depTickTimer();
}

function _depTickTimer(){
  const remaining = Math.max(0, Math.ceil((_depState.codeExpiry - Date.now()) / 1000));
  const timerEl = document.getElementById('depCodeTimer');
  const barEl = document.getElementById('depTimerBar');
  const codeEl = document.getElementById('depCodeDisplay');
  if(!timerEl){ clearInterval(_depState.codeTimer); return; }
  timerEl.textContent = remaining;
  if(barEl) barEl.style.width = (remaining/60*100)+'%';
  if(remaining <= 10 && timerEl){ timerEl.style.color='var(--red)'; }
  if(remaining <= 0){
    clearInterval(_depState.codeTimer);
    if(codeEl){ codeEl.style.color='var(--red)'; codeEl.textContent=''; }
    const errEl = document.getElementById('depCodeErr');
    if(errEl){ errEl.textContent='  .   .'; }
    _depState.code = '';
  }
}

function depResendCode(){
  clearInterval(_depState.codeTimer);
  _depState.code = String(Math.floor(100000 + Math.random()*900000));
  _depState.codeExpiry = Date.now() + 60000;
  const codeEl = document.getElementById('depCodeDisplay');
  const timerEl = document.getElementById('depCodeTimer');
  const barEl = document.getElementById('depTimerBar');
  const errEl = document.getElementById('depCodeErr');
  if(codeEl){ codeEl.style.color='var(--gold)'; codeEl.textContent=_depState.code; }
  if(timerEl){ timerEl.style.color='var(--cyan)'; timerEl.textContent='60'; }
  if(barEl){ barEl.style.transition='none'; barEl.style.width='100%'; setTimeout(()=>barEl.style.transition='width 1s linear',50); }
  if(errEl) errEl.textContent='';
  _depState.codeTimer = setInterval(_depTickTimer, 1000);
  _depTickTimer();
}

function depConfirmCode(){
  const input = (document.getElementById('depCodeInput')||{}).value||'';
  const errEl = document.getElementById('depCodeErr');
  if(!_depState.code){ if(errEl) errEl.textContent='  .  .'; return; }
  if(input.trim() !== _depState.code){ if(errEl){ errEl.textContent='  .   .'; } return; }
  // SUCCESS
  clearInterval(_depState.codeTimer);
  let amount = _depState.amount;
  if(debt>0){
    const pay = Math.min(amount, debt);
    debt -= pay; amount -= pay;
    updDebtDisplay();
  }
  chgBal(amount);
  closeInfo();
  _showDepositSuccess(_depState.amount);
}

function _showDepositSuccess(total){
  const n = document.createElement('div');
  n.style.cssText='position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999;background:linear-gradient(135deg,rgba(16,185,129,.2),rgba(6,182,212,.15));border:1px solid rgba(16,185,129,.5);border-radius:20px;padding:32px 40px;text-align:center;backdrop-filter:blur(20px);box-shadow:0 0 60px rgba(16,185,129,.3);animation:slideIn .4s ease;min-width:280px;';
  n.innerHTML=`
    <div style="font-size:56px;margin-bottom:10px;"></div>
    <div style="font-family:'Orbitron',sans-serif;font-size:20px;font-weight:700;color:var(--green);margin-bottom:6px;">!</div>
    <div style="font-size:15px;color:#fff;margin-bottom:4px;">   <strong style="color:var(--gold);">${fmt(total)} </strong></div>
    <div style="font-size:13px;color:var(--muted);margin-bottom:18px;">: ${fmt(balance)} </div>
    <button onclick="this.parentElement.remove()" style="background:linear-gradient(135deg,var(--green),#059669);border:none;color:#fff;padding:10px 28px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:15px;cursor:pointer;">! </button>`;
  document.body.appendChild(n);
  setTimeout(()=>{ if(n.parentElement) n.remove(); }, 5000);
}

function updInfo(){}

// ===================== INFO MODAL =====================
const infoContent = {
  login:{title:'   ', body:`<p style="color:var(--muted);margin-bottom:16px;">   NeonX Casino!</p><div style="display:flex;gap:10px;flex-direction:column;"><input style="background:rgba(255,255,255,.07);border:1px solid rgba(168,85,247,.3);border-radius:8px;padding:10px 14px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;" placeholder="Email  "><input type="password" style="background:rgba(255,255,255,.07);border:1px solid rgba(168,85,247,.3);border-radius:8px;padding:10px 14px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;" placeholder=""><button class="action-btn btn-purple" onclick="closeInfo()"></button></div>`},
  reg:{title:' ', body:`<p style="color:var(--muted);margin-bottom:16px;">    <strong style="color:var(--gold)">200% + 150 !</strong></p><div style="display:flex;gap:10px;flex-direction:column;"><input style="background:rgba(255,255,255,.07);border:1px solid rgba(168,85,247,.3);border-radius:8px;padding:10px 14px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;" placeholder=" "><input style="background:rgba(255,255,255,.07);border:1px solid rgba(168,85,247,.3);border-radius:8px;padding:10px 14px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;" placeholder="Email"><input type="password" style="background:rgba(255,255,255,.07);border:1px solid rgba(168,85,247,.3);border-radius:8px;padding:10px 14px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:15px;outline:none;" placeholder=""><button class="action-btn btn-gold" onclick="closeInfo()"></button></div>`},
  bonus1:{title:'   ', body:'<div style="font-size:15px;color:var(--muted);line-height:1.7;"><p><strong style="color:#fff">:</strong></p><ul style="margin:10px 0 0 16px;"><li>200%   </li><li>150   Gates of Olympus</li><li>: x35</li><li>: 30 </li></ul></div>'},
  bonus2:{title:'   ', body:'<div style="font-size:15px;color:var(--muted);line-height:1.7;"><p>   200     .</p><p style="margin-top:8px;"><strong style="color:#fff">:</strong>    .</p></div>'},
  vip:{title:' VIP-', body:'<div style="font-size:15px;line-height:1.7;"><p style="color:var(--gold);font-family:Orbitron,sans-serif;font-size:18px;margin-bottom:12px;"> VIP</p><div style="display:grid;gap:8px;"><div style="background:rgba(255,255,255,.04);border-radius:8px;padding:10px 14px;"> Bronze   5%</div><div style="background:rgba(255,255,255,.04);border-radius:8px;padding:10px 14px;"> Silver   10%</div><div style="background:rgba(168,85,247,.1);border:1px solid var(--purple);border-radius:8px;padding:10px 14px;"> Gold   15% + </div><div style="background:rgba(245,158,11,.1);border:1px solid var(--gold);border-radius:8px;padding:10px 14px;"> Diamond   20% + !</div></div></div>'},
  tournament:{title:'  $500 000', body:'<div style="font-size:15px;color:var(--muted);line-height:1.7;"><p style="color:var(--gold);font-family:Orbitron,sans-serif;font-size:20px;margin-bottom:12px;">Grand Tournament</p><p>     <strong style="color:#fff">$500 000</strong>.</p><p style="margin-top:8px;"><strong style="color:#fff"> :</strong></p><ul style="margin:8px 0 0 16px;"><li>1   $100 000</li><li>2   $50 000</li><li>3   $25 000</li><li>4-10    $5 000</li></ul></div>'},
  reload:{title:' Reload ', body:'<div style="font-size:15px;color:var(--muted);line-height:1.7;"><p>   50%    !</p><p style="margin-top:8px;"><strong style="color:#fff">:</strong> 50 000 <br><strong style="color:#fff">:</strong> x25</p></div>'},
  referral:{title:'  ', body:'<div style="font-size:15px;color:var(--muted);line-height:1.7;"><p>    <strong style="color:var(--gold)">10%</strong>       .</p><p style="margin-top:12px;"><strong style="color:#fff"> -:</strong><br><code style="background:rgba(255,255,255,.07);padding:6px 12px;border-radius:6px;display:block;margin-top:6px;font-size:13px;">neonx.casino/ref/usr7823</code></p></div>'},
  about:{title:'  ', body:'<p style="color:var(--muted);line-height:1.7;">NeonX Casino    -  2020 .  500 000    .  Curaao eGaming.  ,  .</p>'},
  license:{title:' ', body:'<p style="color:var(--muted);line-height:1.7;">NeonX Casino  Curaao eGaming (Antillephone N.V.).<br><br> : 8048/JAZ2020-013<br>: 2020<br><br></p>'},
  rules:{title:' ', body:'<p style="color:var(--muted);line-height:1.7;">1.     18 .<br>2.    .<br>3.   .<br>4.       .<br><br> </p>'},
  privacy:{title:' ', body:'<p style="color:var(--muted);line-height:1.7;">      .       .    GDPR.</p>'},
  contacts:{title:' ', body:'<div style="color:var(--muted);line-height:2;"><p> support@neonx.casino</p><p> Live-: 24/7</p><p> Telegram: @neonxcasino</p><p>  :  5 </p></div>'},
  responsible:{title:'  ', body:'<p style="color:var(--muted);line-height:1.7;">    ,    .<br><br><strong style="color:#fff"> :</strong><br>  <br> <br>   <br>  24/7<br><br>       .</p>'},
  faq:{title:' FAQ', body:'<div style="color:var(--muted);line-height:1.7;"><p><strong style="color:#fff">  ?</strong><br>        1000    !</p><p style="margin-top:12px;"><strong style="color:#fff"> ?</strong><br>,    500 .    15 .</p><p style="margin-top:12px;"><strong style="color:#fff">  ?</strong><br>       .</p></div>'},
  chat:{title:' Live-', body:`<p style="color:var(--muted);margin-bottom:16px;">  24/7</p><div style="background:rgba(255,255,255,.04);border-radius:12px;padding:16px;height:150px;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:14px;">     2- ...</div><div style="display:flex;gap:8px;margin-top:12px;"><input style="flex:1;background:rgba(255,255,255,.07);border:1px solid rgba(168,85,247,.3);border-radius:8px;padding:10px 14px;color:#fff;font-family:'Rajdhani',sans-serif;font-size:14px;outline:none;" placeholder=" ..."><button class="action-btn btn-purple" onclick="this.previousElementSibling.value=''"></button></div>`},
  partners:{title:' ', body:'<p style="color:var(--muted);line-height:1.7;">  NeonX:<br><br> :  40% RevShare<br> : 5%  <br> : <br><br> partners@neonx.casino</p>'},
};
function showInfoModal(key){
  const c=infoContent[key];
  if(!c) return;
  document.getElementById('infoTitle').textContent=c.title;
  document.getElementById('infoBody').innerHTML=c.body;
  document.getElementById('infoModal').classList.add('open');
}
function closeInfo(){document.getElementById('infoModal').classList.remove('open');}
function handleInfoBg(e){if(e.target===document.getElementById('infoModal'))closeInfo();}

// ===================== GAME MODAL =====================
let _intervals=[];
function clearGameIntervals(){_intervals.forEach(clearInterval);_intervals=[];}
function addInterval(id){_intervals.push(id);}

function closeGame(){
  document.getElementById('gameModal').classList.remove('open');
  clearGameIntervals();
  // reset game state
  bjGameOver=true; aviRunning=false; aviActive=false; minesActive=false; towerActive=false;
}
function handleModalBg(e){if(e.target===document.getElementById('gameModal'))closeGame();}

function openGame(gameId, name, color){
  document.getElementById('modalTitle').textContent=name;
  updBal();
  clearGameIntervals();
  const body=document.getElementById('modalBody');
  body.innerHTML='';
  // find game
  const g=GAMES.find(x=>x.id===gameId)||{};
  const fn=GAME_TYPE_FN[gameId]||GAME_TYPE_FN[g.type]||buildSlots;
  body.innerHTML=fn(name, color);
  document.getElementById('gameModal').classList.add('open');
  // init
  if(gameId==='blackjack') bjInit();
  if(gameId==='mines') minesInit();
  if(gameId==='aviator'||gameId==='jetx') aviInit();
  if(gameId==='keno') kenoInit();
  if(gameId==='videopoker') vpInit();
  if(gameId==='tower') towerInit();
  if(gameId==='hilo') hiloInit();
  if(gameId==='scratch') scratchInit();
  if(gameId==='plinko') plinkoInit();
  if(gameId==='limbo') limboInit();
  if(gameId==='roulette') setTimeout(()=>{drawRoulette(0,0,0);},50);
  // start jackpot ticker for slots
  setTimeout(()=>{startJackpotTicker&&startJackpotTicker();},100);
}

// ===================== BET HELPERS =====================
function betRow(id,def=50){
  return `<div class="bet-row">
    <div class="bet-wrap"><label> </label><input type="number" class="bet-inp" id="${id}" value="${Math.min(def,balance)}" min="1"></div>
    <div class="qbets">
      <button class="qb" onclick="document.getElementById('${id}').value=Math.min(10,balance)">10</button>
      <button class="qb" onclick="document.getElementById('${id}').value=Math.min(50,balance)">50</button>
      <button class="qb" onclick="document.getElementById('${id}').value=Math.min(100,balance)">100</button>
      <button class="qb" onclick="document.getElementById('${id}').value=Math.min(500,balance)">500</button>
      <button class="qb" onclick="document.getElementById('${id}').value=balance">MAX</button>
    </div>
  </div>`;
}
function getBet(id){return Math.max(1,Math.min(parseFloat(document.getElementById(id)?.value)||50,balance));}
function setResult(id,msg,type){const el=document.getElementById(id);if(el){el.textContent=msg;el.className='game-result '+(type||'');}}

// ===================== SLOTS PREMIUM =====================
const SYM=['','','','','','','','7','',''];
const SYM_COLORS={'':'#ec4899','':'#facc15','':'#38bdf8','':'#a855f7','':'#bef264','':'#fbbf24','':'#f59e0b','7':'#ef4444','':'#94a3b8','':'#f0abfc'};
const PAYS={'':20,'':15,'':30,'':25,'':5,'':8,'':10,'7':50,'':40,'':12};
let slotSpinning=false, autoOn=false, slotTotalWin=0, slotTotalSpins=0;
// each reel has an array of symbols
let reelData=[[],[],[]];
let reelOffsets=[0,0,0];
let reelTargetOffsets=[0,0,0];
let reelAnimIds=[null,null,null];
const REEL_H=88; // px per symbol

function buildSlots(name,color){
  // build random symbol strip for each reel
  for(let r=0;r<3;r++){
    reelData[r]=[];
    for(let i=0;i<30;i++)reelData[r].push(SYM[Math.floor(Math.random()*SYM.length)]);
  }
  return `<div style="text-align:center;">
    <div class="jackpot-ticker" id="slotJackpot"> : <span id="jackpotVal">1 247 830</span> </div>
    <div class="slot-machine-wrap">
      <div class="slot-top-bar">
        <div><div class="slot-label"></div><div class="slot-val" id="slotWinTotal">0 </div></div>
        <div style="font-family:'Bebas Neue';font-size:24px;letter-spacing:3px;background:linear-gradient(90deg,#a855f7,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">${name}</div>
        <div><div class="slot-label"></div><div class="slot-val" id="slotSpins">0</div></div>
      </div>
      <div class="slot-reels-container" id="reelsContainer">
        <div class="slot-reels-glow"></div>
        <div class="slot-reels">
          ${[0,1,2].map(i=>`
          <div class="reel-window" id="reelWin${i}">
            <div class="reel" id="reel${i}" style="transform:translateY(0);">
              ${Array.from({length:30},(_,j)=>`<div class="reel-symbol" id="rs${i}_${j}">${reelData[i][j]}</div>`).join('')}
            </div>
          </div>`).join('')}
        </div>
        <div class="slot-win-anim" id="slotWinAnim"></div>
      </div>
      ${betRow('slotBet',50)}
      <div class="game-result info" id="slotResult"> !</div>
      <div class="btns-row">
        <button class="action-btn btn-gold" id="spinBtn" onclick="doSpin()" style="font-size:17px;padding:13px 36px;"> </button>
        <button class="action-btn btn-purple" id="autoBtn" onclick="toggleAuto()"> </button>
      </div>
    </div>
    <div class="paytable" style="margin-top:12px;"><h4>  </h4>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:2px;">
        ${SYM.map(s=>`<div class="pay-row"><span style="color:${SYM_COLORS[s]}">${s}${s}${s}</span><span style="color:var(--gold);font-weight:700;">x${PAYS[s]}</span></div>`).join('')}
      </div>
      <div class="pay-row" style="margin-top:4px;"><span>  2 </span><span style="color:var(--cyan);font-weight:700;">x2</span></div>
    </div>
  </div>`;
}

// Start jackpot ticker
function startJackpotTicker(){
  let jv=1247830;
  const jEl=document.getElementById('jackpotVal');
  if(!jEl)return;
  const ji=setInterval(()=>{
    if(!document.getElementById('jackpotVal')){clearInterval(ji);return;}
    jv+=Math.floor(Math.random()*50+10);
    document.getElementById('jackpotVal').textContent=fmt(jv);
  },200);
  addInterval(ji);
}

function spinReelAnim(reelIdx, duration, finalSymbols, callback){
  const reelEl=document.getElementById('reel'+reelIdx);
  if(!reelEl)return;
  const symCount=reelData[reelIdx].length;
  let startTime=null;
  // set target symbols
  reelData[reelIdx][symCount-2]=finalSymbols[0];
  reelData[reelIdx][symCount-1]=finalSymbols[1];
  reelData[reelIdx][0]=finalSymbols[2];
  // update DOM
  for(let j=0;j<symCount;j++){
    const s=document.getElementById(`rs${reelIdx}_${j}`);
    if(s)s.textContent=reelData[reelIdx][j];
  }
  // spin animation - fast scroll then slow to stop
  let currentOffset=0;
  const totalDistance=symCount*REEL_H*3;
  const stopAt=(symCount-2)*REEL_H;
  
  function animate(ts){
    if(!startTime)startTime=ts;
    const elapsed=ts-startTime;
    const progress=Math.min(elapsed/duration,1);
    // ease: fast then slow
    const eased=progress<.7?progress/.7:1-Math.pow((progress-.7)/.3,2)*.8;
    const offset=(eased*totalDistance)%(symCount*REEL_H);
    reelEl.style.transform=`translateY(-${offset}px)`;
    if(progress<1){
      reelAnimIds[reelIdx]=requestAnimationFrame(animate);
    } else {
      // snap to middle row showing final symbol
      reelEl.style.transform=`translateY(-${stopAt}px)`;
      // highlight winning symbol
      const midSym=document.getElementById(`rs${reelIdx}_${symCount-2}`);
      if(midSym)midSym.classList.add('winning');
      if(callback)callback();
    }
  }
  reelAnimIds[reelIdx]=requestAnimationFrame(animate);
}

function spawnCoins(count, originEl){
  const rect=originEl?originEl.getBoundingClientRect():{left:window.innerWidth/2,top:window.innerHeight/2};
  const coins=['','','',''];
  for(let i=0;i<count;i++){
    const p=document.createElement('div');
    p.className='coin-particle';
    p.textContent=coins[Math.floor(Math.random()*coins.length)];
    p.style.left=(rect.left+Math.random()*rect.width)+'px';
    p.style.top=rect.top+'px';
    p.style.animationDelay=(Math.random()*.5)+'s';
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),2000);
  }
}

function doSpin(){
  if(slotSpinning)return;
  const bet=getBet('slotBet');
  if(!spendBet(bet)){setResult('slotResult','  !','lose');return;}
  slotSpinning=true; slotTotalSpins++;
  const spinBtn=document.getElementById('spinBtn');
  if(spinBtn)spinBtn.disabled=true;
  document.getElementById('slotSpins').textContent=slotTotalSpins;
  // remove previous winning highlights
  document.querySelectorAll('.reel-symbol.winning').forEach(el=>el.classList.remove('winning'));
  const results=[SYM[Math.floor(Math.random()*SYM.length)],SYM[Math.floor(Math.random()*SYM.length)],SYM[Math.floor(Math.random()*SYM.length)]];
  let done=0;
  [0,1,2].forEach(i=>{
    const delay=300+i*250;
    const duration=800+i*300;
    setTimeout(()=>{
      spinReelAnim(i, duration, [SYM[Math.floor(Math.random()*SYM.length)],results[i],SYM[Math.floor(Math.random()*SYM.length)]], ()=>{
        done++;
        if(done===3) finishSpin(results, bet);
      });
    },delay);
  });
}

function finishSpin(results,bet){
  slotSpinning=false;
  const spinBtn=document.getElementById('spinBtn');
  if(spinBtn)spinBtn.disabled=false;
  const[a,b,c]=results; let win=0;
  if(a===b&&b===c){
    win=Math.round(bet*PAYS[a]);chgBal(win);
    setResult('slotResult',` ! ${a}${b}${c}  +${fmt(win)} `,'win');
    const wa=document.getElementById('slotWinAnim');if(wa)wa.classList.add('active');
    setTimeout(()=>{if(wa)wa.classList.remove('active');},1000);
    spawnCoins(20, document.getElementById('reelsContainer'));
  } else if(a===b||b===c||a===c){
    win=bet*2;chgBal(win);
    setResult('slotResult',` ! +${fmt(win)} `,'win');
    spawnCoins(8, document.getElementById('reelsContainer'));
  } else setResult('slotResult','  .  !','lose');
  slotTotalWin+=win; document.getElementById('slotWinTotal').textContent=fmt(slotTotalWin)+' ';
  if(autoOn&&balance>0)setTimeout(doSpin,900);
  else if(autoOn){autoOn=false;const ab=document.getElementById('autoBtn');if(ab){ab.textContent=' ';ab.style.background='';}}
}

function toggleAuto(){
  autoOn=!autoOn;
  const ab=document.getElementById('autoBtn');
  if(autoOn){ab.textContent=' ';ab.style.background='linear-gradient(135deg,var(--red),#dc2626)';doSpin();}
  else{ab.textContent=' ';ab.style.background='';}
}

// ===================== ROULETTE PREMIUM =====================
const RNUMS=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26];
const RED_S=new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
let selBet=null;
let roulWheelAngle=0, roulBallAngle=0, roulSpinning=false;

function buildRoulette(name,color){
  return `<div class="roulette-wrap">
    <p class="game-subtitle">${name}     !</p>
    ${betRow('roulBet',50)}
    <div class="roulette-outer">
      <div style="position:absolute;top:-12px;left:50%;transform:translateX(-50%);font-size:20px;z-index:20;filter:drop-shadow(0 0 6px gold);"></div>
      <canvas id="roulCanvas" width="240" height="240" style="display:block;"></canvas>
    </div>
    <div class="roul-num" id="roulNum" style="color:var(--muted);font-size:32px;">?</div>
    <div class="roulette-table">
      <div style="font-size:11px;color:var(--muted);margin-bottom:8px;text-transform:uppercase;letter-spacing:1px;"> :</div>
      <div class="roul-bets">
        <div class="rb red-bet" onclick="selRBet(this,'red')">  (x2)</div>
        <div class="rb" onclick="selRBet(this,'black')">  (x2)</div>
        <div class="rb green-bet" onclick="selRBet(this,'zero')">  (x36)</div>
        <div class="rb" onclick="selRBet(this,'odd')">  (x2)</div>
        <div class="rb" onclick="selRBet(this,'even')">  (x2)</div>
        <div class="rb" onclick="selRBet(this,'1-18')"> 1-18 (x2)</div>
        <div class="rb" onclick="selRBet(this,'19-36')"> 19-36 (x2)</div>
        <div class="rb" onclick="selRBet(this,'1st12')">1-12 (x3)</div>
        <div class="rb" onclick="selRBet(this,'2nd12')">13-24 (x3)</div>
      </div>
    </div>
    <div class="btns-row">
      <button class="action-btn btn-gold" id="roulSpinBtn" onclick="doRoul()" style="font-size:17px;padding:13px 36px;"> </button>
    </div>
    <div class="game-result info" id="roulResult">   !</div>
  </div>`;
}

function drawRoulette(wheelAngle, ballAngle, ballRadius){
  const canvas=document.getElementById('roulCanvas');
  if(!canvas)return;
  const ctx=canvas.getContext('2d');
  const cx=120,cy=120,R=118,innerR=72;
  ctx.clearRect(0,0,240,240);
  
  // Outer ring glow
  const glowGrad=ctx.createRadialGradient(cx,cy,R-8,cx,cy,R);
  glowGrad.addColorStop(0,'rgba(245,158,11,0.4)');
  glowGrad.addColorStop(1,'rgba(245,158,11,0)');
  ctx.fillStyle=glowGrad;
  ctx.beginPath();ctx.arc(cx,cy,R,0,Math.PI*2);ctx.fill();
  
  // Outer border
  ctx.beginPath();ctx.arc(cx,cy,R,0,Math.PI*2);
  ctx.strokeStyle='#f59e0b';ctx.lineWidth=4;ctx.stroke();
  
  // Draw segments
  const n=RNUMS.length, segAngle=(Math.PI*2)/n;
  for(let i=0;i<n;i++){
    const startA=wheelAngle+i*segAngle-Math.PI/2;
    const endA=startA+segAngle;
    const num=RNUMS[i];
    let col;
    if(num===0)col='#15803d';
    else if(RED_S.has(num))col='#dc2626';
    else col='#1a1a1a';
    
    ctx.beginPath();ctx.moveTo(cx,cy);ctx.arc(cx,cy,R-4,startA,endA);ctx.closePath();
    ctx.fillStyle=col;ctx.fill();
    ctx.strokeStyle='rgba(0,0,0,0.5)';ctx.lineWidth=0.5;ctx.stroke();
    
    // number text
    const midA=startA+segAngle/2;
    const tx=cx+Math.cos(midA)*(R-22),ty=cy+Math.sin(midA)*(R-22);
    ctx.save();ctx.translate(tx,ty);ctx.rotate(midA+Math.PI/2);
    ctx.fillStyle='rgba(255,255,255,0.9)';ctx.font='bold 9px Arial';ctx.textAlign='center';ctx.textBaseline='middle';
    ctx.fillText(num,0,0);ctx.restore();
  }
  
  // Inner decorative rings
  ctx.beginPath();ctx.arc(cx,cy,innerR,0,Math.PI*2);
  const innerGrad=ctx.createRadialGradient(cx,cy,0,cx,cy,innerR);
  innerGrad.addColorStop(0,'#1a0a30');innerGrad.addColorStop(1,'#0d0520');
  ctx.fillStyle=innerGrad;ctx.fill();
  ctx.strokeStyle='rgba(245,158,11,0.6)';ctx.lineWidth=2;ctx.stroke();
  
  // inner ring decoration
  ctx.beginPath();ctx.arc(cx,cy,innerR-8,0,Math.PI*2);
  ctx.strokeStyle='rgba(168,85,247,0.3)';ctx.lineWidth=1;ctx.stroke();
  
  // Center
  const centerGrad=ctx.createRadialGradient(cx,cy,0,cx,cy,20);
  centerGrad.addColorStop(0,'#3a1060');centerGrad.addColorStop(1,'#1a0530');
  ctx.beginPath();ctx.arc(cx,cy,20,0,Math.PI*2);ctx.fillStyle=centerGrad;ctx.fill();
  ctx.strokeStyle='rgba(245,158,11,0.8)';ctx.lineWidth=2;ctx.stroke();
  
  // Ball
  if(ballRadius>0){
    const bx=cx+Math.cos(ballAngle)*ballRadius;
    const by=cy+Math.sin(ballAngle)*ballRadius;
    const ballGrad=ctx.createRadialGradient(bx-2,by-2,1,bx,by,7);
    ballGrad.addColorStop(0,'#ffffff');ballGrad.addColorStop(.5,'#dddddd');ballGrad.addColorStop(1,'#aaaaaa');
    ctx.beginPath();ctx.arc(bx,by,7,0,Math.PI*2);ctx.fillStyle=ballGrad;ctx.fill();
    ctx.strokeStyle='rgba(0,0,0,0.6)';ctx.lineWidth=1;ctx.stroke();
    // ball glow
    ctx.beginPath();ctx.arc(bx,by,9,0,Math.PI*2);
    ctx.strokeStyle='rgba(255,255,255,0.3)';ctx.lineWidth=1;ctx.stroke();
  }
}

function selRBet(el,type){document.querySelectorAll('.rb').forEach(b=>b.classList.remove('sel'));el.classList.add('sel');selBet=type;}

function doRoul(){
  if(!selBet){alert('  !');return;}
  if(roulSpinning)return;
  const bet=getBet('roulBet');
  if(!spendBet(bet)){setResult('roulResult','  !','lose');return;}
  document.getElementById('roulSpinBtn').disabled=true;
  roulSpinning=true;
  const num=RNUMS[Math.floor(Math.random()*RNUMS.length)];
  const targetIdx=RNUMS.indexOf(num);
  const segAngle=(Math.PI*2)/RNUMS.length;
  // Animate wheel and ball
  const spinDuration=4500;
  const startTime=Date.now();
  const wheelSpins=6; // full rotations
  const ballSpins=-10;
  const wheelStart=roulWheelAngle;
  const wheelTarget=wheelStart - (wheelSpins*Math.PI*2) - (targetIdx*segAngle);
  const ballStart=0;
  const ballTarget=ballSpins*Math.PI*2 + (targetIdx*segAngle) + wheelStart;
  
  function animateWheel(){
    if(!document.getElementById('roulCanvas')){return;}
    const elapsed=Date.now()-startTime;
    const p=Math.min(elapsed/spinDuration,1);
    const ease=p<1?1-Math.pow(1-p,4):1;
    roulWheelAngle=wheelStart+(wheelTarget-wheelStart)*ease;
    const ballAngle=ballStart+(ballTarget-ballStart)*ease;
    const ballR=p<.6?(R=>{return R})(105):105-30*(p-.6)/.4; // ball falls inward
    drawRoulette(roulWheelAngle, ballAngle, ballR);
    if(p<1){requestAnimationFrame(animateWheel);}
    else{
      roulSpinning=false;
      document.getElementById('roulSpinBtn').disabled=false;
      const isRed=RED_S.has(num);
      const col=num===0?'var(--green)':isRed?'var(--red)':'#ccc';
      document.getElementById('roulNum').innerHTML=`<span style="color:${col};text-shadow:0 0 20px ${col}">${num===0?'':isRed?'':''} ${num}</span>`;
      let win=0,won=false;
      if(selBet==='red'&&isRed){win=bet*2;won=true;}
      else if(selBet==='black'&&!isRed&&num!==0){win=bet*2;won=true;}
      else if(selBet==='zero'&&num===0){win=bet*36;won=true;}
      else if(selBet==='odd'&&num>0&&num%2===1){win=bet*2;won=true;}
      else if(selBet==='even'&&num>0&&num%2===0){win=bet*2;won=true;}
      else if(selBet==='1-18'&&num>=1&&num<=18){win=bet*2;won=true;}
      else if(selBet==='19-36'&&num>=19&&num<=36){win=bet*2;won=true;}
      else if(selBet==='1st12'&&num>=1&&num<=12){win=bet*3;won=true;}
      else if(selBet==='2nd12'&&num>=13&&num<=24){win=bet*3;won=true;}
      if(won){chgBal(win);setResult('roulResult',` ! +${fmt(win)} `,'win');}
      else setResult('roulResult',' .    !','lose');
    }
  }
  drawRoulette(roulWheelAngle, 0, 105);
  requestAnimationFrame(animateWheel);
}

// ===================== BLACKJACK =====================
const SUITS=['','','',''],RANKS=['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
let bjDeck=[],bjP=[],bjD=[],bjGameOver=false,bjBetAmt=0;

function buildBlackjack(name){
  return `<div class="bj-table">
    <p class="game-subtitle">${name}   21   !</p>
    ${betRow('bjBet',50)}
    <div class="bj-zone"><div class="bj-label"> </div><div class="bj-cards" id="bjDCards"></div><div class="bj-score" id="bjDScore"></div></div>
    <div class="bj-zone"><div class="bj-label"> </div><div class="bj-cards" id="bjPCards"></div><div class="bj-score" id="bjPScore"></div></div>
    <div class="bj-result game-result" id="bjRes"></div>
    <div class="btns-row" id="bjBtns"><button class="action-btn btn-gold" onclick="bjDeal()"> </button></div>
  </div>`;
}
function bjInit(){}
function bjShuffle(){bjDeck=[];for(const s of SUITS)for(const r of RANKS)bjDeck.push({r,s});for(let i=bjDeck.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[bjDeck[i],bjDeck[j]]=[bjDeck[j],bjDeck[i]];}}
function bjDraw(){return bjDeck.pop();}
function bjVal(hand){let v=0,a=0;for(const c of hand){if(c.r==='A'){v+=11;a++;}else if(['J','Q','K'].includes(c.r))v+=10;else v+=parseInt(c.r);}while(v>21&&a>0){v-=10;a--;}return v;}
function bjCardH(c,hidden=false){
  if(hidden)return`<div class="card back"></div>`;
  const red=c.s===''||c.s==='';
  return`<div class="card${red?' red-c':''}"><div class="card-rank">${c.r}</div><div class="card-suit">${c.s}</div></div>`;
}
function bjRender(hideD=true){
  document.getElementById('bjPCards').innerHTML=bjP.map(c=>bjCardH(c)).join('');
  document.getElementById('bjDCards').innerHTML=bjD.map((c,i)=>i===1&&hideD?bjCardH(c,true):bjCardH(c)).join('');
  document.getElementById('bjPScore').textContent=': '+bjVal(bjP);
  document.getElementById('bjDScore').textContent=hideD?`: ${bjVal([bjD[0]])}+?`:`: ${bjVal(bjD)}`;
}
function bjDeal(){
  const bet=getBet('bjBet');
  if(!spendBet(bet)){setResult('bjRes','  !','lose');return;}
  bjGameOver=false; bjBetAmt=bet;
  bjShuffle(); bjP=[bjDraw(),bjDraw()]; bjD=[bjDraw(),bjDraw()];
  bjRender(true);
  document.getElementById('bjRes').textContent=''; document.getElementById('bjRes').className='bj-result game-result';
  document.getElementById('bjBtns').innerHTML=`
    <button class="action-btn btn-green" onclick="bjHit()"> </button>
    <button class="action-btn btn-red" onclick="bjStand()"> </button>
    <button class="action-btn btn-purple" onclick="bjDouble()"> </button>`;
  if(bjVal(bjP)===21)bjEnd(bet,true);
}
function bjHit(){if(bjGameOver)return;bjP.push(bjDraw());bjRender(true);if(bjVal(bjP)>21)bjEnd(bjBetAmt,false,true);}
function bjStand(){
  if(bjGameOver)return;
  while(bjVal(bjD)<17)bjD.push(bjDraw());
  bjEnd(bjBetAmt);
}
function bjDouble(){
  if(bjGameOver)return;
  const extra=getBet('bjBet');
  if(!spendBet(extra)){return;}
  bjBetAmt+=extra; bjP.push(bjDraw()); bjRender(true);
  if(bjVal(bjP)<=21)bjStand(); else bjEnd(bjBetAmt,false,true);
}
function bjEnd(bet,isBlack=false,bust=false){
  bjGameOver=true; bjRender(false);
  const pv=bjVal(bjP),dv=bjVal(bjD);
  let msg='',cls='';
  if(bust){msg=`  (${pv})! .`;cls='lose';}
  else if(isBlack){const w=Math.round(bet*2.5);chgBal(w);msg=` ! +${fmt(w)} `;cls='win';}
  else if(dv>21){chgBal(bet*2);msg=`  ! +${fmt(bet*2)} `;cls='win';}
  else if(pv>dv){chgBal(bet*2);msg=` ! +${fmt(bet*2)} `;cls='win';}
  else if(pv===dv){chgBal(bet);msg=` !  .`;cls='info';}
  else{msg=`   (${dv} > ${pv})`;cls='lose';}
  const el=document.getElementById('bjRes');el.textContent=msg;el.className='bj-result game-result '+cls;
  document.getElementById('bjBtns').innerHTML=`<button class="action-btn btn-gold" onclick="bjDeal()">  </button>`;
}

// ===================== BACCARAT =====================
function buildBaccarat(name){
  return `<div class="bacc-table">
    <p class="game-subtitle">${name}   vs    ?</p>
    ${betRow('baccBet',50)}
    <div style="font-size:13px;color:var(--muted);margin-bottom:10px;"> :</div>
    <div class="bacc-bets">
      <button class="bacc-bet-btn sel" id="baccBetP" onclick="selBacc('player',this)" style="border-color:var(--cyan);color:var(--cyan);">  (x2)</button>
      <button class="bacc-bet-btn" id="baccBetT" onclick="selBacc('tie',this)" style="border-color:var(--green);color:var(--green);">  (x9)</button>
      <button class="bacc-bet-btn" id="baccBetB" onclick="selBacc('banker',this)" style="border-color:var(--pink);color:var(--pink);">  (x1.95)</button>
    </div>
    <div class="bacc-zones">
      <div class="bacc-zone"><div class="bacc-zone-lbl"> </div><div class="bj-cards" id="baccPCards"></div><div class="bj-score" id="baccPScore" style="font-family:Orbitron,sans-serif;font-size:18px;margin-top:6px;">-</div></div>
      <div class="bacc-zone"><div class="bacc-zone-lbl"> </div><div class="bj-cards" id="baccBCards"></div><div class="bj-score" id="baccBScore" style="font-family:Orbitron,sans-serif;font-size:18px;margin-top:6px;">-</div></div>
    </div>
    <div class="game-result info" id="baccRes">    !</div>
    <div class="btns-row"><button class="action-btn btn-gold" onclick="baccDeal()"> </button></div>
  </div>`;
}
let baccSel='player';
function selBacc(type,btn){
  baccSel=type;
  document.querySelectorAll('.bacc-bet-btn').forEach(b=>b.classList.remove('sel'));
  btn.classList.add('sel');
}
function baccVal(hand){return hand.reduce((s,c)=>{const v=isNaN(c.r)?10:parseInt(c.r);return(s+v)%10;},0);}
function baccDeal(){
  const bet=getBet('baccBet');
  if(!spendBet(bet)){setResult('baccRes','  !','lose');return;}
  bjShuffle();
  const p=[bjDraw(),bjDraw()],bank=[bjDraw(),bjDraw()];
  const pv=baccVal(p),bv=baccVal(bank);
  document.getElementById('baccPCards').innerHTML=p.map(c=>bjCardH(c)).join('');
  document.getElementById('baccBCards').innerHTML=bank.map(c=>bjCardH(c)).join('');
  document.getElementById('baccPScore').textContent=pv;
  document.getElementById('baccBScore').textContent=bv;
  let win=0,msg='',cls='';
  const winner=pv>bv?'player':bv>pv?'banker':'tie';
  if(baccSel==='player'&&winner==='player'){win=bet*2;cls='win';}
  else if(baccSel==='banker'&&winner==='banker'){win=Math.round(bet*1.95);cls='win';}
  else if(baccSel==='tie'&&winner==='tie'){win=bet*9;cls='win';}
  if(win>0){chgBal(win);msg=` ${winner==='player'?'':winner==='banker'?'':''} ! +${fmt(win)} `;}
  else msg=` ${winner==='player'?'':winner==='banker'?'':''} . .`;
  setResult('baccRes',msg,win>0?'win':'lose');
}

// ===================== WHEEL OF FORTUNE =====================
const WOF_SEGS=['1x','2x','1x','3x','1x','2x','5x','1x','2x','10x','1x','3x','1x','2x','1x','0x'];
function buildWOF(name){
  const colors=['#7c3aed','#ec4899','#2563eb','#059669','#d97706','#dc2626','#7c3aed','#ec4899','#2563eb','#059669','#d97706','#dc2626','#7c3aed','#ec4899','#2563eb','#111'];
  const n=WOF_SEGS.length, angle=360/n;
  let svg=`<svg viewBox="0 0 200 200" style="width:220px;height:220px;border-radius:50%;display:block;margin:0 auto;" id="wofSvg">`;
  for(let i=0;i<n;i++){
    const a1=(i*angle-90)*Math.PI/180,a2=((i+1)*angle-90)*Math.PI/180;
    const x1=100+100*Math.cos(a1),y1=100+100*Math.sin(a1),x2=100+100*Math.cos(a2),y2=100+100*Math.sin(a2);
    const mid=(a1+a2)/2;const tx=100+70*Math.cos(mid),ty=100+70*Math.sin(mid);
    svg+=`<path d="M100,100 L${x1},${y1} A100,100 0 0,1 ${x2},${y2} Z" fill="${colors[i]}"/>`;
    svg+=`<text x="${tx}" y="${ty}" text-anchor="middle" dy=".4em" fill="#fff" font-size="12" font-weight="700" font-family="Orbitron,sans-serif">${WOF_SEGS[i]}</text>`;
  }
  svg+=`<circle cx="100" cy="100" r="15" fill="#111" stroke="${'#f59e0b'}" stroke-width="3"/></svg>`;
  return `<div class="wof-wrap">
    <p class="game-subtitle">${name}   !</p>
    ${betRow('wofBet',50)}
    <div style="position:relative;display:inline-block;transition:transform 4s cubic-bezier(.17,.67,.12,1);" id="wofWheelWrap">
      <div style="position:absolute;top:-16px;left:50%;transform:translateX(-50%);font-size:22px;z-index:10;"></div>
      ${svg}
    </div>
    <div class="game-result info" id="wofRes" style="margin-top:12px;"> !</div>
    <div class="btns-row"><button class="action-btn btn-gold" id="wofBtn" onclick="doWOF()"> </button></div>
  </div>`;
}
let wofRot=0;
function doWOF(){
  const bet=getBet('wofBet');
  if(!spendBet(bet)){setResult('wofRes','  !','lose');return;}
  document.getElementById('wofBtn').disabled=true;
  const idx=Math.floor(Math.random()*WOF_SEGS.length);
  const n=WOF_SEGS.length,angle=360/n;
  const target=360*5+(n-idx)*angle-(angle/2);
  wofRot+=target;
  document.getElementById('wofWheelWrap').style.transform=`rotate(${wofRot}deg)`;
  setTimeout(()=>{
    document.getElementById('wofBtn').disabled=false;
    const seg=WOF_SEGS[idx];
    const mult=parseFloat(seg);
    const win=mult>0?Math.round(bet*mult):0;
    if(win>0){chgBal(win);setResult('wofRes',` ${seg}   +${fmt(win)} `,'win');}
    else setResult('wofRes',` ${seg}   `,'lose');
  },4300);
}

// ===================== AVIATOR PREMIUM =====================
let aviMult=1,aviRunning=false,aviActive=false,aviBet=0,aviHistory=[1.23,4.56,1.02,8.77,2.34,1.08,15.3,1.67];
let aviCanvas=null,aviCtx=null,aviCurvePoints=[],aviStartTime=0,aviCrashMultiplier=1,aviAnimId=null;
let aviPlaneX=0,aviPlaneY=0;

function buildAviator(name){
  return `<div style="text-align:center;">
    <p class="game-subtitle">${name}     !</p>
    <div class="avi-screen" id="aviScreen">
      <div class="avi-grid-bg"></div>
      <canvas id="aviCanvas" style="position:absolute;inset:0;width:100%;height:100%;z-index:3;"></canvas>
      <div class="avi-mult" id="aviMult">1.00x</div>
      <div class="avi-countdown" id="aviCountdown" style="display:none;"> ...</div>
    </div>
    <div class="avi-history" id="aviHist"></div>
    ${betRow('aviBet',50)}
    <div class="btns-row">
      <button class="action-btn btn-gold" id="aviBetBtn" onclick="aviMakeBet()" style="font-size:17px;padding:13px 36px;"> </button>
      <button class="action-btn btn-green" id="aviCashBtn" onclick="aviCash()" disabled>  (<span id="aviCashM">1.00</span>x)</button>
    </div>
    <div class="game-result info" id="aviRes">    !</div>
  </div>`;
}

function aviInitCanvas(){
  const screen=document.getElementById('aviScreen');
  aviCanvas=document.getElementById('aviCanvas');
  if(!aviCanvas||!screen)return;
  aviCanvas.width=screen.clientWidth||500;
  aviCanvas.height=screen.clientHeight||240;
  aviCtx=aviCanvas.getContext('2d');
}

function aviRenderHist(){
  const h=document.getElementById('aviHist');
  if(!h)return;
  h.innerHTML=aviHistory.slice(-14).reverse().map(m=>`<span class="avi-chip ${m>=2?'high':'low'}">${m.toFixed(2)}x</span>`).join('');
}

function aviDrawFrame(){
  if(!aviCtx||!aviCanvas)return;
  const W=aviCanvas.width,H=aviCanvas.height;
  aviCtx.clearRect(0,0,W,H);
  
  if(aviCurvePoints.length<2)return;
  
  // Draw gradient fill under curve
  const grad=aviCtx.createLinearGradient(0,0,0,H);
  if(aviActive||aviRunning){
    grad.addColorStop(0,'rgba(245,158,11,0.25)');
    grad.addColorStop(1,'rgba(245,158,11,0)');
  } else {
    grad.addColorStop(0,'rgba(239,68,68,0.2)');
    grad.addColorStop(1,'rgba(239,68,68,0)');
  }
  
  aviCtx.beginPath();
  aviCtx.moveTo(aviCurvePoints[0].x,H);
  aviCurvePoints.forEach(p=>aviCtx.lineTo(p.x,p.y));
  aviCtx.lineTo(aviCurvePoints[aviCurvePoints.length-1].x,H);
  aviCtx.closePath();
  aviCtx.fillStyle=grad;
  aviCtx.fill();
  
  // Draw curve line
  aviCtx.beginPath();
  aviCtx.moveTo(aviCurvePoints[0].x,aviCurvePoints[0].y);
  aviCurvePoints.forEach(p=>aviCtx.lineTo(p.x,p.y));
  aviCtx.strokeStyle=aviActive||aviRunning?'rgba(245,158,11,0.9)':'rgba(239,68,68,0.9)';
  aviCtx.lineWidth=3;
  aviCtx.shadowBlur=12;
  aviCtx.shadowColor=aviActive||aviRunning?'rgba(245,158,11,0.6)':'rgba(239,68,68,0.6)';
  aviCtx.stroke();
  aviCtx.shadowBlur=0;
  
  // Draw plane at tip of curve
  const last=aviCurvePoints[aviCurvePoints.length-1];
  if((aviActive||aviRunning)&&last){
    // plane glow
    aviCtx.save();
    aviCtx.translate(last.x,last.y);
    // calc angle from last 2 points
    if(aviCurvePoints.length>1){
      const prev=aviCurvePoints[aviCurvePoints.length-2];
      const ang=Math.atan2(last.y-prev.y,last.x-prev.x);
      aviCtx.rotate(ang);
    }
    // draw plane emoji style
    aviCtx.font='26px serif';
    aviCtx.textAlign='center';
    aviCtx.textBaseline='middle';
    aviCtx.shadowBlur=15;aviCtx.shadowColor='rgba(100,200,255,0.8)';
    aviCtx.fillText('',-10,-12);
    aviCtx.shadowBlur=0;
    // exhaust
    const exGrad=aviCtx.createLinearGradient(0,0,-35,0);
    exGrad.addColorStop(0,'rgba(255,120,20,0)');
    exGrad.addColorStop(1,'rgba(255,80,0,0.7)');
    aviCtx.fillStyle=exGrad;
    aviCtx.fillRect(-35,-4,35,8);
    aviCtx.restore();
  }
}

function aviMult2Y(m){
  const H=aviCanvas?aviCanvas.height:240;
  // logarithmic mapping: mult 1 -> bottom, higher -> top
  return H-20-(Math.log(m)*60);
}

function aviMult2X(m,crashMult){
  const W=aviCanvas?aviCanvas.width:500;
  const progress=(m-1)/(crashMult-1+0.0001);
  return 30+progress*(W-60);
}

function aviCrashAt(){const r=Math.random();if(r<0.35)return 1+Math.random()*.45;if(r<0.6)return 1.5+Math.random()*1.5;if(r<0.8)return 3+Math.random()*5;if(r<0.93)return 8+Math.random()*15;return 25+Math.random()*80;}

function aviInit(){aviRenderHist();aviInitCanvas();aviStartRound();}

function aviStartRound(){
  aviMult=1;aviRunning=true;aviActive=false;aviCurvePoints=[];
  aviCrashMultiplier=aviCrashAt();
  const multEl=document.getElementById('aviMult');
  const betBtn=document.getElementById('aviBetBtn');
  const cashBtn=document.getElementById('aviCashBtn');
  const cd=document.getElementById('aviCountdown');
  if(multEl){multEl.className='avi-mult';multEl.textContent='1.00x';}
  if(betBtn)betBtn.disabled=false;
  if(cashBtn)cashBtn.disabled=true;
  if(cd)cd.style.display='none';
  
  // Add fake player bets
  const fakeNames=['Alex','Sasha','Mike','Katya','Ivan'];
  const fakeContainer=document.getElementById('aviScreen');
  if(fakeContainer){
    const existingFakes=fakeContainer.querySelectorAll('.avi-player-bet');
    existingFakes.forEach(e=>e.remove());
    const fakesDiv=document.createElement('div');
    fakesDiv.className='avi-players';
    fakeNames.slice(0,3).forEach(n=>{
      const b=document.createElement('div');b.className='avi-player-bet';
      const amt=Math.floor(Math.random()*500+50);
      b.textContent=`${n}: ${amt}`;fakesDiv.appendChild(b);
    });
    fakeContainer.appendChild(fakesDiv);
  }
  
  aviStartTime=Date.now();
  if(aviAnimId)cancelAnimationFrame(aviAnimId);
  
  function tick(){
    if(!document.getElementById('aviMult')){return;}
    const elapsed=(Date.now()-aviStartTime)/1000;
    aviMult=Math.round(Math.pow(1.06,elapsed*8)*100)/100;
    if(aviMult>=aviCrashMultiplier){aviMult=aviCrashMultiplier;aviCrash(aviCrashMultiplier);return;}
    
    if(aviCtx&&aviCanvas){
      const x=aviMult2X(aviMult,aviCrashMultiplier);
      const y=aviMult2Y(aviMult);
      aviCurvePoints.push({x,y});
      aviDrawFrame();
    }
    
    const multEl=document.getElementById('aviMult');
    const cashM=document.getElementById('aviCashM');
    if(multEl)multEl.textContent=aviMult.toFixed(2)+'x';
    if(cashM)cashM.textContent=aviMult.toFixed(2);
    aviAnimId=requestAnimationFrame(tick);
  }
  aviAnimId=requestAnimationFrame(tick);
  if(aviAnimId)addInterval(aviAnimId);
}

function aviMakeBet(){
  const bet=getBet('aviBet');
  if(!spendBet(bet)){setResult('aviRes','  !','lose');return;}
  aviBet=bet;aviActive=true;
  const b=document.getElementById('aviBetBtn');if(b){b.disabled=true;b.textContent='  ';}
  const cb=document.getElementById('aviCashBtn');if(cb)cb.disabled=false;
  setResult('aviRes',` ${fmt(bet)} .  ...`,'info');
}

function aviCash(){
  if(!aviActive)return;aviActive=false;
  const win=Math.round(aviBet*aviMult*100)/100;
  chgBal(win);
  setResult('aviRes',`  x${aviMult.toFixed(2)} = +${fmt(win)} `,'win');
  document.getElementById('aviCashBtn').disabled=true;
  spawnCoins(10, document.getElementById('aviScreen'));
}

function aviCrash(m){
  aviRunning=false;
  if(aviAnimId)cancelAnimationFrame(aviAnimId);
  // draw final frame with red
  if(aviCtx&&aviCanvas){
    const x=aviCanvas.width-30;
    const y=aviMult2Y(m);
    aviCurvePoints.push({x,y});
    aviDrawFrame();
    // explosion effect
    const ctx=aviCtx;
    const grad=ctx.createRadialGradient(x,y,0,x,y,50);
    grad.addColorStop(0,'rgba(239,68,68,0.8)');grad.addColorStop(.5,'rgba(239,68,68,0.3)');grad.addColorStop(1,'rgba(239,68,68,0)');
    ctx.beginPath();ctx.arc(x,y,50,0,Math.PI*2);ctx.fillStyle=grad;ctx.fill();
  }
  const el=document.getElementById('aviMult');
  if(el){el.className='avi-mult crashed';el.textContent=` ${m.toFixed(2)}x`;}
  aviHistory.push(m);aviRenderHist();
  if(aviActive){aviActive=false;setResult('aviRes',`   ${m.toFixed(2)}x!  .`,'lose');}
  document.getElementById('aviCashBtn').disabled=true;
  const b=document.getElementById('aviBetBtn');if(b){b.disabled=false;b.textContent=' ';}
  const cd=document.getElementById('aviCountdown');if(cd){cd.style.display='block';cd.textContent='   3...';}
  setTimeout(()=>{if(document.getElementById('aviMult')){aviInitCanvas();aviStartRound();}},3000);
}

// ===================== MINES PREMIUM =====================
let minesGrid=[],minesActive=false,minesRev=0,minesBet=0,minesCount=5;
const MTOT=25;
function buildMines(name){
  return `<div style="text-align:center;">
    <p class="game-subtitle"> ${name}   ,  !</p>
    <div style="margin-bottom:10px;">
      <div style="font-size:11px;color:var(--muted);margin-bottom:6px;text-transform:uppercase;letter-spacing:1px;"> :</div>
      <div class="mines-count-sel">
        ${[1,3,5,10,15,20].map(n=>`<button class="mines-count-btn${n===5?' active':''}" onclick="setMinesCount(${n},this)">${n}</button>`).join('')}
      </div>
    </div>
    ${betRow('minesBet',50)}
    <div class="mines-field">
      <div class="mines-info-bar">
        <div class="mines-stat"><div style="font-size:11px;color:var(--muted)"></div><div class="mines-stat-val" id="minesRevCount">0</div></div>
        <div class="mines-stat"><div style="font-size:11px;color:var(--muted)"></div><div class="mines-stat-val" id="minesCurMult">-</div></div>
        <div class="mines-stat"><div style="font-size:11px;color:var(--muted)"></div><div class="mines-stat-val" id="minesPot">-</div></div>
      </div>
      <div class="mines-grid" id="minesGrid"></div>
    </div>
    <div class="mines-mult" id="minesMult"> -    !</div>
    <div class="btns-row">
      <button class="action-btn btn-gold" id="minesStartBtn" onclick="minesStart()" style="font-size:17px;padding:13px 36px;"> </button>
      <button class="action-btn btn-green" id="minesCashBtn" onclick="minesCash()" disabled> </button>
    </div>
    <div class="game-result info" id="minesRes"></div>
  </div>`;
}
function setMinesCount(n, btn){
  if(minesActive)return;
  minesCount=n;
  document.querySelectorAll('.mines-count-btn').forEach(b=>b.classList.remove('active'));
  if(btn)btn.classList.add('active');
}
function minesInit(){renderMinesGrid(false);}
function minesMult(rev){const safe=MTOT-minesCount;let m=1;for(let i=0;i<rev;i++)m*=(MTOT-minesCount-i)/(MTOT-i);return Math.round((1/m)*0.97*100)/100;}
function renderMinesGrid(active){
  const g=document.getElementById('minesGrid');if(!g)return;g.innerHTML='';
  for(let i=0;i<MTOT;i++){const c=document.createElement('div');c.className='mcell';c.dataset.i=i;if(active)c.onclick=()=>minesReveal(i);c.textContent='';g.appendChild(c);}
}
function minesStart(){
  const bet=getBet('minesBet');if(!spendBet(bet)){setResult('minesRes','  !','lose');return;}
  minesBet=bet;minesRev=0;minesActive=true;
  minesGrid=Array(MTOT).fill(false);
  let pl=0;while(pl<minesCount){const i=Math.floor(Math.random()*MTOT);if(!minesGrid[i]){minesGrid[i]=true;pl++;}}
  renderMinesGrid(true);
  document.getElementById('minesStartBtn').disabled=true;document.getElementById('minesCashBtn').disabled=false;
  const m=minesMult(0);
  document.getElementById('minesMult').textContent=`: ${fmt(bet)}   ${minesCount}    !`;
  document.getElementById('minesRevCount').textContent='0';
  document.getElementById('minesCurMult').textContent='x1.00';
  document.getElementById('minesPot').textContent=fmt(bet)+' ';
  setResult('minesRes','','');
}
function minesReveal(idx){
  if(!minesActive)return;
  const cell=document.querySelector(`.mcell[data-i="${idx}"]`);
  if(!cell||cell.classList.contains('revealed'))return;
  cell.classList.add('revealed');cell.onclick=null;
  if(minesGrid[idx]){
    cell.classList.add('bomb');cell.textContent='';minesActive=false;
    // reveal all mines with delay
    document.querySelectorAll('.mcell').forEach((c,i)=>{
      setTimeout(()=>{if(minesGrid[i]){c.textContent='';c.classList.add('bomb','revealed');}},Math.random()*400);
    });
    setResult('minesRes',` ! ${fmt(minesBet)}  .`,'lose');
    document.getElementById('minesStartBtn').disabled=false;document.getElementById('minesCashBtn').disabled=true;
    document.getElementById('minesMult').textContent='  !';
    document.getElementById('minesCurMult').textContent='0x';
  } else {
    // sparkle effect
    const rect=cell.getBoundingClientRect();
    for(let i=0;i<5;i++){
      const sp=document.createElement('div');sp.className='gem-sparkle';
      sp.textContent=['','',''][Math.floor(Math.random()*3)];
      sp.style.left=(rect.left+Math.random()*rect.width)+'px';
      sp.style.top=(rect.top+Math.random()*rect.height)+'px';
      sp.style.animationDelay=(Math.random()*.3)+'s';
      document.body.appendChild(sp);setTimeout(()=>sp.remove(),1200);
    }
    cell.classList.add('gem');cell.textContent='';minesRev++;
    const m=minesMult(minesRev),pot=Math.round(minesBet*m*100)/100;
    document.getElementById('minesRevCount').textContent=minesRev;
    document.getElementById('minesCurMult').textContent='x'+m.toFixed(2);
    document.getElementById('minesPot').textContent=fmt(pot)+' ';
    document.getElementById('minesMult').textContent=`: ${minesRev}   : ${fmt(pot)}  (x${m.toFixed(2)})`;
    setResult('minesRes',` ! : +${fmt(pot)} `,'win');
    if(minesRev===MTOT-minesCount)minesCash(true);
  }
}
function minesCash(){
  if(!minesActive)return;minesActive=false;
  const m=minesMult(minesRev),win=Math.round(minesBet*m*100)/100;
  chgBal(win);setResult('minesRes',` ! x${m.toFixed(2)} = +${fmt(win)} `,'win');
  document.getElementById('minesStartBtn').disabled=false;document.getElementById('minesCashBtn').disabled=true;
  document.querySelectorAll('.mcell').forEach((c,i)=>{if(minesGrid[i]){c.textContent='';c.classList.add('bomb');}c.onclick=null;});
  document.getElementById('minesMult').textContent=` : ${fmt(win)}  (x${m.toFixed(2)})`;
  spawnCoins(12, document.getElementById('minesGrid'));
}

// ===================== PLINKO PREMIUM =====================
function buildPlinko(name){
  return `<div class="plinko-wrap">
    <p class="game-subtitle">${name}   ,    !</p>
    ${betRow('plinkoBet',50)}
    <div class="plinko-container">
      <canvas id="plinkoCanvas" width="380" height="340" style="max-width:100%;"></canvas>
    </div>
    <div style="display:flex;gap:3px;justify-content:center;margin-top:6px;padding:0 12px;" id="plinkoBuckets"></div>
    <div class="game-result info" id="plinkoRes"> !</div>
    <div class="btns-row"><button class="action-btn btn-gold" id="plinkoDrop" onclick="doPlinko()" style="font-size:17px;padding:13px 36px;"> </button></div>
  </div>`;
}
const PLINKO_MULTS=[10,5,2,1.5,1,0.5,1,1.5,2,5,10];
const PLINKO_ROWS=8;

function plinkoInit(){
  const canvas=document.getElementById('plinkoCanvas');if(!canvas)return;
  const ctx=canvas.getContext('2d');
  drawPlinkoBoard(ctx,null);
  buildPlinkoBuckets();
}

function buildPlinkoBuckets(){
  const bEl=document.getElementById('plinkoBuckets');if(!bEl)return;
  bEl.innerHTML=PLINKO_MULTS.map((m,i)=>{
    const hue=m>=5?'linear-gradient(135deg,#f59e0b,#d97706)':m>=2?'linear-gradient(135deg,#10b981,#059669)':'linear-gradient(135deg,#7c3aed,#6d28d9)';
    return`<div class="pbucket" style="background:${hue};color:#fff;font-family:'Orbitron',sans-serif;" id="pbucket${i}">${m}x</div>`;
  }).join('');
}

function drawPlinkoBoard(ctx, ballPos){
  const W=380,H=340;
  ctx.clearRect(0,0,W,H);
  
  // Background gradient
  const bg=ctx.createLinearGradient(0,0,0,H);
  bg.addColorStop(0,'rgba(2,2,25,1)');bg.addColorStop(1,'rgba(5,5,30,1)');
  ctx.fillStyle=bg;ctx.fillRect(0,0,W,H);
  
  // Grid lines subtle
  ctx.strokeStyle='rgba(168,85,247,0.04)';ctx.lineWidth=1;
  for(let y=0;y<H;y+=30){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke();}
  
  // Draw pegs
  const pegR=5;
  for(let r=1;r<=PLINKO_ROWS;r++){
    const pegs=r+2;
    const startX=(W-(pegs-1)*34)/2;
    const y=r*32+10;
    for(let p=0;p<pegs;p++){
      const x=startX+p*34;
      // Peg glow
      const pegGrad=ctx.createRadialGradient(x,y,0,x,y,pegR+4);
      pegGrad.addColorStop(0,'rgba(168,85,247,0.4)');pegGrad.addColorStop(1,'rgba(168,85,247,0)');
      ctx.beginPath();ctx.arc(x,y,pegR+4,0,Math.PI*2);ctx.fillStyle=pegGrad;ctx.fill();
      // Peg
      const pGrad=ctx.createRadialGradient(x-1,y-1,0,x,y,pegR);
      pGrad.addColorStop(0,'rgba(220,180,255,1)');pGrad.addColorStop(1,'rgba(140,80,220,1)');
      ctx.beginPath();ctx.arc(x,y,pegR,0,Math.PI*2);ctx.fillStyle=pGrad;ctx.fill();
    }
  }
  
  // Draw ball if position given
  if(ballPos){
    const {x,y,trail}=ballPos;
    // Trail
    if(trail&&trail.length>1){
      for(let i=1;i<trail.length;i++){
        const alpha=(i/trail.length)*0.5;
        ctx.beginPath();ctx.arc(trail[i].x,trail[i].y,4*(i/trail.length),0,Math.PI*2);
        ctx.fillStyle=`rgba(245,158,11,${alpha})`;ctx.fill();
      }
    }
    // Ball glow
    const ballGlowGrad=ctx.createRadialGradient(x,y,0,x,y,16);
    ballGlowGrad.addColorStop(0,'rgba(245,158,11,0.5)');ballGlowGrad.addColorStop(1,'rgba(245,158,11,0)');
    ctx.beginPath();ctx.arc(x,y,16,0,Math.PI*2);ctx.fillStyle=ballGlowGrad;ctx.fill();
    // Ball
    const ballGrad=ctx.createRadialGradient(x-3,y-3,1,x,y,9);
    ballGrad.addColorStop(0,'#fff8c0');ballGrad.addColorStop(.4,'#f59e0b');ballGrad.addColorStop(1,'#d97706');
    ctx.beginPath();ctx.arc(x,y,9,0,Math.PI*2);ctx.fillStyle=ballGrad;ctx.fill();
    ctx.strokeStyle='rgba(0,0,0,0.4)';ctx.lineWidth=1;ctx.stroke();
  }
}

function doPlinko(){
  const bet=getBet('plinkoBet');
  if(!spendBet(bet)){setResult('plinkoRes','  !','lose');return;}
  document.getElementById('plinkoDrop').disabled=true;
  const canvas=document.getElementById('plinkoCanvas');if(!canvas)return;
  const ctx=canvas.getContext('2d');
  const W=380;
  
  // Compute path through pegs
  let bucketIdx=Math.floor(PLINKO_MULTS.length/2);
  const path=[];
  let cx=W/2,cy=15;
  path.push({x:cx,y:cy});
  for(let r=1;r<=PLINKO_ROWS;r++){
    const pegs=r+2;
    const startX=(W-(pegs-1)*34)/2;
    const y=r*32+10;
    // find nearest peg
    const dir=Math.random()<0.5?-1:1;
    cx+=dir*17;
    cx=Math.max(30,Math.min(W-30,cx));
    path.push({x:cx,y});
    if(dir<0)bucketIdx=Math.max(0,bucketIdx-1);
    else bucketIdx=Math.min(PLINKO_MULTS.length-1,bucketIdx+1);
  }
  // final to bucket
  const bucketX=40+bucketIdx*((W-80)/(PLINKO_MULTS.length-1));
  path.push({x:bucketX,y:320});
  
  let pi=0,bx=path[0].x,by=path[0].y;
  const trail=[];
  const anim=()=>{
    if(pi>=path.length||!document.getElementById('plinkoCanvas')){return;}
    const target=path[pi];
    const dx=target.x-bx,dy=target.y-by,dist=Math.sqrt(dx*dx+dy*dy);
    if(dist<6){bx=target.x;by=target.y;pi++;}
    else{bx+=dx/dist*7;by+=dy/dist*7;}
    trail.push({x:bx,y:by});
    if(trail.length>15)trail.shift();
    drawPlinkoBoard(ctx,{x:bx,y:by,trail:[...trail]});
    if(pi<path.length){requestAnimationFrame(anim);}
    else{
      document.getElementById('plinkoDrop').disabled=false;
      const mult=PLINKO_MULTS[bucketIdx];
      const win=Math.round(bet*mult*100)/100;
      // flash bucket
      const bEl=document.getElementById('pbucket'+bucketIdx);
      if(bEl){bEl.classList.add('hit');setTimeout(()=>bEl.classList.remove('hit'),600);}
      if(win>0){chgBal(win);setResult('plinkoRes',`  x${mult}  +${fmt(win)} `,'win');spawnCoins(8,canvas);}
      else setResult('plinkoRes',` x${mult}   `,'lose');
    }
  };
  requestAnimationFrame(anim);
}

// ===================== HI-LO =====================
let hiloCard=null,hiloMult=1,hiloActive=false,hiloBet=0,hiloHistory=[];
function buildHiLo(name){
  return `<div class="hilo-wrap">
    <p class="game-subtitle">${name}  :     ?</p>
    ${betRow('hiloBet',50)}
    <div class="hilo-card-area">
      <div>
        <div class="hilo-big-card" id="hiloCard" style="width:90px;height:126px;background:#fff;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#000;font-weight:900;font-size:30px;box-shadow:0 8px 30px rgba(0,0,0,.6);">?</div>
      </div>
      <div>
        <div class="hilo-mult" id="hiloMultEl">x1.00</div>
        <div style="font-size:12px;color:var(--muted);margin-top:4px;"></div>
      </div>
    </div>
    <div class="hilo-history" id="hiloHistory"></div>
    <div class="game-result info" id="hiloRes"> !</div>
    <div class="btns-row" id="hiloBtns">
      <button class="action-btn btn-gold" onclick="hiloStart()"> </button>
    </div>
  </div>`;
}
function hiloInit(){}
function hiloStart(){
  const bet=getBet('hiloBet');
  if(!spendBet(bet)){setResult('hiloRes','  !','lose');return;}
  hiloBet=bet;hiloMult=1;hiloHistory=[];hiloActive=true;
  hiloCard=hiloRandCard();
  hiloRender();
  setResult('hiloRes','    ?','info');
  document.getElementById('hiloBtns').innerHTML=`
    <button class="action-btn btn-green" onclick="hiloGuess('high')"> </button>
    <button class="action-btn btn-red" onclick="hiloGuess('same')"> </button>
    <button class="action-btn btn-blue" onclick="hiloGuess('low')"> </button>
    <button class="action-btn btn-gold" onclick="hiloCash()"> </button>`;
}
function hiloRandCard(){return{r:RANKS[Math.floor(Math.random()*RANKS.length)],s:SUITS[Math.floor(Math.random()*SUITS.length)]};}
function hiloNumVal(r){if(r==='A')return 1;if(['J','Q','K'].includes(r))return 10+['J','Q','K'].indexOf(r);return parseInt(r);}
function hiloRender(){
  const c=hiloCard;const red=c.s===''||c.s==='';
  const el=document.getElementById('hiloCard');
  if(el)el.innerHTML=`<div style="font-size:26px;color:${red?'#cc0000':'#000'}">${c.r}</div><div style="font-size:22px;">${c.s}</div>`;
  const me=document.getElementById('hiloMultEl');if(me)me.textContent=`x${hiloMult.toFixed(2)}`;
  const h=document.getElementById('hiloHistory');
  if(h)h.innerHTML=hiloHistory.slice(-8).map(hh=>`<div class="hilo-chip" style="background:${hh.r?'rgba(16,185,129,.3)':'rgba(239,68,68,.3)'};border:1px solid ${hh.r?'var(--green)':'var(--red)'};border-radius:6px;padding:3px 8px;font-size:12px;font-weight:700;">${hh.v}</div>`).join('');
}
function hiloGuess(guess){
  if(!hiloActive)return;
  const prev=hiloNumVal(hiloCard.r);
  const next=hiloRandCard();const nextV=hiloNumVal(next.r);
  let correct=false;
  if(guess==='high'&&nextV>prev)correct=true;
  else if(guess==='low'&&nextV<prev)correct=true;
  else if(guess==='same'&&nextV===prev)correct=true;
  hiloHistory.push({r:correct,v:`${next.r}${next.s}`});
  hiloCard=next;
  if(correct){
    const mults={high:1.5,low:1.5,same:5};
    hiloMult=Math.round(hiloMult*mults[guess]*100)/100;
    hiloRender();setResult('hiloRes',` !  x${hiloMult.toFixed(2)}`,'win');
  } else {
    hiloActive=false;hiloRender();
    setResult('hiloRes',` ! ${next.r}${next.s}   ${fmt(hiloBet)}  .`,'lose');
    document.getElementById('hiloBtns').innerHTML=`<button class="action-btn btn-gold" onclick="hiloStart()"> </button>`;
  }
}
function hiloCash(){
  if(!hiloActive)return;hiloActive=false;
  const win=Math.round(hiloBet*hiloMult*100)/100;chgBal(win);
  setResult('hiloRes',`  x${hiloMult.toFixed(2)} = +${fmt(win)} `,'win');
  document.getElementById('hiloBtns').innerHTML=`<button class="action-btn btn-gold" onclick="hiloStart()"> </button>`;
}

// ===================== VIDEO POKER =====================
let vpHand=[],vpHeld=[],vpDealt=false;
function buildVideoPoker(name){
  return `<div class="vp-wrap">
    <p class="game-subtitle">${name}      !</p>
    ${betRow('vpBet',50)}
    <div class="vp-cards" id="vpCards"></div>
    <div class="vp-hand" id="vpHand"> </div>
    <div class="game-result info" id="vpRes"></div>
    <div class="btns-row"><button class="action-btn btn-gold" id="vpBtn" onclick="vpAction()"> </button></div>
    <div class="paytable" style="max-width:400px;margin:12px auto 0;"><h4> </h4>
      <div class="pay-row"><span>  </span><span style="color:var(--gold);font-weight:700;">x800</span></div>
      <div class="pay-row"><span>  </span><span style="color:var(--gold);font-weight:700;">x50</span></div>
      <div class="pay-row"><span> </span><span style="color:var(--gold);font-weight:700;">x25</span></div>
      <div class="pay-row"><span>  </span><span style="color:var(--gold);font-weight:700;">x9</span></div>
      <div class="pay-row"><span> </span><span style="color:var(--gold);font-weight:700;">x6</span></div>
      <div class="pay-row"><span> </span><span style="color:var(--gold);font-weight:700;">x4</span></div>
      <div class="pay-row"><span>3 </span><span style="color:var(--gold);font-weight:700;">x3</span></div>
      <div class="pay-row"><span>2  </span><span style="color:var(--gold);font-weight:700;">x2</span></div>
      <div class="pay-row"><span>  JJ-AA</span><span style="color:var(--gold);font-weight:700;">x1</span></div>
    </div>
  </div>`;
}
function vpInit(){vpHand=[];vpHeld=[];vpDealt=false;renderVP();}
function renderVP(){
  const el=document.getElementById('vpCards');if(!el)return;
  el.innerHTML=vpHand.map((c,i)=>{
    const red=c&&(c.s===''||c.s==='');
    const held=vpHeld[i];
    return`<div class="vp-card-wrap">
      <div class="vp-card${red?' red-c':''}${held?' held':''}${!c?' back':''}" onclick="vpToggleHold(${i})" style="width:60px;height:84px;">
        ${c?`<div class="card-rank" style="font-size:13px;">${c.r}</div><div class="card-suit" style="position:absolute;bottom:4px;right:5px;font-size:16px;">${c.s}</div>`:''}
      </div>
      <div class="vp-hold-lbl">${vpDealt&&held?'':''}</div>
    </div>`;
  }).join('');
}
function vpToggleHold(i){if(!vpDealt)return;vpHeld[i]=!vpHeld[i];renderVP();}
function vpAction(){
  const btn=document.getElementById('vpBtn');
  if(!vpDealt){
    const bet=getBet('vpBet');if(!spendBet(bet)){setResult('vpRes','  !','lose');return;}
    bjShuffle();vpHand=[bjDraw(),bjDraw(),bjDraw(),bjDraw(),bjDraw()];vpHeld=[false,false,false,false,false];vpDealt=true;
    renderVP();btn.textContent=' ';document.getElementById('vpHand').textContent='   ';
    setResult('vpRes','    ,  ','info');
  } else {
    // Replace unkept
    for(let i=0;i<5;i++)if(!vpHeld[i])vpHand[i]=bjDraw();
    vpDealt=false;renderVP();btn.textContent=' ';
    const combo=vpEval(vpHand);
    document.getElementById('vpHand').textContent=combo.name;
    const bet=getBet('vpBet');
    if(combo.mult>0){const win=Math.round(bet*combo.mult);chgBal(win);setResult('vpRes',` ${combo.name}! +${fmt(win)} `,'win');}
    else setResult('vpRes',` ${combo.name}   `,'lose');
  }
}
function vpEval(hand){
  const vals=hand.map(c=>{if(c.r==='A')return 14;if(c.r==='K')return 13;if(c.r==='Q')return 12;if(c.r==='J')return 11;return parseInt(c.r);});
  const suits=hand.map(c=>c.s);
  const sorted=[...vals].sort((a,b)=>a-b);
  const isFlush=suits.every(s=>s===suits[0]);
  const isStraight=sorted.every((v,i)=>i===0||v===sorted[i-1]+1)||(sorted[0]===2&&sorted[4]===14&&sorted[3]===5);
  const counts={};vals.forEach(v=>counts[v]=(counts[v]||0)+1);
  const cv=Object.values(counts).sort((a,b)=>b-a);
  const pairs=Object.entries(counts).filter(([v,c])=>c>=2).map(([v])=>parseInt(v));
  if(isFlush&&isStraight&&sorted[0]===10)return{name:'  ',mult:800};
  if(isFlush&&isStraight)return{name:'  ',mult:50};
  if(cv[0]===4)return{name:' ',mult:25};
  if(cv[0]===3&&cv[1]===2)return{name:'  ',mult:9};
  if(isFlush)return{name:' ',mult:6};
  if(isStraight)return{name:' ',mult:4};
  if(cv[0]===3)return{name:'3 ',mult:3};
  if(cv[0]===2&&cv[1]===2)return{name:'2  ',mult:2};
  if(cv[0]===2&&pairs.some(p=>p>=11))return{name:'  +',mult:1};
  return{name:'  ',mult:0};
}

// ===================== KENO =====================
let kenoPicked=new Set(),kenoDrawn=[],kenoActive=false;
function buildKeno(name){
  return `<div style="text-align:center;">
    <p class="game-subtitle">${name}    1  10 !</p>
    ${betRow('kenoBet',50)}
    <div class="keno-info">
      <div class="keno-stat"><div style="font-size:11px;color:var(--muted)"></div><div class="keno-stat-val" id="kenoPickCount">0/10</div></div>
      <div class="keno-stat"><div style="font-size:11px;color:var(--muted)"></div><div class="keno-stat-val" id="kenoHits">-</div></div>
      <div class="keno-stat"><div style="font-size:11px;color:var(--muted)"></div><div class="keno-stat-val" id="kenoPayout">-</div></div>
    </div>
    <div class="keno-grid" id="kenoGrid"></div>
    <div class="game-result info" id="kenoRes">    !</div>
    <div class="btns-row">
      <button class="action-btn btn-purple" onclick="kenoClear()"> </button>
      <button class="action-btn btn-gold" onclick="kenoPlay()"> </button>
    </div>
  </div>`;
}
function kenoInit(){
  kenoPicked=new Set();kenoDrawn=[];kenoActive=false;
  const g=document.getElementById('kenoGrid');if(!g)return;
  g.innerHTML='';
  for(let i=1;i<=80;i++){const c=document.createElement('div');c.className='keno-num';c.textContent=i;c.onclick=()=>kenoToggle(i,c);g.appendChild(c);}
}
function kenoToggle(n,el){
  if(kenoActive)return;
  if(kenoPicked.has(n)){kenoPicked.delete(n);el.classList.remove('picked');}
  else if(kenoPicked.size<10){kenoPicked.add(n);el.classList.add('picked');}
  document.getElementById('kenoPickCount').textContent=kenoPicked.size+'/10';
}
function kenoClear(){kenoPicked=new Set();document.querySelectorAll('.keno-num').forEach(c=>{c.classList.remove('picked','drawn','hit');});document.getElementById('kenoPickCount').textContent='0/10';}
function kenoPlay(){
  if(kenoPicked.size===0){alert('    !');return;}
  const bet=getBet('kenoBet');if(!spendBet(bet)){setResult('kenoRes','  !','lose');return;}
  kenoActive=true;kenoDrawn=[];
  const avail=Array.from({length:80},(_,i)=>i+1);
  for(let i=0;i<20;i++){const j=Math.floor(Math.random()*(avail.length-i))+i;[avail[i],avail[j]]=[avail[j],avail[i]];kenoDrawn.push(avail[i]);}
  let hits=0;
  document.querySelectorAll('.keno-num').forEach((c,i)=>{
    const n=i+1;
    if(kenoDrawn.includes(n)){
      c.classList.add('drawn');
      if(kenoPicked.has(n)){c.classList.add('hit');hits++;}
    }
  });
  const mult=kenoPayouts(kenoPicked.size,hits);const win=Math.round(bet*mult*100)/100;
  document.getElementById('kenoHits').textContent=hits;
  document.getElementById('kenoPayout').textContent=mult>0?`x${mult}`:'0';
  if(win>0){chgBal(win);setResult('kenoRes',` ${hits} ! x${mult} = +${fmt(win)} `,'win');}
  else setResult('kenoRes',` ${hits} .  !`,'lose');
  kenoActive=false;
}
function kenoPayouts(picked,hits){
  const table={1:{1:3},2:{1:1,2:9},3:{2:3,3:20},4:{2:2,3:8,4:50},5:{3:4,4:15,5:100},6:{3:2,4:8,5:50,6:300},7:{4:5,5:20,6:100,7:700},8:{4:3,5:15,6:60,7:300,8:1000},9:{5:10,6:40,7:150,8:500,9:2000},10:{5:5,6:20,7:80,8:200,9:1000,10:5000}};
  return table[picked]?.[hits]||0;
}

// ===================== LIMBO =====================
let limboRunning=false;
function buildLimbo(name){
  return `<div class="limbo-wrap">
    <p class="game-subtitle">${name}  :     ?</p>
    ${betRow('limboBet',50)}
    <div class="limbo-target-row">
      <span style="color:var(--muted);font-size:14px;"> </span>
      <input type="number" class="limbo-target-inp" id="limboTarget" value="2" min="1.01" max="1000000" step="0.1">
      <span style="color:var(--muted);font-size:13px;">x</span>
    </div>
    <div class="limbo-target"><div class="limbo-num" id="limboNum" style="color:var(--cyan);">?</div><div style="font-size:12px;color:var(--muted)"> </div></div>
    <div class="game-result info" id="limboRes">    !</div>
    <div class="btns-row"><button class="action-btn btn-gold" id="limboBtn" onclick="doLimbo()"> </button></div>
    <div style="margin-top:12px;background:rgba(0,0,0,.3);border-radius:10px;padding:10px;font-size:13px;color:var(--muted);">
             ,   .  x2 =  ~50%,  x10 = ~10%.
    </div>
  </div>`;
}
function limboInit(){}
function doLimbo(){
  const bet=getBet('limboBet');if(!spendBet(bet)){setResult('limboRes','  !','lose');return;}
  const target=Math.max(1.01,parseFloat(document.getElementById('limboTarget').value)||2);
  document.getElementById('limboBtn').disabled=true;
  // Generate result (house edge ~3%)
  const r=Math.random();const result=Math.round(0.97/r*100)/100;
  const numEl=document.getElementById('limboNum');
  // Animate
  let disp=1,step=0;
  const anim=setInterval(()=>{
    step++;disp+=Math.random()*0.5;
    if(numEl)numEl.textContent=disp.toFixed(2)+'x';
    if(step>15){clearInterval(anim);
      const final=Math.max(1,Math.min(result,999999));
      if(numEl){numEl.textContent=final.toFixed(2)+'x';numEl.style.color=final>=target?'var(--gold)':'var(--red)';}
      document.getElementById('limboBtn').disabled=false;
      if(final>=target){const win=Math.round(bet*target*100)/100;chgBal(win);setResult('limboRes',` ${final.toFixed(2)}x  ${target}x! +${fmt(win)} `,'win');}
      else setResult('limboRes',` ${final.toFixed(2)}x < ${target}x  `,'lose');
    }
  },60);
  addInterval(anim);
}

// ===================== COIN FLIP =====================
let cfSide='heads';
function buildCoinFlip(name){
  return `<div class="coin-wrap">
    <p class="game-subtitle">${name}    ?</p>
    ${betRow('cfBet',50)}
    <div style="margin:8px 0;font-size:14px;color:var(--muted);"> :</div>
    <div class="coin-btns" style="margin-bottom:14px;">
      <button class="coin-choice gold-c active" id="cfHeads" onclick="selectCF('heads',this)">  (x2)</button>
      <button class="coin-choice purple-c" id="cfTails" onclick="selectCF('tails',this)">  (x2)</button>
    </div>
    <div class="coin heads" id="cfCoin"></div>
    <div class="game-result info" id="cfRes">    !</div>
    <div class="btns-row"><button class="action-btn btn-gold" id="cfBtn" onclick="doFlip()"> </button></div>
  </div>`;
}
function selectCF(side,btn){
  cfSide=side;
  document.querySelectorAll('.coin-choice').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}
function doFlip(){
  const bet=getBet('cfBet');if(!spendBet(bet)){setResult('cfRes','  !','lose');return;}
  document.getElementById('cfBtn').disabled=true;
  const coin=document.getElementById('cfCoin');coin.classList.add('flipping');
  setTimeout(()=>{
    coin.classList.remove('flipping');
    const result=Math.random()<0.5?'heads':'tails';
    coin.className=`coin ${result}`;coin.textContent=result==='heads'?'':'';
    document.getElementById('cfBtn').disabled=false;
    const won=result===cfSide;
    if(won){const w=bet*2;chgBal(w);setResult('cfRes',` ${result==='heads'?'':''}! +${fmt(w)} `,'win');}
    else setResult('cfRes',` ${result==='heads'?'':''}! .`,'lose');
  },600);
}

// ===================== TOWER =====================
let towerActive=false,towerLevel=0,towerBet=0,towerMult=1,towerGrid=[],TOWER_ROWS=8,TOWER_COLS=3,TOWER_BOMBS=1;
function buildTower(name){
  return `<div class="tower-wrap">
    <p class="game-subtitle">${name}   ,  !</p>
    ${betRow('towerBet',50)}
    <div class="mines-mult" id="towerInfo">   !</div>
    <div class="tower-grid" id="towerGrid"></div>
    <div class="game-result info" id="towerRes"></div>
    <div class="btns-row">
      <button class="action-btn btn-gold" id="towerStartBtn" onclick="towerStart()"> </button>
      <button class="action-btn btn-green" id="towerCashBtn" onclick="towerCash()" disabled> </button>
    </div>
  </div>`;
}
function towerInit(){renderTower();}
const TOWER_MULTS=[1.5,2,3,4,5,8,12,20];
function renderTower(){
  const g=document.getElementById('towerGrid');if(!g)return;g.innerHTML='';
  for(let r=TOWER_ROWS-1;r>=0;r--){
    const rowEl=document.createElement('div');rowEl.className='tower-level-row';
    const mult=TOWER_MULTS[r]||1;
    rowEl.innerHTML=`<span class="tower-mult">x${mult}</span>`;
    const rowCells=document.createElement('div');rowCells.className='tower-row';rowCells.id=`trow${r}`;
    for(let c=0;c<TOWER_COLS;c++){
      const cell=document.createElement('div');cell.className='tower-cell';cell.textContent='?';
      if(towerActive&&r===towerLevel)cell.onclick=()=>towerReveal(r,c,cell);
      rowCells.appendChild(cell);
    }
    rowEl.appendChild(rowCells);g.appendChild(rowEl);
  }
}
function towerStart(){
  const bet=getBet('towerBet');if(!spendBet(bet)){setResult('towerRes','  !','lose');return;}
  towerBet=bet;towerLevel=0;towerMult=1;towerActive=true;
  towerGrid=[];
  for(let r=0;r<TOWER_ROWS;r++){
    const row=Array(TOWER_COLS).fill(false);
    for(let b=0;b<TOWER_BOMBS;b++){let p=Math.floor(Math.random()*TOWER_COLS);while(row[p])p=(p+1)%TOWER_COLS;row[p]=true;}
    towerGrid.push(row);
  }
  renderTower();
  document.getElementById('towerStartBtn').disabled=true;document.getElementById('towerCashBtn').disabled=false;
  document.getElementById('towerInfo').textContent=`: ${fmt(bet)}   : ${towerLevel+1}  : x1.00`;
  setResult('towerRes','    !','info');
}
function towerReveal(r,c,cell){
  if(!towerActive||r!==towerLevel)return;
  cell.classList.add('done');cell.onclick=null;
  const isBomb=towerGrid[r][c];
  if(isBomb){
    cell.classList.add('bomb');cell.textContent='';towerActive=false;
    // reveal row
    const rowEl=document.getElementById(`trow${r}`);
    if(rowEl)Array.from(rowEl.children).forEach((c2,i2)=>{c2.classList.add('done');if(towerGrid[r][i2]){c2.textContent='';c2.classList.add('bomb');}});
    setResult('towerRes',`    ${r+1}!  .`,'lose');
    document.getElementById('towerStartBtn').disabled=false;document.getElementById('towerCashBtn').disabled=true;
    document.getElementById('towerInfo').textContent=' !';
  } else {
    cell.classList.add('safe');cell.textContent='';
    towerMult=TOWER_MULTS[r];towerLevel++;
    document.getElementById('towerInfo').textContent=`: ${fmt(towerBet)}   : ${towerLevel}   ${fmt(Math.round(towerBet*towerMult))}  (x${towerMult})`;
    setResult('towerRes',`  ${r+1} ! : +${fmt(Math.round(towerBet*towerMult))} `,'win');
    if(towerLevel>=TOWER_ROWS){towerCash(true);return;}
    renderTower();
  }
}
function towerCash(){
  if(!towerActive&&towerLevel===0)return;towerActive=false;
  const win=Math.round(towerBet*towerMult*100)/100;chgBal(win);
  setResult('towerRes',`    ${towerLevel}! +${fmt(win)}  (x${towerMult})`,'win');
  document.getElementById('towerStartBtn').disabled=false;document.getElementById('towerCashBtn').disabled=true;
  document.getElementById('towerInfo').textContent=`: ${fmt(win)} `;
}

// ===================== SCRATCH CARD =====================
let scratchSyms=[],scratchRevealed=0,scratchDone=false;
function buildScratch(name){
  return `<div class="scratch-wrap">
    <p class="game-subtitle">${name}       !</p>
    ${betRow('scratchBet',50)}
    <div class="scratch-grid" id="scratchGrid"></div>
    <div class="game-result info" id="scratchRes">    !</div>
    <div class="btns-row"><button class="action-btn btn-gold" id="scratchBuyBtn" onclick="scratchBuy()">  </button></div>
    <div style="margin-top:10px;font-size:12px;color:var(--muted);"> 3   = !    .</div>
  </div>`;
}
const SCRATCH_SYMS=['','','','','',''];
const SCRATCH_PAYS={'':20,'':15,'':10,'':8,'':3,'':4};
function scratchInit(){
  const g=document.getElementById('scratchGrid');if(!g)return;g.innerHTML='';
  for(let i=0;i<9;i++){
    const c=document.createElement('div');c.className='scratch-cell';
    c.onclick=()=>scratchReveal(i,c);g.appendChild(c);
  }
}
function scratchBuy(){
  const bet=getBet('scratchBet');if(!spendBet(bet)){setResult('scratchRes','  !','lose');return;}
  // Generate symbols (guaranteed interesting results)
  scratchSyms=Array.from({length:9},()=>SCRATCH_SYMS[Math.floor(Math.random()*SCRATCH_SYMS.length)]);
  // Small chance of win: force 3 same in some cases
  if(Math.random()<0.3){const s=SCRATCH_SYMS[Math.floor(Math.random()*SCRATCH_SYMS.length)];const pos=[0,1,2,3,4,5,6,7,8];for(let i=0;i<3;i++){const pi=Math.floor(Math.random()*(pos.length-i))+i;[pos[i],pos[pi]]=[pos[pi],pos[i]];scratchSyms[pos[i]]=s;}}
  scratchRevealed=0;scratchDone=false;
  // Reset cells
  document.querySelectorAll('.scratch-cell').forEach(c=>{c.classList.remove('scratched');c.style.opacity='';c.textContent='';});
  setResult('scratchRes','    !','info');
  document.getElementById('scratchBuyBtn').disabled=true;
  // Store bet
  document.getElementById('scratchBuyBtn').dataset.bet=bet;
}
function scratchReveal(i,cell){
  if(scratchDone||cell.classList.contains('scratched'))return;
  if(!scratchSyms.length)return;
  cell.classList.add('scratched');cell.textContent=scratchSyms[i];scratchRevealed++;
  if(scratchRevealed===9||scratchDone){scratchCheck(parseFloat(document.getElementById('scratchBuyBtn').dataset.bet)||50);}
}
function scratchCheck(bet){
  scratchDone=true;document.getElementById('scratchBuyBtn').disabled=false;
  // Open all
  document.querySelectorAll('.scratch-cell').forEach((c,i)=>{c.classList.add('scratched');c.textContent=scratchSyms[i];});
  const counts={};scratchSyms.forEach(s=>counts[s]=(counts[s]||0)+1);
  const triple=Object.entries(counts).find(([s,c])=>c>=3);
  if(triple){const[sym,cnt]=triple;const win=Math.round(bet*SCRATCH_PAYS[sym]*(cnt>=4?2:1));chgBal(win);setResult('scratchRes',` 3x ${sym}! +${fmt(win)} `,'win');}
  else setResult('scratchRes','   .  !','lose');
}

// ===================== DICE =====================
let diceSel=null;
function buildDice(name){
  return `<div class="dice-wrap">
    <p class="game-subtitle">${name}     !</p>
    ${betRow('diceBet',50)}
    <div class="dice-targets">
      ${[2,3,4,5,6,7,8,9,10,11,12].map(n=>{
        const odds=n===2||n===12?36:n===3||n===11?18:n===4||n===10?12:n===5||n===9?9:n===6||n===8?7.2:6;
        return`<div class="dtarget" onclick="selDice(${n},this)"><div>${n}</div><div style="font-size:11px;color:var(--muted);">x${odds}</div></div>`;
      }).join('')}
    </div>
    <div style="display:flex;justify-content:center;gap:12px;" id="diceFaces">
      <div class="dice-face"></div>
      <div class="dice-face"></div>
    </div>
    <div class="game-result info" id="diceRes">   !</div>
    <div class="btns-row"><button class="action-btn btn-gold" id="diceBtn" onclick="doThrow()"> </button></div>
  </div>`;
}
const DICE_EMOJIS=['','','','','','',''];
const DICE_ODDS={2:36,3:18,4:12,5:9,6:7.2,7:6,8:7.2,9:9,10:12,11:18,12:36};
function selDice(n,el){diceSel=n;document.querySelectorAll('.dtarget').forEach(d=>d.classList.remove('sel'));el.classList.add('sel');}
function doThrow(){
  if(!diceSel){alert(' !');return;}
  const bet=getBet('diceBet');if(!spendBet(bet)){setResult('diceRes','  !','lose');return;}
  document.getElementById('diceBtn').disabled=true;
  const d1=Math.floor(Math.random()*6)+1,d2=Math.floor(Math.random()*6)+1,total=d1+d2;
  document.getElementById('diceFaces').innerHTML=`<div class="dice-face">${DICE_EMOJIS[d1]}</div><div class="dice-face">${DICE_EMOJIS[d2]}</div>`;
  document.getElementById('diceBtn').disabled=false;
  if(total===diceSel){const mult=DICE_ODDS[diceSel];const win=Math.round(bet*mult);chgBal(win);setResult('diceRes',` ${d1}+${d2}=${total}! x${mult} = +${fmt(win)} `,'win');}
  else setResult('diceRes',` ${d1}+${d2}=${total}  ${diceSel}. .`,'lose');
}

// ===================== SUPPORT CHAT BOT =====================
const BOT_NAME = '  ()';
let chatOpen = false;

const BOT_RESPONSES = {
  : ['!      NeonX Casino.   ?', '!     .   !'],
  : ['   15   24     .  : 500 .    .', '     ""  "". : , , .   1 !'],
  : [' ! : Visa/MC, , ,  .  100 ,  +200%  !', '       ""  "".   !'],
  : ['  :\n 200%   \n 150 \n   \n    "BONUS"  !', '     ! 200% + 150 FS   .  x35  30 .'],
  : ['  : /ID,   .   1-2 .      !', '    verify@neonx.casino    .  !'],
  : ['      support@neonx.casino   "Unblock".    2 !', '    .    .     1 .'],
  : ['  500+    : Pragmatic Play, Evolution, NetEnt  . , live-, -    !', '     . RTP  94  99%.  Aviator  Gates of Olympus   !'],
  : ['  50 000 .  5%  .       "".    !', '    NeonX.        : finance@neonx.casino'],
  : ['     .      ID    ,  !', '          tech@neonx.casino.  24/7!'],
  : ['   !   .    Trustpilot      ', '    !         .'],
  default: [' ! , ,       ', ' !  .          .', ',  !   ... ']
};

const QUICK_BTNS = [
  {text:'  ', key:''},
  {text:' ', key:''},
  {text:' ', key:''},
  {text:' ', key:''},
  {text:'  ', key:''},
  {text:' . ', key:''},
];

let chatHistory = [];
let botTyping = false;

function openSupportChat(){
  chatOpen = true;
  document.getElementById('supportChatModal').style.display = 'block';
  if(chatHistory.length === 0){
    addBotMsg(BOT_RESPONSES.[0]);
    renderQuickReplies();
  }
}
function closeSupportChat(){
  chatOpen = false;
  document.getElementById('supportChatModal').style.display = 'none';
}
function addBotMsg(text){
  chatHistory.push({role:'bot',text});
  renderChat();
}
function addUserMsg(text){
  chatHistory.push({role:'user',text});
  renderChat();
}
function renderChat(){
  const el = document.getElementById('chatMessages');
  if(!el) return;
  el.innerHTML = chatHistory.map(m => {
    if(m.role === 'bot') return `<div style="display:flex;gap:8px;align-items:flex-end;">
      <div style="width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,var(--purple),var(--pink));display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0;"></div>
      <div style="background:rgba(168,85,247,.15);border:1px solid rgba(168,85,247,.3);border-radius:12px 12px 12px 2px;padding:10px 14px;font-size:13px;line-height:1.5;max-width:230px;white-space:pre-line;">${m.text}</div>
    </div>`;
    return `<div style="display:flex;justify-content:flex-end;">
      <div style="background:linear-gradient(135deg,rgba(124,58,237,.4),rgba(236,72,153,.3));border:1px solid rgba(168,85,247,.3);border-radius:12px 12px 2px 12px;padding:10px 14px;font-size:13px;max-width:220px;">${m.text}</div>
    </div>`;
  }).join('') + (botTyping ? `<div style="display:flex;gap:8px;align-items:center;"><div style="width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,var(--purple),var(--pink));display:flex;align-items:center;justify-content:center;font-size:14px;"></div><div style="background:rgba(168,85,247,.1);border:1px solid rgba(168,85,247,.2);border-radius:12px;padding:10px 14px;font-size:18px;letter-spacing:3px;"></div></div>` : '');
  el.scrollTop = el.scrollHeight;
}
function renderQuickReplies(){
  const el = document.getElementById('quickReplies');
  if(!el) return;
  el.innerHTML = QUICK_BTNS.map(b => `<button onclick="sendQuick('${b.key}')" style="background:rgba(168,85,247,.12);border:1px solid rgba(168,85,247,.3);color:var(--text);padding:5px 10px;border-radius:20px;font-size:12px;cursor:pointer;font-family:'Rajdhani',sans-serif;font-weight:600;white-space:nowrap;transition:.2s;" onmouseover="this.style.background='rgba(168,85,247,.3)'" onmouseout="this.style.background='rgba(168,85,247,.12)'">${b.text}</button>`).join('');
}
function sendQuick(key){
  const btn = QUICK_BTNS.find(b=>b.key===key);
  if(btn) sendChatMsg(btn.text, key);
}
function sendChatMsg(textOverride, keyOverride){
  const input = document.getElementById('chatInput');
  const text = textOverride || (input ? input.value.trim() : '');
  if(!text) return;
  if(input && !textOverride) input.value = '';
  addUserMsg(text);
  // Hide quick replies after first message
  const qr = document.getElementById('quickReplies');
  if(qr) qr.innerHTML = '';
  // Find best response
  botTyping = true; renderChat();
  const lower = text.toLowerCase();
  let key = keyOverride || 'default';
  if(!keyOverride){
    if(/||| /.test(lower)) key='';
    else if(/||/.test(lower)) key='';
    else if(/||/.test(lower)) key='';
    else if(/||/.test(lower)) key='';
    else if(/||/.test(lower)) key='';
    else if(/|||/.test(lower)) key='';
    else if(/||/.test(lower)) key='';
    else if(/|| |/.test(lower)) key='';
    else if(/||/.test(lower)) key='';
    else if(/||/.test(lower)) key='';
  }
  const responses = BOT_RESPONSES[key] || BOT_RESPONSES.default;
  const reply = responses[Math.floor(Math.random()*responses.length)];
  setTimeout(()=>{
    botTyping = false;
    addBotMsg(reply);
    // Show quick replies again after bot responds
    setTimeout(renderQuickReplies, 500);
  }, 800 + Math.random()*700);
}

// ===================== AUTH & PROFILE SYSTEM =====================
const LEVELS = [
  {lvl:1, name:'',    icon:'', minXP:0,      color:'#94a3b8', perks:['   ']},
  {lvl:2, name:'',     icon:'', minXP:500,    color:'#a3e635', perks:[' 3%', ' . 1 ']},
  {lvl:3, name:'',   icon:'', minXP:1500,   color:'#f59e0b', perks:[' 5%', '']},
  {lvl:4, name:'',     icon:'', minXP:4000,   color:'#06b6d4', perks:[' 8%', ' ']},
  {lvl:5, name:'',     icon:'', minXP:10000,  color:'#a855f7', perks:[' 12%', 'VIP-']},
  {lvl:6, name:'',   icon:'', minXP:25000,  color:'#ec4899', perks:[' 18%', '']},
  {lvl:7, name:' ', icon:'', minXP:60000,  color:'var(--gold)', perks:[' 25%', ' ']},
];

// Simple in-memory user store (localStorage for persistence)
let currentUser = null;

function getUsers(){ try{return JSON.parse(localStorage.getItem('nxUsers')||'{}');}catch{return {};} }
function saveUsers(u){ localStorage.setItem('nxUsers', JSON.stringify(u)); }
function saveSession(email){ localStorage.setItem('nxSession', email); }
function clearSession(){ localStorage.removeItem('nxSession'); }

function getLevelByXP(xp){
  let lvl = LEVELS[0];
  for(const l of LEVELS){ if(xp >= l.minXP) lvl = l; }
  return lvl;
}
function getNextLevel(xp){
  for(const l of LEVELS){ if(xp < l.minXP) return l; }
  return null;
}
function getXPProgress(xp){
  const cur = getLevelByXP(xp);
  const next = getNextLevel(xp);
  if(!next) return 100;
  const from = cur.minXP, to = next.minXP;
  return Math.round(((xp - from) / (to - from)) * 100);
}
function getAvatarLetter(name){ return (name||'?')[0].toUpperCase(); }
function getAvatarColor(xp){ return getLevelByXP(xp).color; }

function openAuthModal(tab='login'){
  document.getElementById('authModal').style.display = 'flex';
  switchAuthTab(tab);
  // clear errors
  document.getElementById('loginErr').style.display = 'none';
  document.getElementById('regErr').style.display = 'none';
}
function closeAuthModal(){ document.getElementById('authModal').style.display = 'none'; }

function switchAuthTab(tab){
  const isLogin = tab === 'login';
  document.getElementById('formLogin').style.display = isLogin ? 'block' : 'none';
  document.getElementById('formReg').style.display = isLogin ? 'none' : 'block';
  const tl = document.getElementById('tabLogin'), tr = document.getElementById('tabReg');
  tl.style.background = isLogin ? 'rgba(168,85,247,.15)' : 'transparent';
  tl.style.color = isLogin ? '#fff' : 'var(--muted)';
  tl.style.borderBottom = isLogin ? '2px solid var(--purple)' : '2px solid transparent';
  tr.style.background = !isLogin ? 'rgba(245,158,11,.15)' : 'transparent';
  tr.style.color = !isLogin ? '#fff' : 'var(--muted)';
  tr.style.borderBottom = !isLogin ? '2px solid var(--gold)' : '2px solid transparent';
}

function showErr(id, msg){ const el=document.getElementById(id); el.textContent=msg; el.style.display='block'; }

function doLogin(){
  const email = document.getElementById('loginEmail').value.trim();
  const pass = document.getElementById('loginPass').value;
  if(!email || !pass) return showErr('loginErr','  ');
  const users = getUsers();
  const user = users[email];
  if(!user) return showErr('loginErr','   ');
  if(user.pass !== btoa(pass)) return showErr('loginErr','  ');
  loginSuccess(email, user);
}

function doRegister(){
  const name = document.getElementById('regName').value.trim();
  const email = document.getElementById('regEmail').value.trim();
  const pass = document.getElementById('regPass').value;
  const agree = document.getElementById('regAgree').checked;
  if(!name || !email || !pass) return showErr('regErr','  ');
  if(name.length < 3) return showErr('regErr','  3 ');
  if(!email.includes('@')) return showErr('regErr',' email');
  if(pass.length < 6) return showErr('regErr','  6 ');
  if(!agree) return showErr('regErr','   ');
  const users = getUsers();
  if(users[email]) return showErr('regErr','  email  ');
  const newUser = {
    name, email, pass: btoa(pass),
    xp: 0, totalWin: 0, totalBet: 0, gamesPlayed: 0,
    balance: 1000, debt: 0,
    registered: new Date().toLocaleDateString('ru'),
    avatar: getAvatarLetter(name),
    transactions: [],
  };
  users[email] = newUser;
  saveUsers(users);
  loginSuccess(email, newUser);
}

function loginSuccess(email, user){
  currentUser = {...user, email};
  saveSession(email);
  // Sync balance
  balance = user.balance || 1000;
  debt = user.debt || 0;
  updBal();
  closeAuthModal();
  updateHeaderUI();
  showWelcomeToast(user);
}

function updateHeaderUI(){
  const loggedIn = !!currentUser;
  document.getElementById('authButtons').style.display = loggedIn ? 'none' : 'flex';
  const pc = document.getElementById('profileChip');
  pc.style.display = loggedIn ? 'flex' : 'none';
  const mmAuth = document.getElementById('mobileAuthBtns');
  const mmProf = document.getElementById('mobileProfileBtn');
  if(mmAuth) mmAuth.style.display = loggedIn ? 'none' : 'flex';
  if(mmProf) mmProf.style.display = loggedIn ? 'block' : 'none';
  if(loggedIn){
    const lv = getLevelByXP(currentUser.xp);
    const av = document.getElementById('profileAvatar');
    av.textContent = currentUser.avatar || getAvatarLetter(currentUser.name);
    av.style.background = `linear-gradient(135deg,${lv.color},var(--pink))`;
    document.getElementById('profileName').textContent = currentUser.name;
    document.getElementById('profileLevelBadge').textContent = `${lv.icon} ${lv.name}  .${lv.lvl}`;
  }
}

function showWelcomeToast(user){
  const lv = getLevelByXP(user.xp);
  const n = document.createElement('div');
  n.style.cssText='position:fixed;top:80px;left:50%;transform:translateX(-50%);z-index:9999;background:linear-gradient(135deg,rgba(124,58,237,.9),rgba(236,72,153,.7));border:1px solid rgba(168,85,247,.5);border-radius:16px;padding:16px 24px;text-align:center;backdrop-filter:blur(20px);box-shadow:0 0 40px rgba(168,85,247,.5);animation:slideIn .4s ease;min-width:280px;';
  n.innerHTML=`<div style="font-size:28px;margin-bottom:4px;">${lv.icon}</div><div style="font-family:'Orbitron',sans-serif;font-weight:700;font-size:14px;"> , ${user.name}!</div><div style="color:rgba(255,255,255,.7);font-size:12px;margin-top:4px;">${lv.name}  ${fmt(balance)}   </div>`;
  document.body.appendChild(n);
  setTimeout(()=>n.remove(), 3500);
}

// Add XP when player wins/plays
function addXP(amount){ if(!currentUser) return; currentUser.xp += amount; saveCurrentUser(); updateHeaderUI(); }

function openProfileModal(){
  if(!currentUser){ openAuthModal('login'); return; }
  const lv = getLevelByXP(currentUser.xp);
  const next = getNextLevel(currentUser.xp);
  const progress = getXPProgress(currentUser.xp);
  const nextXP = next ? next.minXP - currentUser.xp : 0;
  document.getElementById('profileModalContent').innerHTML = `
    <!-- Hero -->
    <div style="text-align:center;margin-bottom:24px;">
      <div style="width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,${lv.color},var(--pink));display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:700;margin:0 auto 12px;box-shadow:0 0 30px ${lv.color}60;border:3px solid ${lv.color};">${currentUser.avatar || getAvatarLetter(currentUser.name)}</div>
      <div style="font-family:'Orbitron',sans-serif;font-size:20px;font-weight:700;color:#fff;">${currentUser.name}</div>
      <div style="color:var(--muted);font-size:13px;margin-top:4px;">${currentUser.email}</div>
      <div style="display:inline-block;background:rgba(168,85,247,.15);border:1px solid rgba(168,85,247,.4);border-radius:20px;padding:5px 16px;margin-top:8px;font-size:14px;font-weight:700;" style="color:${lv.color};">${lv.icon} ${lv.name}   ${lv.lvl}</div>
    </div>

    <!-- XP Bar -->
    <div style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:16px;margin-bottom:16px;">
      <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
        <span style="font-size:13px;font-weight:700;color:${lv.color};">${lv.icon} ${lv.name}</span>
        <span style="font-size:13px;color:var(--muted);">XP: ${fmt(currentUser.xp)}${next?' / '+fmt(next.minXP):' MAX'}</span>
      </div>
      <div style="background:rgba(0,0,0,.4);border-radius:20px;height:12px;overflow:hidden;">
        <div style="height:100%;width:${progress}%;background:linear-gradient(90deg,${lv.color},var(--pink));border-radius:20px;transition:width .5s ease;box-shadow:0 0 10px ${lv.color}80;"></div>
      </div>
      ${next ? `<div style="text-align:center;color:var(--muted);font-size:12px;margin-top:8px;">  <strong style="color:${next.color};">${next.icon} ${next.name}</strong>: <strong style="color:#fff;">${fmt(nextXP)} XP</strong></div>` : '<div style="text-align:center;color:var(--gold);font-size:12px;margin-top:8px;">   !</div>'}
    </div>

    <!-- Stats -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px;">
      ${[
        {icon:'',val:fmt(currentUser.totalWin)+' ',lbl:' '},
        {icon:'',val:fmt(currentUser.gamesPlayed),lbl:' '},
        {icon:'',val:fmt(balance)+' ',lbl:''},
        {icon:'',val:currentUser.registered,lbl:' .'},
      ].map(s=>`<div style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:12px;padding:12px;text-align:center;">
        <div style="font-size:22px;margin-bottom:4px;">${s.icon}</div>
        <div style="font-family:'Orbitron',sans-serif;font-size:14px;font-weight:700;color:var(--gold);">${s.val}</div>
        <div style="font-size:11px;color:var(--muted);margin-top:2px;">${s.lbl}</div>
      </div>`).join('')}
    </div>

    <!-- Current level perks -->
    <div style="background:rgba(168,85,247,.08);border:1px solid rgba(168,85,247,.25);border-radius:12px;padding:14px;margin-bottom:16px;">
      <div style="font-size:13px;font-weight:700;color:#fff;margin-bottom:8px;">   ${lv.lvl}:</div>
      ${lv.perks.map(p=>`<div style="font-size:13px;color:var(--muted);padding:3px 0;"> ${p}</div>`).join('')}
    </div>

    <!-- All levels -->
    <div style="margin-bottom:20px;">
      <div style="font-size:14px;font-weight:700;color:#fff;margin-bottom:10px;">  :</div>
      <div style="display:flex;flex-direction:column;gap:6px;">
        ${LEVELS.map(l=>{
          const done = currentUser.xp >= l.minXP;
          const active = getLevelByXP(currentUser.xp).lvl === l.lvl;
          return `<div style="background:${active?'rgba(168,85,247,.2)':'rgba(255,255,255,.03)'};border:1px solid ${active?'rgba(168,85,247,.5)':'rgba(255,255,255,.07)'};border-radius:10px;padding:10px 14px;display:flex;align-items:center;gap:10px;">
            <span style="font-size:22px;${done?'':'filter:grayscale(1);opacity:.4'}">${l.icon}</span>
            <div style="flex:1;">
              <div style="font-size:13px;font-weight:700;color:${done?l.color:'var(--muted)'};">${l.name} <span style="font-size:11px;color:var(--muted);">.${l.lvl}</span></div>
              <div style="font-size:11px;color:var(--muted);">${l.perks.join('  ')}</div>
            </div>
            <div style="font-size:11px;color:${done?'var(--green)':'var(--muted)'};">
              ${done?(active?' ':''):' '+fmt(l.minXP)+' XP'}
            </div>
          </div>`;
        }).join('')}
      </div>
    </div>

    <!-- Actions -->
    <div style="display:flex;gap:10px;flex-wrap:wrap;">
      <button onclick="closeProfileModal();showAddFunds()" style="flex:1;background:linear-gradient(135deg,var(--gold),#d97706);border:none;color:#000;padding:12px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;cursor:pointer;"> </button>
      <button onclick="doLogout()" style="flex:1;background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.4);color:var(--red);padding:12px;border-radius:10px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;cursor:pointer;"> </button>
    </div>
  `;
  document.getElementById('profileModal').style.display = 'flex';
}
function closeProfileModal(){ document.getElementById('profileModal').style.display = 'none'; }

function doLogout(){
  // Save user state
  saveCurrentUser();
  currentUser = null;
  clearSession();
  balance = 1000; debt = 0; updBal();
  closeProfileModal();
  updateHeaderUI();
  const n = document.createElement('div');
  n.style.cssText='position:fixed;top:80px;left:50%;transform:translateX(-50%);z-index:9999;background:rgba(10,10,30,.95);border:1px solid rgba(168,85,247,.3);border-radius:12px;padding:14px 24px;color:#fff;font-size:14px;backdrop-filter:blur(20px);animation:slideIn .4s ease;';
  n.textContent = '    ';
  document.body.appendChild(n);
  setTimeout(()=>n.remove(), 2500);
}

function saveCurrentUser(){
  if(!currentUser) return;
  const users = getUsers();
  users[currentUser.email] = {
    ...users[currentUser.email],
    xp: currentUser.xp,
    totalWin: currentUser.totalWin,
    gamesPlayed: currentUser.gamesPlayed,
    balance,
    debt,
  };
  saveUsers(users);
}

// Auto-restore session
function restoreSession(){
  const email = localStorage.getItem('nxSession');
  if(!email) return;
  const users = getUsers();
  const user = users[email];
  if(user){ loginSuccess(email, user); }
}

// Hook into game events to award XP and track stats
function chgBal(d){
  balance = Math.max(0, Math.round((balance+d)*100)/100);
  updBal();
  checkBankrupt();
  if(currentUser && d > 0){
    currentUser.totalWin += d;
    currentUser.xp += Math.floor(d / 10); // 1 XP per 10  won
    updateHeaderUI();
    saveCurrentUser();
  }
  if(currentUser && d < 0){
    currentUser.gamesPlayed++;
    currentUser.xp += 2; // 2 XP per game played
    saveCurrentUser();
  }
}

// ===================== PROMO & BONUS SYSTEM =====================
const PROMO_CODES = {
  'NEONX500':    { type:'balance', amount:500,   desc:' +500   ', once:true },
  'WELCOME1000': { type:'balance', amount:1000,  desc:' +1000   ', once:true },
  'FREESPIN150': { type:'freespin',amount:150,   desc:' 150  ', once:true },
  'VIP2025':     { type:'vip',    amount:0,      desc:' VIP-  7 ', once:true },
  'CASHBACK10':  { type:'cashback',amount:10,    desc:'  10%   ', once:true },
  'BONUS200':    { type:'percent', amount:200,   desc:' +200%   ', once:true },
  'LUCKY777':    { type:'balance', amount:777,   desc:'  777 ', once:true },
  'REFBONUS':    { type:'balance', amount:300,   desc:'   300 ', once:true },
  'THUNDER500':  { type:'balance', amount:500,   desc:'   500 ', once:false },
  'DOUBLE':      { type:'percent', amount:100,   desc:'   ', once:true },
};

let usedPromos = JSON.parse(localStorage.getItem('nxUsedPromos')||'[]');
let activeBonuses = JSON.parse(localStorage.getItem('nxActiveBonuses')||'[]');
let refData = JSON.parse(localStorage.getItem('nxRefData')||'{"count":0,"earned":0}');
let pendingDepositBonus = null; // percent bonus waiting for deposit

function initBonusPage(){
  renderPromoHints();
  renderBonusCards();
  renderActiveBonuses();
  renderRefBlock();
}

function renderPromoHints(){
  const el = document.getElementById('promoHints');
  if(!el) return;
  // Show a few hint codes
  const hints = ['NEONX500','LUCKY777','FREESPIN150','VIP2025'];
  el.innerHTML = hints.map(c=>`<span onclick="document.getElementById('promoInput').value='${c}'" style="background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:6px;padding:4px 10px;font-size:11px;font-family:'Orbitron',sans-serif;color:var(--muted);cursor:pointer;transition:.2s;" onmouseover="this.style.color='#fff';this.style.borderColor='rgba(168,85,247,.4)'" onmouseout="this.style.color='var(--muted)';this.style.borderColor='rgba(255,255,255,.1)'">${c}</span>`).join('');
}

function activatePromo(){
  const raw = (document.getElementById('promoInput')||{}).value||'';
  const code = raw.trim().toUpperCase();
  const el = document.getElementById('promoResult');
  if(!el) return;
  if(!code){ el.innerHTML='<span style="color:var(--muted);"> </span>'; return; }
  const promo = PROMO_CODES[code];
  if(!promo){ el.innerHTML='<span style="color:var(--red);">     </span>'; return; }
  if(promo.once && usedPromos.includes(code)){
    el.innerHTML='<span style="color:var(--red);">     </span>'; return;
  }
  if(!currentUser){
    el.innerHTML='<span style="color:var(--gold);">   ,   </span>';
    setTimeout(()=>openAuthModal('login'),1200); return;
  }
  // Apply promo
  applyPromo(code, promo, el);
}

function applyPromo(code, promo, el){
  usedPromos.push(code);
  localStorage.setItem('nxUsedPromos', JSON.stringify(usedPromos));
  document.getElementById('promoInput').value = '';
  if(promo.type === 'balance'){
    chgBal(promo.amount);
    el.innerHTML=`<span style="color:var(--green);"> ! ${promo.desc}   !</span>`;
    _bonusToast(promo.desc, '');
    addActiveBonus({icon:'', name:`: ${code}`, desc:`+${fmt(promo.amount)}  `, expires: Date.now()+86400000*7, color:'var(--green)'});
  } else if(promo.type === 'freespin'){
    el.innerHTML=`<span style="color:var(--gold);"> ${promo.desc}!    !</span>`;
    _bonusToast(promo.desc, '');
    addActiveBonus({icon:'', name:`: ${code}`, desc:`${promo.amount}   -`, expires: Date.now()+86400000*3, color:'var(--gold)'});
  } else if(promo.type === 'vip'){
    el.innerHTML=`<span style="color:var(--gold);"> ${promo.desc} !  !</span>`;
    _bonusToast(promo.desc, '');
    addActiveBonus({icon:'', name:'VIP-', desc:'7  VIP:  20%, ', expires: Date.now()+86400000*7, color:'var(--gold)'});
  } else if(promo.type === 'cashback'){
    el.innerHTML=`<span style="color:var(--cyan);"> ${promo.desc} !</span>`;
    _bonusToast(promo.desc, '');
    addActiveBonus({icon:'', name:' 10%', desc:'  ', expires: Date.now()+86400000*1, color:'var(--cyan)'});
  } else if(promo.type === 'percent'){
    pendingDepositBonus = promo.amount;
    el.innerHTML=`<span style="color:var(--neon);"> ${promo.desc}!  ,  .</span>`;
    _bonusToast(promo.desc, '');
    addActiveBonus({icon:'', name:` +${promo.amount}%`, desc:'  ', expires: Date.now()+86400000*1, color:'var(--neon)'});
  }
  renderActiveBonuses();
}

function addActiveBonus(bonus){
  activeBonuses.push({...bonus, id: Date.now()});
  localStorage.setItem('nxActiveBonuses', JSON.stringify(activeBonuses));
}

function renderActiveBonuses(){
  const el = document.getElementById('activeBonusBar');
  if(!el) return;
  // Filter expired
  activeBonuses = activeBonuses.filter(b=>b.expires > Date.now());
  localStorage.setItem('nxActiveBonuses', JSON.stringify(activeBonuses));
  if(!activeBonuses.length){
    el.innerHTML='<p style="color:var(--muted);font-size:13px;margin-bottom:24px;">  .     !</p>';
    return;
  }
  el.innerHTML=`<div style="display:flex;flex-wrap:wrap;gap:10px;margin-bottom:24px;">${activeBonuses.map(b=>{
    const left = Math.max(0, Math.floor((b.expires - Date.now())/3600000));
    const days = Math.floor(left/24), hrs = left%24;
    const timeStr = days>0?`${days} ${hrs}`:`${hrs}`;
    return `<div style="background:rgba(255,255,255,.04);border:1px solid ${b.color}40;border-radius:12px;padding:12px 16px;display:flex;align-items:center;gap:10px;min-width:200px;">
      <span style="font-size:24px;">${b.icon}</span>
      <div>
        <div style="font-weight:700;font-size:13px;color:${b.color};">${b.name}</div>
        <div style="font-size:11px;color:var(--muted);">${b.desc}</div>
        <div style="font-size:10px;color:rgba(148,163,184,.5);margin-top:2px;"> : ${timeStr}</div>
      </div>
      <button onclick="removeBonus(${b.id})" style="background:none;border:none;color:rgba(255,255,255,.2);cursor:pointer;font-size:16px;padding:0 0 0 4px;line-height:1;" title=""></button>
    </div>`;
  }).join('')}</div>`;
}

function removeBonus(id){
  activeBonuses = activeBonuses.filter(b=>b.id!==id);
  localStorage.setItem('nxActiveBonuses', JSON.stringify(activeBonuses));
  renderActiveBonuses();
}

function _bonusToast(msg, icon){
  const n = document.createElement('div');
  n.style.cssText='position:fixed;top:80px;left:50%;transform:translateX(-50%);z-index:9999;background:linear-gradient(135deg,rgba(124,58,237,.95),rgba(236,72,153,.8));border:1px solid rgba(168,85,247,.5);border-radius:16px;padding:14px 24px;text-align:center;backdrop-filter:blur(20px);box-shadow:0 0 40px rgba(168,85,247,.5);animation:slideIn .4s ease;';
  n.innerHTML=`<div style="font-size:28px;margin-bottom:4px;">${icon}</div><div style="font-weight:700;font-size:15px;">${msg}</div>`;
  document.body.appendChild(n);
  setTimeout(()=>n.remove(), 3000);
}

// BONUS CARDS DATA
const BONUS_DEFS = [
  {
    id:'welcome', bg:'bc1', badge:' ', badgeClass:'bb-hot',
    icon:'', title:'  ',
    desc:'200%    + 150   Gates of Olympus.  x35.',
    value:'200% + 150 FS', valueColor:'var(--neon)',
    btnText:'  ', oneTime:true,
    action: function(){
      if(!currentUser){ _bonusToast('    ',''); openAuthModal('login'); return; }
      const key = 'bonus_welcome_'+currentUser.email;
      if(localStorage.getItem(key)){ showBonusInfo('  ','    .    !',''); return; }
      localStorage.setItem(key,'1');
      chgBal(1000);
      addActiveBonus({icon:'',name:' ',desc:'+1000  + 150 FS ',expires:Date.now()+86400000*30,color:'var(--neon)'});
      _bonusToast(' +1000   150 FS !','');
      renderActiveBonuses();
    }
  },
  {
    id:'freespin', bg:'bc2', badge:'  ', badgeClass:'bb-new',
    icon:'', title:'  ',
    desc:'    200      .',
    value:' 200 FS', valueColor:'var(--cyan)',
    btnText:' FS ',
    action: function(){
      if(!currentUser){ _bonusToast('  ',''); openAuthModal('login'); return; }
      const now = new Date();
      const weekKey = 'freespin_week_'+Math.floor(now/604800000)+'_'+currentUser.email;
      if(localStorage.getItem(weekKey)){ showBonusInfo(' ','    !    .',''); return; }
      localStorage.setItem(weekKey,'1');
      const fs = 50 + Math.floor(Math.random()*151);
      addActiveBonus({icon:'',name:' ',desc:`${fs} FS  -`,expires:Date.now()+86400000*7,color:'var(--cyan)'});
      _bonusToast(` ${fs}  !`,'');
      renderActiveBonuses();
    }
  },
  {
    id:'cashback', bg:'bc3', badge:'  ', badgeClass:'bb-hot',
    icon:'', title:' ',
    desc:'    15%     . !',
    value:' 15% ', valueColor:'var(--gold)',
    btnText:' ',
    action: function(){
      if(!currentUser){ openAuthModal('login'); return; }
      const losses = Math.max(0, currentUser.totalBet||0);
      const cb = Math.round(Math.min(losses*0.15, 50000));
      if(cb < 100){ showBonusInfo('','    .        !',''); return; }
      const key = 'cashback_week_'+Math.floor(Date.now()/604800000)+'_'+currentUser.email;
      if(localStorage.getItem(key)){ showBonusInfo(' ',`    : ${fmt(cb)} .    !`,''); return; }
      localStorage.setItem(key,'1');
      chgBal(cb);
      _bonusToast(`  ${fmt(cb)}  !`,'');
    }
  },
  {
    id:'reload', bg:'bc5', badge:'  ', badgeClass:'bb-vip',
    icon:'', title:'Reload   ',
    desc:'  50%    .  50 000 .  x25.',
    value:'+50%  ', valueColor:'var(--gold)',
    btnText:' ',
    action: function(){
      if(!currentUser){ openAuthModal('login'); return; }
      const key = 'reload_week_'+Math.floor(Date.now()/604800000)+'_'+currentUser.email;
      if(localStorage.getItem(key)){ showBonusInfo(' ','     .    !',''); return; }
      localStorage.setItem(key,'1');
      pendingDepositBonus = 50;
      addActiveBonus({icon:'',name:'Reload +50%',desc:'   ( 50 000 )',expires:Date.now()+86400000,color:'var(--gold)'});
      _bonusToast(' Reload +50% !  !','');
      renderActiveBonuses();
    }
  },
  {
    id:'tournament', bg:'bc4', badge:' ', badgeClass:'bb-new',
    icon:'', title:'- $500 000',
    desc:'     . 1   $100 000.  !',
    value:'$500 000 ', valueColor:'var(--green)',
    btnText:' ',
    action: function(){
      if(!currentUser){ openAuthModal('login'); return; }
      const key = 'tournament_'+new Date().getMonth()+'_'+currentUser.email;
      if(localStorage.getItem(key)){
        const pos = parseInt(localStorage.getItem(key+'_pos')||'0');
        showBonusInfo('',`  !  : #${pos}  48 293 .      !`,''); return;
      }
      const pos = Math.floor(Math.random()*48000)+100;
      localStorage.setItem(key,'1');
      localStorage.setItem(key+'_pos', pos);
      addActiveBonus({icon:'',name:'-',desc:` #${pos}    `,expires:Date.now()+86400000*30,color:'var(--green)'});
      _bonusToast('   ! : #'+pos,'');
      renderActiveBonuses();
    }
  },
  {
    id:'vip', bg:'bc3', badge:' ', badgeClass:'bb-vip',
    icon:'', title:'VIP- NeonX',
    desc:' ,   20%,     .',
    value:'  20%', valueColor:'var(--gold)',
    btnText:' ',
    action: function(){
      if(!currentUser){ openAuthModal('login'); return; }
      const xp = currentUser.xp || 0;
      if(xp < 4000){ showBonusInfo('VIP-',` VIP   4 ().   ${fmt(xp)} XP  ${fmt(4000)} .     VIP  !`,''); return; }
      addActiveBonus({icon:'',name:'VIP-',desc:' :  20%, ',expires:Date.now()+86400000*30,color:'var(--gold)'});
      _bonusToast('    VIP-!','');
      renderActiveBonuses();
    }
  },
];

function renderBonusCards(){
  const el = document.getElementById('bonusCardsGrid');
  if(!el) return;
  el.innerHTML = BONUS_DEFS.map(b=>`
    <div class="bonus-card ${b.bg} neon-border" style="cursor:pointer;" onclick="bonusAction('${b.id}')">
      <div class="bonus-badge ${b.badgeClass}">${b.badge}</div>
      <div class="bonus-icon">${b.icon}</div>
      <div class="bonus-title">${b.title}</div>
      <div class="bonus-desc">${b.desc}</div>
      <div class="bonus-value" style="color:${b.valueColor}">${b.value}</div>
      <button class="bonus-btn" onclick="event.stopPropagation();bonusAction('${b.id}')">${b.btnText}</button>
    </div>`).join('');
}

function bonusAction(id){
  const b = BONUS_DEFS.find(x=>x.id===id);
  if(b) b.action();
}

function showBonusInfo(title, msg, icon){
  document.getElementById('infoTitle').textContent = `${icon} ${title}`;
  document.getElementById('infoBody').innerHTML = `<div style="text-align:center;padding:10px 0;"><div style="font-size:48px;margin-bottom:12px;">${icon}</div><p style="color:var(--muted);line-height:1.6;">${msg}</p><button class="action-btn btn-gold" style="margin-top:20px;width:100%;" onclick="closeInfo()"></button></div>`;
  document.getElementById('infoModal').classList.add('open');
}

// REFERRAL
function renderRefBlock(){
  const refLink = document.getElementById('refLinkBox');
  const refCountEl = document.getElementById('refCount');
  const refEarnedEl = document.getElementById('refEarned');
  const userTag = currentUser ? currentUser.email.split('@')[0].toLowerCase().replace(/[^a-z0-9]/g,'') : 'guest';
  if(refLink) refLink.textContent = `neonx.casino/ref/${userTag}`;
  if(refCountEl) refCountEl.textContent = refData.count;
  if(refEarnedEl) refEarnedEl.textContent = fmt(refData.earned)+' ';
}

function copyRefLink(){
  if(!currentUser){ _bonusToast('   ',''); openAuthModal('login'); return; }
  const userTag = currentUser.email.split('@')[0].toLowerCase().replace(/[^a-z0-9]/g,'');
  const link = `https://neonx.casino/ref/${userTag}`;
  navigator.clipboard.writeText(link).catch(()=>{});
  const btn = document.getElementById('copyRefBtn');
  if(btn){ btn.textContent=' !'; btn.style.color='var(--green)'; setTimeout(()=>{ btn.textContent=' '; btn.style.color='var(--cyan)'; },2000); }
}

function simulateReferal(){
  if(!currentUser){ openAuthModal('login'); return; }
  const names = ['','','','','','','',''];
  const name = names[Math.floor(Math.random()*names.length)];
  const earned = 500;
  refData.count++;
  refData.earned += earned;
  localStorage.setItem('nxRefData', JSON.stringify(refData));
  chgBal(earned);
  renderRefBlock();
  const n = document.createElement('div');
  n.style.cssText='position:fixed;top:80px;left:50%;transform:translateX(-50%);z-index:9999;background:linear-gradient(135deg,rgba(6,182,212,.2),rgba(16,185,129,.15));border:1px solid rgba(6,182,212,.5);border-radius:16px;padding:16px 28px;text-align:center;backdrop-filter:blur(20px);box-shadow:0 0 40px rgba(6,182,212,.3);animation:slideIn .4s ease;';
  n.innerHTML=`<div style="font-size:28px;margin-bottom:4px;"></div><div style="font-weight:700;font-size:15px;">${name}    !</div><div style="color:var(--cyan);font-size:13px;margin-top:4px;">+${fmt(earned)}  </div>`;
  document.body.appendChild(n);
  setTimeout(()=>n.remove(), 4000);
}

// Also update home page bonus cards to use same actions
// ===================== INIT =====================
updBal();
buildGrid('slotsGrid','slots');
updateHeaderUI();
restoreSession();

// Pre-build all grids on load
setTimeout(()=>{
  buildGrid('liveGrid','live');
  buildGrid('crashGrid','crash');
  buildGrid('tableGrid','table');
},500);
</script>
</body>
</html>
